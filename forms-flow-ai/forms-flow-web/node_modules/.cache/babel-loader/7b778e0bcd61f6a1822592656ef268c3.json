{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";\nimport _objectWithoutProperties from \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectWithoutProperties.js\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nvar _excluded = [\"component\"],\n    _excluded2 = [\"component\"];\n\nvar _jsxFileName = \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\src\\\\components\\\\Form\\\\Item\\\\index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport { Route, Switch, Redirect, useParams } from 'react-router-dom';\nimport React, { useEffect } from 'react';\nimport { Formio, getForm } from 'react-formio';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { STAFF_REVIEWER, CLIENT, STAFF_DESIGNER } from '../../../constants/constants';\nimport View from './View';\nimport Edit from './Edit';\nimport Submission from './Submission/index';\nimport Preview from './Preview';\nimport { checkIsObjectId } from \"../../../apiManager/services/formatterService\";\nimport { fetchFormByAlias } from \"../../../apiManager/services/bpmFormServices\";\nimport { setFormFailureErrorData, setFormRequestData, setFormSuccessData, resetFormData } from \"../../../actions/formActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Item = /*#__PURE__*/React.memo(_c = _s(function () {\n  _s();\n\n  var _useParams = useParams(),\n      formId = _useParams.formId;\n\n  var userRoles = useSelector(function (state) {\n    return state.user.roles || [];\n  });\n  var dispatch = useDispatch();\n  useEffect(function () {\n    dispatch(resetFormData('form', formId));\n\n    if (checkIsObjectId(formId)) {\n      dispatch(getForm('form', formId));\n    } else {\n      dispatch(fetchFormByAlias(formId, /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(err, formObj) {\n          var form_id;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (!err) {\n                    form_id = formObj._id;\n                    dispatch(setFormRequestData('form', form_id, \"\".concat(Formio.getProjectUrl(), \"/form/\").concat(form_id)));\n                    dispatch(setFormSuccessData('form', formObj));\n                  } else {\n                    dispatch(setFormFailureErrorData('form', err));\n                  }\n\n                case 1:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x, _x2) {\n          return _ref.apply(this, arguments);\n        };\n      }()));\n    }\n  }, [formId, dispatch]);\n  /**\r\n   * Protected route to form submissions\r\n   */\n\n  var SubmissionRoute = function SubmissionRoute(_ref2) {\n    var Component = _ref2.component,\n        rest = _objectWithoutProperties(_ref2, _excluded);\n\n    return /*#__PURE__*/_jsxDEV(Route, _objectSpread(_objectSpread({}, rest), {}, {\n      render: function render(props) {\n        return userRoles.includes(STAFF_REVIEWER) || userRoles.includes(CLIENT) ? /*#__PURE__*/_jsxDEV(Component, _objectSpread({}, props), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, _this) : /*#__PURE__*/_jsxDEV(Redirect, {\n          exact: true,\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, _this);\n      }\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }, _this);\n  };\n  /**\r\n   * Protected route for form deletion\r\n   */\n\n\n  var FormActionRoute = function FormActionRoute(_ref3) {\n    var Component = _ref3.component,\n        rest = _objectWithoutProperties(_ref3, _excluded2);\n\n    return /*#__PURE__*/_jsxDEV(Route, _objectSpread(_objectSpread({}, rest), {}, {\n      render: function render(props) {\n        return userRoles.includes(STAFF_DESIGNER) ? /*#__PURE__*/_jsxDEV(Component, _objectSpread({}, props), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, _this) : /*#__PURE__*/_jsxDEV(Redirect, {\n          exact: true,\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, _this);\n      }\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/form/:formId\",\n        component: View\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(FormActionRoute, {\n        path: \"/form/:formId/preview\",\n        component: Preview\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(FormActionRoute, {\n        path: \"/form/:formId/edit\",\n        component: Edit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(SubmissionRoute, {\n        path: \"/form/:formId/submission\",\n        component: Submission\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, _this), /*#__PURE__*/_jsxDEV(Redirect, {\n        exact: true,\n        to: \"/404\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 7\n  }, _this);\n}, \"cnF6ACmBjTevzV15WF6f+NWAeoI=\", false, function () {\n  return [useParams, useSelector, useDispatch];\n}));\n_c2 = Item;\nexport default Item;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Item$React.memo\");\n$RefreshReg$(_c2, \"Item\");","map":{"version":3,"sources":["C:/Users/Devin/AOT_Projects/forms-flow-master/forms-flow-ai/forms-flow-web/src/components/Form/Item/index.js"],"names":["Route","Switch","Redirect","useParams","React","useEffect","Formio","getForm","useDispatch","useSelector","STAFF_REVIEWER","CLIENT","STAFF_DESIGNER","View","Edit","Submission","Preview","checkIsObjectId","fetchFormByAlias","setFormFailureErrorData","setFormRequestData","setFormSuccessData","resetFormData","Item","memo","formId","userRoles","state","user","roles","dispatch","err","formObj","form_id","_id","getProjectUrl","SubmissionRoute","Component","component","rest","props","includes","FormActionRoute"],"mappings":"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","sourcesContent":["import {Route, Switch, Redirect, useParams} from 'react-router-dom'\r\nimport React, {useEffect} from 'react'\r\nimport {Formio, getForm} from 'react-formio'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {STAFF_REVIEWER, CLIENT, STAFF_DESIGNER} from '../../../constants/constants'\r\nimport View from './View'\r\nimport Edit from './Edit'\r\nimport Submission from './Submission/index'\r\nimport Preview from './Preview'\r\nimport {checkIsObjectId} from \"../../../apiManager/services/formatterService\";\r\nimport { fetchFormByAlias } from \"../../../apiManager/services/bpmFormServices\";\r\nimport {setFormFailureErrorData, setFormRequestData, setFormSuccessData, resetFormData} from \"../../../actions/formActions\";\r\n\r\nconst Item = React.memo(()=>{\r\n  const {formId} = useParams();\r\n  const userRoles= useSelector((state) => state.user.roles || []);\r\n  const dispatch= useDispatch();\r\n\r\n  useEffect(()=>{\r\n    dispatch(resetFormData('form', formId));\r\n    if(checkIsObjectId(formId)){\r\n      dispatch(getForm('form', formId));\r\n    }\r\n    else{\r\n      dispatch(\r\n        fetchFormByAlias(formId, async (err, formObj) => {\r\n          if (!err) {\r\n            const form_id = formObj._id;\r\n            dispatch(setFormRequestData('form',form_id,`${Formio.getProjectUrl()}/form/${form_id}`));\r\n            dispatch(setFormSuccessData('form',formObj));\r\n          }else{\r\n            dispatch(setFormFailureErrorData('form',err));\r\n          }\r\n        })\r\n      );\r\n    }\r\n  },[formId, dispatch]);\r\n\r\n  /**\r\n   * Protected route to form submissions\r\n   */\r\n  const SubmissionRoute = ({ component: Component, ...rest }) => (\r\n    <Route {...rest} render={(props) => (\r\n      userRoles.includes(STAFF_REVIEWER) || userRoles.includes(CLIENT)\r\n        ? <Component {...props} />\r\n        : <Redirect exact to='/' />\r\n    )} />\r\n  );\r\n  /**\r\n   * Protected route for form deletion\r\n   */\r\n  const FormActionRoute = ({ component: Component, ...rest }) => (\r\n    <Route {...rest} render={(props) => (\r\n      userRoles.includes(STAFF_DESIGNER)\r\n        ? <Component {...props} />\r\n        : <Redirect exact to='/' />\r\n    )} />\r\n  );\r\n\r\n  return (\r\n      <div>\r\n        <Switch>\r\n          <Route exact path=\"/form/:formId\" component={View} />\r\n          <FormActionRoute path=\"/form/:formId/preview\" component={Preview}/>\r\n          <FormActionRoute path=\"/form/:formId/edit\" component={Edit}/>\r\n          <SubmissionRoute path=\"/form/:formId/submission\" component={Submission}/>\r\n          <Redirect exact to='/404'/>\r\n        </Switch>\r\n      </div>\r\n    )\r\n});\r\n\r\nexport default Item;\r\n"]},"metadata":{},"sourceType":"module"}