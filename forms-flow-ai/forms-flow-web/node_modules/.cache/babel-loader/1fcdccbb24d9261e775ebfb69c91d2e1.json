{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.array.find.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.string.trim.js\");\n\nrequire(\"core-js/modules/es.string.replace.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _Multivalue2 = _interopRequireDefault(require(\"../multivalue/Multivalue\"));\n\nvar _utils = require(\"../../../utils/utils\");\n\nvar _widgets = _interopRequireDefault(require(\"../../../widgets\"));\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar Input = /*#__PURE__*/function (_Multivalue) {\n  _inherits(Input, _Multivalue);\n\n  var _super = _createSuper(Input);\n\n  function Input(component, options, data) {\n    var _this;\n\n    _classCallCheck(this, Input);\n\n    _this = _super.call(this, component, options, data);\n    _this.triggerUpdateValueAt = _lodash.default.debounce(_this.updateValueAt.bind(_assertThisInitialized(_this)), 100);\n    return _this;\n  }\n\n  _createClass(Input, [{\n    key: \"inputInfo\",\n    get: function get() {\n      var attr = {\n        name: this.options.name,\n        type: this.component.inputType || 'text',\n        class: 'form-control',\n        lang: this.options.language\n      };\n\n      if (this.component.inputMode) {\n        attr.inputmode = this.component.inputMode;\n      }\n\n      if (this.component.placeholder) {\n        attr.placeholder = this.t(this.component.placeholder, {\n          _userInput: true\n        });\n      }\n\n      if (this.component.tabindex) {\n        attr.tabindex = this.component.tabindex;\n      }\n\n      if (this.disabled) {\n        attr.disabled = 'disabled';\n      }\n\n      if (this.component.autocomplete) {\n        attr.autocomplete = this.component.autocomplete;\n      }\n\n      _lodash.default.defaults(attr, this.component.attributes);\n\n      return {\n        id: this.key,\n        type: 'input',\n        changeEvent: 'input',\n        content: '',\n        attr: attr\n      };\n    }\n  }, {\n    key: \"maskOptions\",\n    get: function get() {\n      return _lodash.default.map(this.component.inputMasks, function (mask) {\n        return {\n          label: mask.label,\n          value: mask.label\n        };\n      });\n    }\n  }, {\n    key: \"isMultipleMasksField\",\n    get: function get() {\n      return this.component.allowMultipleMasks && !!this.component.inputMasks && !!this.component.inputMasks.length;\n    }\n  }, {\n    key: \"getMaskByName\",\n    value: function getMaskByName(maskName) {\n      var inputMask = _lodash.default.find(this.component.inputMasks, function (inputMask) {\n        return inputMask.label === maskName;\n      });\n\n      return inputMask ? inputMask.mask : undefined;\n    }\n  }, {\n    key: \"setInputMask\",\n    value: function setInputMask(input, inputMask) {\n      var mask = inputMask || this.component.displayMask || this.component.inputMask;\n      return _get(_getPrototypeOf(Input.prototype), \"setInputMask\", this).call(this, input, mask, !this.component.placeholder);\n    }\n  }, {\n    key: \"getMaskOptions\",\n    value: function getMaskOptions() {\n      return this.component.inputMasks.map(function (mask) {\n        return {\n          label: mask.label,\n          value: mask.label\n        };\n      });\n    }\n  }, {\n    key: \"getWordCount\",\n    value: function getWordCount(value) {\n      return !value ? 0 : value.trim().split(/\\s+/).length;\n    }\n  }, {\n    key: \"remainingWords\",\n    get: function get() {\n      var maxWords = _lodash.default.parseInt(_lodash.default.get(this.component, 'validate.maxWords'), 10);\n\n      var wordCount = this.getWordCount(this.dataValue);\n      return maxWords - wordCount;\n    }\n  }, {\n    key: \"prefix\",\n    get: function get() {\n      return this.component.prefix;\n    }\n  }, {\n    key: \"suffix\",\n    get: function get() {\n      if (this.component.widget && this.component.widget.type === 'calendar') {\n        var calendarIcon = this.renderTemplate('icon', {\n          ref: 'icon',\n          // After font-awesome would be updated to v5.x, \"clock-o\" should be replaced with \"clock\"\n          className: this.iconClass(this.component.enableDate || this.component.widget.enableDate ? 'calendar' : 'clock-o'),\n          styles: '',\n          content: ''\n        }).trim();\n\n        if (this.component.prefix !== calendarIcon) {\n          // converting string to HTML markup to render correctly DateTime component in portal.form.io\n          return (0, _utils.convertStringToHTMLElement)(calendarIcon, '[ref=\"icon\"]');\n        }\n      }\n\n      return this.component.suffix;\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement(value, index) {\n      // Double quotes cause the input value to close so replace them with html quote char.\n      if (value && typeof value === 'string') {\n        value = value.replace(/\"/g, '&quot;');\n      }\n\n      var info = this.inputInfo;\n      info.attr = info.attr || {};\n      info.attr.value = this.getValueAsString(this.formatValue(this.parseValue(value))).replace(/\"/g, '&quot;');\n      var valueMask = this.component.inputMask;\n      var displayMask = this.component.displayMask;\n      var hasDifferentDisplayAndSaveFormats = valueMask && displayMask && valueMask !== displayMask;\n\n      if (this.isMultipleMasksField) {\n        info.attr.class += ' formio-multiple-mask-input';\n      }\n\n      return this.isMultipleMasksField ? this.renderTemplate('multipleMasksInput', {\n        input: info,\n        value: value,\n        index: index,\n        selectOptions: this.getMaskOptions() || []\n      }, this.isHtmlRenderMode() ? 'html' : null) : this.renderTemplate('input', {\n        prefix: this.prefix,\n        suffix: this.suffix,\n        input: info,\n        value: this.formatValue(this.parseValue(value)),\n        hasValueMaskInput: hasDifferentDisplayAndSaveFormats,\n        index: index\n      }, this.isHtmlRenderMode() ? 'html' : null);\n    }\n  }, {\n    key: \"setCounter\",\n    value: function setCounter(type, element, count, max) {\n      if (max) {\n        var remaining = max - count;\n\n        if (remaining > 0) {\n          this.removeClass(element, 'text-danger');\n        } else {\n          this.addClass(element, 'text-danger');\n        }\n\n        this.setContent(element, this.t(\"{{ remaining }} \".concat(type, \" remaining.\"), {\n          remaining: remaining\n        }));\n      } else {\n        this.setContent(element, this.t(\"{{ count }} \".concat(type), {\n          count: count\n        }));\n      }\n    }\n  }, {\n    key: \"updateValueAt\",\n    value: function updateValueAt(value, flags, index) {\n      flags = flags || {};\n\n      if (_lodash.default.get(this.component, 'showWordCount', false)) {\n        if (this.refs.wordcount && this.refs.wordcount[index]) {\n          var maxWords = _lodash.default.parseInt(_lodash.default.get(this.component, 'validate.maxWords', 0), 10);\n\n          this.setCounter(this.t('words'), this.refs.wordcount[index], this.getWordCount(value), maxWords);\n        }\n      }\n\n      if (_lodash.default.get(this.component, 'showCharCount', false)) {\n        if (this.refs.charcount && this.refs.charcount[index]) {\n          var maxChars = _lodash.default.parseInt(_lodash.default.get(this.component, 'validate.maxLength', 0), 10);\n\n          this.setCounter(this.t('characters'), this.refs.charcount[index], value.length, maxChars);\n        }\n      }\n    }\n  }, {\n    key: \"getValueAt\",\n    value: function getValueAt(index) {\n      var input = this.performInputMapping(this.refs.input[index]);\n\n      if (input && input.widget) {\n        return input.widget.getValue();\n      }\n\n      return input ? input.value : undefined;\n    }\n  }, {\n    key: \"updateValue\",\n    value: function updateValue(value, flags, index) {\n      flags = flags || {};\n\n      var changed = _get(_getPrototypeOf(Input.prototype), \"updateValue\", this).call(this, value, flags);\n\n      this.triggerUpdateValueAt(this.dataValue, flags, index);\n      return changed;\n    }\n  }, {\n    key: \"parseValue\",\n    value: function parseValue(value) {\n      return value;\n    }\n  }, {\n    key: \"formatValue\",\n    value: function formatValue(value) {\n      return value;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      this.loadRefs(element, {\n        charcount: 'multiple',\n        wordcount: 'multiple',\n        prefix: 'multiple',\n        suffix: 'multiple'\n      });\n      return _get(_getPrototypeOf(Input.prototype), \"attach\", this).call(this, element);\n    }\n  }, {\n    key: \"getWidget\",\n    value: function getWidget(index) {\n      index = index || 0;\n\n      if (this.refs.input && this.refs.input[index]) {\n        return this.refs.input[index].widget;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"attachElement\",\n    value: function attachElement(element, index) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(Input.prototype), \"attachElement\", this).call(this, element, index);\n\n      if (element.widget) {\n        element.widget.destroy();\n      } // Attach the widget.\n\n\n      var promise = _nativePromiseOnly.default.resolve();\n\n      element.widget = this.createWidget(index);\n\n      if (element.widget) {\n        promise = element.widget.attach(element);\n\n        if (this.refs.prefix && this.refs.prefix[index]) {\n          element.widget.addPrefix(this.refs.prefix[index]);\n        }\n\n        if (this.refs.suffix && this.refs.suffix[index]) {\n          element.widget.addSuffix(this.refs.suffix[index]);\n        }\n      } // Add focus and blur events.\n\n\n      this.addFocusBlurEvents(element);\n\n      if (this.options.submitOnEnter) {\n        this.addEventListener(element, 'keypress', function (event) {\n          var key = event.keyCode || event.which;\n\n          if (key === 13) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            _this2.emit('submitButton');\n          }\n        });\n      }\n\n      return promise;\n    }\n    /**\n     * Creates an instance of a widget for this component.\n     *\n     * @return {null}\n     */\n\n  }, {\n    key: \"createWidget\",\n    value: function createWidget(index) {\n      var _this$root,\n          _this3 = this; // Return null if no widget is found.\n\n\n      if (!this.component.widget) {\n        return null;\n      } // Get the widget settings.\n\n\n      var settings = typeof this.component.widget === 'string' ? {\n        type: this.component.widget\n      } : this.component.widget;\n\n      if ((_this$root = this.root) !== null && _this$root !== void 0 && _this$root.shadowRoot) {\n        var _this$root2;\n\n        settings.shadowRoot = (_this$root2 = this.root) === null || _this$root2 === void 0 ? void 0 : _this$root2.shadowRoot;\n      } // Make sure we have a widget.\n\n\n      if (!_widgets.default.hasOwnProperty(settings.type)) {\n        return null;\n      } // Create the widget.\n\n\n      var widget = new _widgets.default[settings.type](settings, this.component, this, index);\n      widget.on('update', function () {\n        return _this3.updateValue(_this3.getValue(), {\n          modified: true\n        }, index);\n      }, true);\n      widget.on('redraw', function () {\n        return _this3.redraw();\n      }, true);\n      return widget;\n    }\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      _get(_getPrototypeOf(Input.prototype), \"detach\", this).call(this);\n\n      if (this.refs && this.refs.input) {\n        for (var i = 0; i <= this.refs.input.length; i++) {\n          var widget = this.getWidget(i);\n\n          if (widget) {\n            widget.destroy();\n          }\n        }\n      }\n\n      this.refs.input = [];\n    }\n  }, {\n    key: \"addFocusBlurEvents\",\n    value: function addFocusBlurEvents(element) {\n      var _this4 = this;\n\n      this.addEventListener(element, 'focus', function () {\n        if (_this4.root.focusedComponent !== _this4) {\n          if (_this4.root.pendingBlur) {\n            _this4.root.pendingBlur();\n          }\n\n          _this4.root.focusedComponent = _this4;\n\n          _this4.emit('focus', _this4);\n        } else if (_this4.root.focusedComponent === _this4 && _this4.root.pendingBlur) {\n          _this4.root.pendingBlur.cancel();\n\n          _this4.root.pendingBlur = null;\n        }\n      });\n      this.addEventListener(element, 'blur', function () {\n        _this4.root.pendingBlur = (0, _utils.delay)(function () {\n          _this4.emit('blur', _this4);\n\n          if (_this4.component.validateOn === 'blur') {\n            _this4.root.triggerChange({\n              fromBlur: true\n            }, {\n              instance: _this4,\n              component: _this4.component,\n              value: _this4.dataValue,\n              flags: {\n                fromBlur: true\n              }\n            });\n          }\n\n          _this4.root.focusedComponent = null;\n          _this4.root.pendingBlur = null;\n        });\n      });\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len = arguments.length, extend = new Array(_len), _key = 0; _key < _len; _key++) {\n        extend[_key] = arguments[_key];\n      }\n\n      return _Multivalue2.default.schema.apply(_Multivalue2.default, [{\n        widget: {\n          type: 'input'\n        }\n      }].concat(extend));\n    }\n  }]);\n\n  return Input;\n}(_Multivalue2.default);\n\nexports.default = Input;","map":{"version":3,"sources":["C:/Users/Devin/AOT_Projects/forms-flow-master/forms-flow-ai/forms-flow-web/node_modules/formiojs/components/_classes/input/Input.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","require","Object","defineProperty","exports","value","default","_Multivalue2","_interopRequireDefault","_utils","_widgets","_nativePromiseOnly","_lodash","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","call","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","Input","_Multivalue","_super","component","options","data","_this","triggerUpdateValueAt","debounce","updateValueAt","bind","attr","name","type","inputType","class","lang","language","inputMode","inputmode","placeholder","t","_userInput","tabindex","disabled","autocomplete","defaults","attributes","id","changeEvent","content","map","inputMasks","mask","label","allowMultipleMasks","getMaskByName","maskName","inputMask","find","undefined","setInputMask","input","displayMask","getMaskOptions","getWordCount","trim","split","maxWords","parseInt","wordCount","dataValue","prefix","widget","calendarIcon","renderTemplate","ref","className","iconClass","enableDate","styles","convertStringToHTMLElement","suffix","renderElement","index","replace","info","inputInfo","getValueAsString","formatValue","parseValue","valueMask","hasDifferentDisplayAndSaveFormats","isMultipleMasksField","selectOptions","isHtmlRenderMode","hasValueMaskInput","setCounter","element","count","max","remaining","removeClass","addClass","setContent","concat","flags","refs","wordcount","charcount","maxChars","getValueAt","performInputMapping","getValue","updateValue","changed","attach","loadRefs","getWidget","attachElement","_this2","destroy","promise","resolve","createWidget","addPrefix","addSuffix","addFocusBlurEvents","submitOnEnter","addEventListener","event","keyCode","which","preventDefault","stopPropagation","emit","_this$root","_this3","settings","root","shadowRoot","_this$root2","on","modified","redraw","detach","_this4","focusedComponent","pendingBlur","cancel","delay","validateOn","triggerChange","fromBlur","schema","_len","extend","Array","_key"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.array.find.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.string.trim.js\");\n\nrequire(\"core-js/modules/es.string.replace.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _Multivalue2 = _interopRequireDefault(require(\"../multivalue/Multivalue\"));\n\nvar _utils = require(\"../../../utils/utils\");\n\nvar _widgets = _interopRequireDefault(require(\"../../../widgets\"));\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar Input = /*#__PURE__*/function (_Multivalue) {\n  _inherits(Input, _Multivalue);\n\n  var _super = _createSuper(Input);\n\n  function Input(component, options, data) {\n    var _this;\n\n    _classCallCheck(this, Input);\n\n    _this = _super.call(this, component, options, data);\n    _this.triggerUpdateValueAt = _lodash.default.debounce(_this.updateValueAt.bind(_assertThisInitialized(_this)), 100);\n    return _this;\n  }\n\n  _createClass(Input, [{\n    key: \"inputInfo\",\n    get: function get() {\n      var attr = {\n        name: this.options.name,\n        type: this.component.inputType || 'text',\n        class: 'form-control',\n        lang: this.options.language\n      };\n\n      if (this.component.inputMode) {\n        attr.inputmode = this.component.inputMode;\n      }\n\n      if (this.component.placeholder) {\n        attr.placeholder = this.t(this.component.placeholder, {\n          _userInput: true\n        });\n      }\n\n      if (this.component.tabindex) {\n        attr.tabindex = this.component.tabindex;\n      }\n\n      if (this.disabled) {\n        attr.disabled = 'disabled';\n      }\n\n      if (this.component.autocomplete) {\n        attr.autocomplete = this.component.autocomplete;\n      }\n\n      _lodash.default.defaults(attr, this.component.attributes);\n\n      return {\n        id: this.key,\n        type: 'input',\n        changeEvent: 'input',\n        content: '',\n        attr: attr\n      };\n    }\n  }, {\n    key: \"maskOptions\",\n    get: function get() {\n      return _lodash.default.map(this.component.inputMasks, function (mask) {\n        return {\n          label: mask.label,\n          value: mask.label\n        };\n      });\n    }\n  }, {\n    key: \"isMultipleMasksField\",\n    get: function get() {\n      return this.component.allowMultipleMasks && !!this.component.inputMasks && !!this.component.inputMasks.length;\n    }\n  }, {\n    key: \"getMaskByName\",\n    value: function getMaskByName(maskName) {\n      var inputMask = _lodash.default.find(this.component.inputMasks, function (inputMask) {\n        return inputMask.label === maskName;\n      });\n\n      return inputMask ? inputMask.mask : undefined;\n    }\n  }, {\n    key: \"setInputMask\",\n    value: function setInputMask(input, inputMask) {\n      var mask = inputMask || this.component.displayMask || this.component.inputMask;\n      return _get(_getPrototypeOf(Input.prototype), \"setInputMask\", this).call(this, input, mask, !this.component.placeholder);\n    }\n  }, {\n    key: \"getMaskOptions\",\n    value: function getMaskOptions() {\n      return this.component.inputMasks.map(function (mask) {\n        return {\n          label: mask.label,\n          value: mask.label\n        };\n      });\n    }\n  }, {\n    key: \"getWordCount\",\n    value: function getWordCount(value) {\n      return !value ? 0 : value.trim().split(/\\s+/).length;\n    }\n  }, {\n    key: \"remainingWords\",\n    get: function get() {\n      var maxWords = _lodash.default.parseInt(_lodash.default.get(this.component, 'validate.maxWords'), 10);\n\n      var wordCount = this.getWordCount(this.dataValue);\n      return maxWords - wordCount;\n    }\n  }, {\n    key: \"prefix\",\n    get: function get() {\n      return this.component.prefix;\n    }\n  }, {\n    key: \"suffix\",\n    get: function get() {\n      if (this.component.widget && this.component.widget.type === 'calendar') {\n        var calendarIcon = this.renderTemplate('icon', {\n          ref: 'icon',\n          // After font-awesome would be updated to v5.x, \"clock-o\" should be replaced with \"clock\"\n          className: this.iconClass(this.component.enableDate || this.component.widget.enableDate ? 'calendar' : 'clock-o'),\n          styles: '',\n          content: ''\n        }).trim();\n\n        if (this.component.prefix !== calendarIcon) {\n          // converting string to HTML markup to render correctly DateTime component in portal.form.io\n          return (0, _utils.convertStringToHTMLElement)(calendarIcon, '[ref=\"icon\"]');\n        }\n      }\n\n      return this.component.suffix;\n    }\n  }, {\n    key: \"renderElement\",\n    value: function renderElement(value, index) {\n      // Double quotes cause the input value to close so replace them with html quote char.\n      if (value && typeof value === 'string') {\n        value = value.replace(/\"/g, '&quot;');\n      }\n\n      var info = this.inputInfo;\n      info.attr = info.attr || {};\n      info.attr.value = this.getValueAsString(this.formatValue(this.parseValue(value))).replace(/\"/g, '&quot;');\n      var valueMask = this.component.inputMask;\n      var displayMask = this.component.displayMask;\n      var hasDifferentDisplayAndSaveFormats = valueMask && displayMask && valueMask !== displayMask;\n\n      if (this.isMultipleMasksField) {\n        info.attr.class += ' formio-multiple-mask-input';\n      }\n\n      return this.isMultipleMasksField ? this.renderTemplate('multipleMasksInput', {\n        input: info,\n        value: value,\n        index: index,\n        selectOptions: this.getMaskOptions() || []\n      }, this.isHtmlRenderMode() ? 'html' : null) : this.renderTemplate('input', {\n        prefix: this.prefix,\n        suffix: this.suffix,\n        input: info,\n        value: this.formatValue(this.parseValue(value)),\n        hasValueMaskInput: hasDifferentDisplayAndSaveFormats,\n        index: index\n      }, this.isHtmlRenderMode() ? 'html' : null);\n    }\n  }, {\n    key: \"setCounter\",\n    value: function setCounter(type, element, count, max) {\n      if (max) {\n        var remaining = max - count;\n\n        if (remaining > 0) {\n          this.removeClass(element, 'text-danger');\n        } else {\n          this.addClass(element, 'text-danger');\n        }\n\n        this.setContent(element, this.t(\"{{ remaining }} \".concat(type, \" remaining.\"), {\n          remaining: remaining\n        }));\n      } else {\n        this.setContent(element, this.t(\"{{ count }} \".concat(type), {\n          count: count\n        }));\n      }\n    }\n  }, {\n    key: \"updateValueAt\",\n    value: function updateValueAt(value, flags, index) {\n      flags = flags || {};\n\n      if (_lodash.default.get(this.component, 'showWordCount', false)) {\n        if (this.refs.wordcount && this.refs.wordcount[index]) {\n          var maxWords = _lodash.default.parseInt(_lodash.default.get(this.component, 'validate.maxWords', 0), 10);\n\n          this.setCounter(this.t('words'), this.refs.wordcount[index], this.getWordCount(value), maxWords);\n        }\n      }\n\n      if (_lodash.default.get(this.component, 'showCharCount', false)) {\n        if (this.refs.charcount && this.refs.charcount[index]) {\n          var maxChars = _lodash.default.parseInt(_lodash.default.get(this.component, 'validate.maxLength', 0), 10);\n\n          this.setCounter(this.t('characters'), this.refs.charcount[index], value.length, maxChars);\n        }\n      }\n    }\n  }, {\n    key: \"getValueAt\",\n    value: function getValueAt(index) {\n      var input = this.performInputMapping(this.refs.input[index]);\n\n      if (input && input.widget) {\n        return input.widget.getValue();\n      }\n\n      return input ? input.value : undefined;\n    }\n  }, {\n    key: \"updateValue\",\n    value: function updateValue(value, flags, index) {\n      flags = flags || {};\n\n      var changed = _get(_getPrototypeOf(Input.prototype), \"updateValue\", this).call(this, value, flags);\n\n      this.triggerUpdateValueAt(this.dataValue, flags, index);\n      return changed;\n    }\n  }, {\n    key: \"parseValue\",\n    value: function parseValue(value) {\n      return value;\n    }\n  }, {\n    key: \"formatValue\",\n    value: function formatValue(value) {\n      return value;\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      this.loadRefs(element, {\n        charcount: 'multiple',\n        wordcount: 'multiple',\n        prefix: 'multiple',\n        suffix: 'multiple'\n      });\n      return _get(_getPrototypeOf(Input.prototype), \"attach\", this).call(this, element);\n    }\n  }, {\n    key: \"getWidget\",\n    value: function getWidget(index) {\n      index = index || 0;\n\n      if (this.refs.input && this.refs.input[index]) {\n        return this.refs.input[index].widget;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"attachElement\",\n    value: function attachElement(element, index) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(Input.prototype), \"attachElement\", this).call(this, element, index);\n\n      if (element.widget) {\n        element.widget.destroy();\n      } // Attach the widget.\n\n\n      var promise = _nativePromiseOnly.default.resolve();\n\n      element.widget = this.createWidget(index);\n\n      if (element.widget) {\n        promise = element.widget.attach(element);\n\n        if (this.refs.prefix && this.refs.prefix[index]) {\n          element.widget.addPrefix(this.refs.prefix[index]);\n        }\n\n        if (this.refs.suffix && this.refs.suffix[index]) {\n          element.widget.addSuffix(this.refs.suffix[index]);\n        }\n      } // Add focus and blur events.\n\n\n      this.addFocusBlurEvents(element);\n\n      if (this.options.submitOnEnter) {\n        this.addEventListener(element, 'keypress', function (event) {\n          var key = event.keyCode || event.which;\n\n          if (key === 13) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            _this2.emit('submitButton');\n          }\n        });\n      }\n\n      return promise;\n    }\n    /**\n     * Creates an instance of a widget for this component.\n     *\n     * @return {null}\n     */\n\n  }, {\n    key: \"createWidget\",\n    value: function createWidget(index) {\n      var _this$root,\n          _this3 = this;\n\n      // Return null if no widget is found.\n      if (!this.component.widget) {\n        return null;\n      } // Get the widget settings.\n\n\n      var settings = typeof this.component.widget === 'string' ? {\n        type: this.component.widget\n      } : this.component.widget;\n\n      if ((_this$root = this.root) !== null && _this$root !== void 0 && _this$root.shadowRoot) {\n        var _this$root2;\n\n        settings.shadowRoot = (_this$root2 = this.root) === null || _this$root2 === void 0 ? void 0 : _this$root2.shadowRoot;\n      } // Make sure we have a widget.\n\n\n      if (!_widgets.default.hasOwnProperty(settings.type)) {\n        return null;\n      } // Create the widget.\n\n\n      var widget = new _widgets.default[settings.type](settings, this.component, this, index);\n      widget.on('update', function () {\n        return _this3.updateValue(_this3.getValue(), {\n          modified: true\n        }, index);\n      }, true);\n      widget.on('redraw', function () {\n        return _this3.redraw();\n      }, true);\n      return widget;\n    }\n  }, {\n    key: \"detach\",\n    value: function detach() {\n      _get(_getPrototypeOf(Input.prototype), \"detach\", this).call(this);\n\n      if (this.refs && this.refs.input) {\n        for (var i = 0; i <= this.refs.input.length; i++) {\n          var widget = this.getWidget(i);\n\n          if (widget) {\n            widget.destroy();\n          }\n        }\n      }\n\n      this.refs.input = [];\n    }\n  }, {\n    key: \"addFocusBlurEvents\",\n    value: function addFocusBlurEvents(element) {\n      var _this4 = this;\n\n      this.addEventListener(element, 'focus', function () {\n        if (_this4.root.focusedComponent !== _this4) {\n          if (_this4.root.pendingBlur) {\n            _this4.root.pendingBlur();\n          }\n\n          _this4.root.focusedComponent = _this4;\n\n          _this4.emit('focus', _this4);\n        } else if (_this4.root.focusedComponent === _this4 && _this4.root.pendingBlur) {\n          _this4.root.pendingBlur.cancel();\n\n          _this4.root.pendingBlur = null;\n        }\n      });\n      this.addEventListener(element, 'blur', function () {\n        _this4.root.pendingBlur = (0, _utils.delay)(function () {\n          _this4.emit('blur', _this4);\n\n          if (_this4.component.validateOn === 'blur') {\n            _this4.root.triggerChange({\n              fromBlur: true\n            }, {\n              instance: _this4,\n              component: _this4.component,\n              value: _this4.dataValue,\n              flags: {\n                fromBlur: true\n              }\n            });\n          }\n\n          _this4.root.focusedComponent = null;\n          _this4.root.pendingBlur = null;\n        });\n      });\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len = arguments.length, extend = new Array(_len), _key = 0; _key < _len; _key++) {\n        extend[_key] = arguments[_key];\n      }\n\n      return _Multivalue2.default.schema.apply(_Multivalue2.default, [{\n        widget: {\n          type: 'input'\n        }\n      }].concat(extend));\n    }\n  }]);\n\n  return Input;\n}(_Multivalue2.default);\n\nexports.default = Input;"]},"metadata":{},"sourceType":"script"}