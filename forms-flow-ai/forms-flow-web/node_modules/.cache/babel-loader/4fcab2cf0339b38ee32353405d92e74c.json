{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";\nimport _slicedToArray from \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\src\\\\components\\\\ServiceFlow\\\\details\\\\TaskHeader.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Row, Col } from \"react-bootstrap\";\nimport { getISODateTime, getProcessDataFromList, getFormattedDateAndTime } from \"../../../apiManager/services/formatterService\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport DatePicker from \"react-datepicker\";\nimport moment from \"moment\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"./../ServiceFlow.scss\";\nimport AddGroupModal from \"./AddGroupModal\";\nimport { claimBPMTask, fetchServiceTaskList, getBPMTaskDetail, unClaimBPMTask, updateAssigneeBPMTask, updateBPMTask } from \"../../../apiManager/services/bpmTaskServices\";\nimport { setBPMTaskDetailUpdating } from \"../../../actions/bpmTaskActions\"; //import UserSelection from \"./UserSelection\";\n\nimport UserSelectionDebounce from \"./UserSelectionDebounce\";\nimport SocketIOService from \"../../../services/SocketIOService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar TaskHeader = /*#__PURE__*/React.memo(_c = _s(function () {\n  _s();\n\n  var task = useSelector(function (state) {\n    return state.bpmTasks.taskDetail;\n  });\n  var taskId = useSelector(function (state) {\n    return state.bpmTasks.taskId;\n  });\n  var processList = useSelector(function (state) {\n    return state.bpmTasks.processList;\n  });\n  var username = useSelector(function (state) {\n    var _state$user, _state$user$userDetai;\n\n    return ((_state$user = state.user) === null || _state$user === void 0 ? void 0 : (_state$user$userDetai = _state$user.userDetail) === null || _state$user$userDetai === void 0 ? void 0 : _state$user$userDetai.preferred_username) || '';\n  });\n  var taskGroups = useSelector(function (state) {\n    return state.bpmTasks.taskGroups;\n  });\n  var selectedFilter = useSelector(function (state) {\n    return state.bpmTasks.selectedFilter;\n  });\n  var reqData = useSelector(function (state) {\n    return state.bpmTasks.listReqParams;\n  });\n  var firstResult = useSelector(function (state) {\n    return state.bpmTasks.firstResult;\n  });\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      followUpDate = _useState2[0],\n      setFollowUpDate = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      dueDate = _useState4[0],\n      setDueDate = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      showModal = _useState6[0],\n      setModal = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isEditAssignee = _useState8[0],\n      setIsEditAssignee = _useState8[1];\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    var followUp = task !== null && task !== void 0 && task.followUp ? new Date(task === null || task === void 0 ? void 0 : task.followUp) : null;\n    setFollowUpDate(followUp);\n  }, [task === null || task === void 0 ? void 0 : task.followUp]);\n  useEffect(function () {\n    var due = task !== null && task !== void 0 && task.due ? new Date(task === null || task === void 0 ? void 0 : task.due) : null;\n    setDueDate(due);\n  }, [task === null || task === void 0 ? void 0 : task.due]);\n\n  var onClaim = function onClaim() {\n    dispatch(setBPMTaskDetailUpdating(true));\n    dispatch(claimBPMTask(taskId, username, function (err, response) {\n      if (!err) {\n        if (!SocketIOService.isConnected()) {\n          if (selectedFilter) {\n            dispatch(getBPMTaskDetail(taskId));\n            dispatch(fetchServiceTaskList(selectedFilter.id, firstResult, reqData));\n          } else {\n            dispatch(setBPMTaskDetailUpdating(false));\n          }\n        }\n      } else {\n        dispatch(setBPMTaskDetailUpdating(false));\n      }\n    }));\n  };\n\n  var onChangeClaim = function onChangeClaim(userId) {\n    setIsEditAssignee(false);\n\n    if (userId && userId !== task.assignee) {\n      dispatch(setBPMTaskDetailUpdating(true));\n      dispatch(updateAssigneeBPMTask(taskId, userId, function (err, response) {\n        if (!err) {\n          if (!SocketIOService.isConnected()) {\n            if (selectedFilter) {\n              dispatch(getBPMTaskDetail(taskId));\n              dispatch(fetchServiceTaskList(selectedFilter.id, firstResult, reqData));\n            }\n          }\n        } else {\n          dispatch(setBPMTaskDetailUpdating(false));\n        }\n      }));\n    }\n  };\n\n  var onUnClaimTask = function onUnClaimTask() {\n    dispatch(setBPMTaskDetailUpdating(true));\n    dispatch(unClaimBPMTask(taskId, function (err, response) {\n      if (!err) {\n        if (!SocketIOService.isConnected()) {\n          if (selectedFilter) {\n            dispatch(getBPMTaskDetail(taskId));\n            dispatch(fetchServiceTaskList(selectedFilter.id, firstResult, reqData));\n          }\n        }\n      } else {\n        dispatch(setBPMTaskDetailUpdating(false));\n      }\n    }));\n  };\n\n  var onFollowUpDateUpdate = function onFollowUpDateUpdate(followUpDate) {\n    setFollowUpDate(followUpDate);\n    dispatch(setBPMTaskDetailUpdating(true));\n\n    var updatedTask = _objectSpread(_objectSpread({}, task), {\n      followUp: followUpDate ? getISODateTime(followUpDate) : null\n    });\n\n    dispatch(updateBPMTask(taskId, updatedTask, function (err, response) {\n      if (!err) {\n        if (!SocketIOService.isConnected()) {\n          dispatch(getBPMTaskDetail(taskId));\n          dispatch(fetchServiceTaskList(selectedFilter.id, firstResult, reqData));\n        }\n      } else {\n        dispatch(setBPMTaskDetailUpdating(false));\n      }\n    }));\n  };\n\n  var onDueDateUpdate = function onDueDateUpdate(dueDate) {\n    setDueDate(dueDate);\n    dispatch(setBPMTaskDetailUpdating(true));\n\n    var updatedTask = _objectSpread(_objectSpread({}, task), {\n      due: dueDate ? getISODateTime(dueDate) : null\n    });\n\n    dispatch(updateBPMTask(taskId, updatedTask, function (err, response) {\n      if (!err) {\n        if (!SocketIOService.isConnected()) {\n          dispatch(getBPMTaskDetail(taskId));\n          dispatch(fetchServiceTaskList(selectedFilter.id, firstResult, reqData));\n        }\n      } else {\n        dispatch(setBPMTaskDetailUpdating(false));\n      }\n    }));\n  };\n\n  var FollowUpDateInput = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n    var value = _ref.value,\n        onClick = _ref.onClick;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: onClick,\n      ref: ref,\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fa fa-calendar mr-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 7\n      }, _this), \" \", followUpDate ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mr-4\",\n        children: moment(followUpDate).fromNow()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, _this) : \"Set follow-up Date\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 14\n    }, _this);\n  });\n  var DueDateInput = /*#__PURE__*/React.forwardRef(function (_ref2, ref) {\n    var value = _ref2.value,\n        onClick = _ref2.onClick;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: onClick,\n      ref: ref,\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fa fa-bell mr-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 6\n      }, _this), \" \", dueDate ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mr-4\",\n        children: moment(dueDate).fromNow()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 18\n      }, _this) : \"Set Due date\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }, _this);\n  });\n\n  var getGroups = function getGroups(groups) {\n    return groups === null || groups === void 0 ? void 0 : groups.map(function (group) {\n      return group.groupId;\n    }).join(\", \");\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AddGroupModal, {\n      modalOpen: showModal,\n      onClose: function onClose() {\n        return setModal(false);\n      },\n      groups: taskGroups\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 5\n    }, _this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"ml-0 task-header\",\n      children: task === null || task === void 0 ? void 0 : task.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"ml-0 task-name\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"application-id\",\n        \"dat-title\": \"Process Name\",\n        children: [\" \", getProcessDataFromList(processList, task === null || task === void 0 ? void 0 : task.processDefinitionId, \"name\")]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"ml-0\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        \"data-title\": \"Application Id\",\n        className: \"application-id\",\n        children: [\" Application ID# \", task === null || task === void 0 ? void 0 : task.applicationId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"actionable mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        sm: followUpDate ? 2 : \"auto\",\n        \"data-title\": followUpDate ? getFormattedDateAndTime(followUpDate) : 'Set FollowUp Date',\n        className: \"date-container\",\n        children: /*#__PURE__*/_jsxDEV(DatePicker, {\n          selected: followUpDate,\n          onChange: onFollowUpDateUpdate,\n          showTimeSelect: true,\n          isClearable: true,\n          popperPlacement: \"bottom-start\",\n          popperModifiers: {\n            offset: {\n              enabled: true,\n              offset: \"5px, 10px\"\n            },\n            preventOverflow: {\n              enabled: true,\n              escapeWithReference: false,\n              boundariesElement: \"viewport\"\n            }\n          },\n          customInput: /*#__PURE__*/_jsxDEV(FollowUpDateInput, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 26\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Col, {\n        sm: dueDate ? 2 : \"auto\",\n        \"data-title\": dueDate ? getFormattedDateAndTime(dueDate) : 'Set Due Date',\n        className: \"date-container\",\n        children: /*#__PURE__*/_jsxDEV(DatePicker, {\n          selected: dueDate,\n          onChange: onDueDateUpdate,\n          showTimeSelect: true,\n          isClearable: true,\n          shouldCloseOnSelect: true,\n          popperPlacement: \"bottom-start\",\n          popperModifiers: {\n            offset: {\n              enabled: true,\n              offset: \"5px, 10px\"\n            },\n            preventOverflow: {\n              enabled: true,\n              escapeWithReference: false,\n              boundariesElement: \"viewport\"\n            }\n          },\n          customInput: /*#__PURE__*/_jsxDEV(DueDateInput, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 26\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"center-position\",\n        sm: 4,\n        onClick: function onClick() {\n          return setModal(true);\n        },\n        \"dat-title\": \"groups\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-group mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, _this), taskGroups.length === 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Add groups\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 38\n        }, _this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"group-align\",\n          children: getGroups(taskGroups)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 62\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Col, {\n        className: \"right-side\",\n        children: isEditAssignee ? task !== null && task !== void 0 && task.assignee ? /*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(UserSelectionDebounce, {\n            onClose: function onClose() {\n              return setIsEditAssignee(false);\n            },\n            currentUser: task.assignee,\n            onChangeClaim: onChangeClaim\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 44\n        }, _this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          \"data-testid\": \"clam-btn\",\n          onClick: onClaim,\n          children: \" Claim\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-user mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 11\n          }, _this), task !== null && task !== void 0 && task.assignee ? /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"change-tooltip\",\n              onClick: function onClick() {\n                return setIsEditAssignee(true);\n              },\n              \"dat-title\": \"Click to Change Assignee\",\n              children: task.assignee\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-times ml-1\",\n              onClick: onUnClaimTask,\n              \"dat-title\": \"Reset Assignee\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 30\n          }, _this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            \"data-testid\": \"clam-btn\",\n            onClick: onClaim,\n            children: \" Claim\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n}, \"FIuTaD7nJj6YOdnFro+zF4dgQOI=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useDispatch];\n}));\n_c2 = TaskHeader;\nexport default TaskHeader;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TaskHeader$React.memo\");\n$RefreshReg$(_c2, \"TaskHeader\");","map":{"version":3,"sources":["C:/Users/Devin/AOT_Projects/forms-flow-master/forms-flow-ai/forms-flow-web/src/components/ServiceFlow/details/TaskHeader.js"],"names":["React","useEffect","useState","Row","Col","getISODateTime","getProcessDataFromList","getFormattedDateAndTime","useDispatch","useSelector","DatePicker","moment","AddGroupModal","claimBPMTask","fetchServiceTaskList","getBPMTaskDetail","unClaimBPMTask","updateAssigneeBPMTask","updateBPMTask","setBPMTaskDetailUpdating","UserSelectionDebounce","SocketIOService","TaskHeader","memo","task","state","bpmTasks","taskDetail","taskId","processList","username","user","userDetail","preferred_username","taskGroups","selectedFilter","reqData","listReqParams","firstResult","followUpDate","setFollowUpDate","dueDate","setDueDate","showModal","setModal","isEditAssignee","setIsEditAssignee","dispatch","followUp","Date","due","onClaim","err","response","isConnected","id","onChangeClaim","userId","assignee","onUnClaimTask","onFollowUpDateUpdate","updatedTask","onDueDateUpdate","FollowUpDateInput","forwardRef","ref","value","onClick","fromNow","DueDateInput","getGroups","groups","map","group","groupId","join","name","processDefinitionId","applicationId","offset","enabled","preventOverflow","escapeWithReference","boundariesElement","length"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport { Row, Col } from \"react-bootstrap\";\r\nimport {\r\n  getISODateTime,\r\n  getProcessDataFromList,\r\n  getFormattedDateAndTime\r\n} from \"../../../apiManager/services/formatterService\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport moment from \"moment\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport \"./../ServiceFlow.scss\";\r\nimport AddGroupModal from \"./AddGroupModal\";\r\nimport {\r\n  claimBPMTask,\r\n  fetchServiceTaskList,\r\n  getBPMTaskDetail,\r\n  unClaimBPMTask, updateAssigneeBPMTask,\r\n  updateBPMTask\r\n} from \"../../../apiManager/services/bpmTaskServices\";\r\nimport {setBPMTaskDetailUpdating} from \"../../../actions/bpmTaskActions\";\r\n//import UserSelection from \"./UserSelection\";\r\nimport UserSelectionDebounce from \"./UserSelectionDebounce\";\r\nimport SocketIOService from \"../../../services/SocketIOService\";\r\n\r\nconst TaskHeader = React.memo(() => {\r\n  const task = useSelector(state => state.bpmTasks.taskDetail);\r\n  const taskId = useSelector((state) => state.bpmTasks.taskId);\r\n  const processList = useSelector((state) => state.bpmTasks.processList);\r\n  const username = useSelector((state) => state.user?.userDetail?.preferred_username || '');\r\n  const taskGroups = useSelector(state=>state.bpmTasks.taskGroups);\r\n  const selectedFilter=useSelector(state=>state.bpmTasks.selectedFilter);\r\n  const reqData = useSelector(state => state.bpmTasks.listReqParams);\r\n  const firstResult = useSelector(state=> state.bpmTasks.firstResult);\r\n  const [followUpDate, setFollowUpDate] = useState(null);\r\n  const [dueDate, setDueDate] = useState(null);\r\n  const [showModal, setModal] = useState(false);\r\n  const [isEditAssignee, setIsEditAssignee]=useState(false);\r\n  const dispatch= useDispatch();\r\n\r\n  useEffect(()=>{\r\n    const followUp= task?.followUp ? new Date(task?.followUp):null;\r\n    setFollowUpDate(followUp);\r\n  },[task?.followUp])\r\n\r\n  useEffect(()=>{\r\n    const due= task?.due ? new Date(task?.due): null;\r\n    setDueDate(due);\r\n  },[task?.due]);\r\n\r\n  const onClaim = () => {\r\n    dispatch(setBPMTaskDetailUpdating(true));\r\n    dispatch(claimBPMTask(taskId,username,(err,response)=>{\r\n      if(!err){\r\n        if(!SocketIOService.isConnected()){\r\n          if(selectedFilter){\r\n            dispatch(getBPMTaskDetail(taskId));\r\n            dispatch(fetchServiceTaskList(selectedFilter.id, firstResult, reqData));\r\n          }else{\r\n            dispatch(setBPMTaskDetailUpdating(false));\r\n          }\r\n        }\r\n      }else{\r\n        dispatch(setBPMTaskDetailUpdating(false));\r\n      }\r\n    }));\r\n  }\r\n  const onChangeClaim = (userId) => {\r\n    setIsEditAssignee(false);\r\n   if(userId && userId!==task.assignee){\r\n     dispatch(setBPMTaskDetailUpdating(true));\r\n     dispatch(updateAssigneeBPMTask(taskId,userId,(err,response)=>{\r\n       if(!err){\r\n         if(!SocketIOService.isConnected()){\r\n         if(selectedFilter){\r\n           dispatch(getBPMTaskDetail(taskId));\r\n           dispatch(fetchServiceTaskList(selectedFilter.id, firstResult, reqData));\r\n         }\r\n         }\r\n       }else{\r\n         dispatch(setBPMTaskDetailUpdating(false));\r\n       }\r\n     }));\r\n   }\r\n  }\r\n\r\n  const onUnClaimTask = () =>{\r\n    dispatch(setBPMTaskDetailUpdating(true));\r\n    dispatch(unClaimBPMTask(taskId,(err,response)=>{\r\n      if(!err){\r\n        if(!SocketIOService.isConnected()){\r\n        if(selectedFilter){\r\n          dispatch(getBPMTaskDetail(taskId));\r\n          dispatch(fetchServiceTaskList(selectedFilter.id, firstResult, reqData));\r\n        }\r\n        }\r\n      }else{\r\n        dispatch(setBPMTaskDetailUpdating(false));\r\n      }\r\n    }));\r\n  }\r\n\r\n  const onFollowUpDateUpdate = (followUpDate)=>{\r\n    setFollowUpDate(followUpDate);\r\n    dispatch(setBPMTaskDetailUpdating(true));\r\n    const updatedTask = {...task, ...{followUp:followUpDate?getISODateTime(followUpDate):null}};\r\n    dispatch(updateBPMTask(taskId,updatedTask,(err,response)=>{\r\n      if(!err){\r\n        if(!SocketIOService.isConnected()) {\r\n          dispatch(getBPMTaskDetail(taskId));\r\n          dispatch(fetchServiceTaskList(selectedFilter.id, firstResult, reqData));\r\n        }\r\n      }else{\r\n        dispatch(setBPMTaskDetailUpdating(false));\r\n      }\r\n    }))\r\n  };\r\n\r\n  const onDueDateUpdate = (dueDate)=>{\r\n    setDueDate(dueDate);\r\n    dispatch(setBPMTaskDetailUpdating(true));\r\n    const updatedTask = {...task, ...{due:dueDate?getISODateTime(dueDate):null}};\r\n    dispatch(updateBPMTask(taskId,updatedTask,(err,response)=>{\r\n      if(!err){\r\n        if(!SocketIOService.isConnected()) {\r\n          dispatch(getBPMTaskDetail(taskId));\r\n          dispatch(fetchServiceTaskList(selectedFilter.id, firstResult, reqData));\r\n        }\r\n      }else{\r\n        dispatch(setBPMTaskDetailUpdating(false));\r\n      }\r\n    }))\r\n  };\r\n\r\n  const FollowUpDateInput= React.forwardRef(({ value, onClick }, ref) =>{\r\n   return    <div onClick={onClick} ref={ref}>\r\n      <i className=\"fa fa-calendar mr-1\"/>{\" \"}\r\n      {followUpDate\r\n        ? <span className=\"mr-4\">{moment(followUpDate).fromNow()}</span>\r\n        : \"Set follow-up Date\"}\r\n    </div>\r\n  });\r\n\r\n\r\n\r\n  const DueDateInput=React.forwardRef(({ value, onClick }, ref) =>{\r\n    return    <div onClick={onClick} ref={ref}>\r\n     <i className=\"fa fa-bell mr-1\"/>{\" \"}\r\n      {dueDate ? <span className=\"mr-4\">{moment(dueDate).fromNow()}</span> : \"Set Due date\"}\r\n    </div>\r\n  });\r\n\r\n  const getGroups = (groups)=>{\r\n    return groups?.map(group=>group.groupId).join(\", \");\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <AddGroupModal modalOpen={showModal} onClose={()=>setModal(false)} groups={taskGroups}/>\r\n      <Row className=\"ml-0 task-header\">{task?.name}</Row>\r\n      <Row className=\"ml-0 task-name\" >\r\n      <span className=\"application-id\" dat-title={\"Process Name\"}> {getProcessDataFromList(processList, task?.processDefinitionId, \"name\")}</span>\r\n      </Row>\r\n      <Row className=\"ml-0\" >\r\n      <span data-title=\"Application Id\" className=\"application-id\"> Application ID# {task?.applicationId}</span>\r\n      </Row>\r\n      <Row className=\"actionable mb-4\">\r\n        <Col sm={followUpDate?2:\"auto\"} data-title={followUpDate?getFormattedDateAndTime(followUpDate):'Set FollowUp Date'} className='date-container'>\r\n          <DatePicker\r\n            selected={followUpDate}\r\n            onChange={onFollowUpDateUpdate}\r\n            showTimeSelect\r\n            isClearable\r\n            popperPlacement=\"bottom-start\"\r\n            popperModifiers={{\r\n              offset: {\r\n                enabled: true,\r\n                offset: \"5px, 10px\"\r\n              },\r\n              preventOverflow: {\r\n                enabled: true,\r\n                escapeWithReference: false,\r\n                boundariesElement: \"viewport\"\r\n              }\r\n            }}\r\n            customInput={<FollowUpDateInput/>}\r\n          />\r\n        </Col>\r\n        <Col sm={dueDate?2:\"auto\"} data-title={dueDate?getFormattedDateAndTime(dueDate):'Set Due Date'} className='date-container'>\r\n          <DatePicker\r\n            selected={dueDate}\r\n            onChange={onDueDateUpdate}\r\n            showTimeSelect\r\n            isClearable\r\n            shouldCloseOnSelect\r\n            popperPlacement=\"bottom-start\"\r\n            popperModifiers={{\r\n              offset: {\r\n                enabled: true,\r\n                offset: \"5px, 10px\"\r\n              },\r\n              preventOverflow: {\r\n                enabled: true,\r\n                escapeWithReference: false,\r\n                boundariesElement: \"viewport\"\r\n              }\r\n            }}\r\n            customInput={<DueDateInput/>}\r\n          />\r\n        </Col>\r\n        <Col className=\"center-position\" sm={4} onClick={()=>setModal(true)} dat-title={\"groups\"}>\r\n          <i className=\"fa fa-group mr-1\"/>\r\n          { taskGroups.length === 0? <span>Add groups</span>:<span className=\"group-align\">{getGroups(taskGroups)}</span>}\r\n        </Col>\r\n        <Col className=\"right-side\">\r\n          {isEditAssignee?(task?.assignee? <span>\r\n              <UserSelectionDebounce onClose={()=>setIsEditAssignee(false)}\r\n                             currentUser={task.assignee}\r\n                             onChangeClaim={onChangeClaim}/></span>:\r\n            <span data-testid=\"clam-btn\" onClick={onClaim}> Claim</span>):\r\n            (<>\r\n          <i className=\"fa fa-user mr-1\" />\r\n          {task?.assignee ? (<span>\r\n              <span className=\"change-tooltip\" onClick={()=>setIsEditAssignee(true)} dat-title=\"Click to Change Assignee\">{task.assignee}</span>\r\n              <i className=\"fa fa-times ml-1\" onClick={onUnClaimTask} dat-title=\"Reset Assignee\"/></span>) :\r\n              <span data-testid=\"clam-btn\" onClick={onClaim}> Claim</span>\r\n            }\r\n            </>)\r\n          }\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default TaskHeader;\r\n"]},"metadata":{},"sourceType":"module"}