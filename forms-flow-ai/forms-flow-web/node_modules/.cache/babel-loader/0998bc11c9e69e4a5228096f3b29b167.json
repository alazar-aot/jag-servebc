{"ast":null,"code":"import _objectSpread from \"C:/Users/Devin/AOT_Projects/jag-servebc/forms-flow-ai/forms-flow-web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"C:/Users/Devin/AOT_Projects/jag-servebc/forms-flow-ai/forms-flow-web/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nvar _excluded = [\"component\"],\n    _excluded2 = [\"component\"];\n\nvar _jsxFileName = \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\jag-servebc\\\\forms-flow-ai\\\\forms-flow-web\\\\src\\\\components\\\\PrivateRoute.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, Suspense, lazy } from \"react\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport UserService from \"../services/UserService\";\nimport { setUserAuth } from \"../actions/bpmActions\";\nimport { CLIENT, STAFF_REVIEWER } from \"../constants/constants\";\nimport Loading from \"../containers/Loading\";\nimport NotFound from \"./NotFound\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar Form = /*#__PURE__*/lazy(_c = function _c() {\n  return import('./Form');\n});\n_c2 = Form;\nvar ServiceFlow = /*#__PURE__*/lazy(_c3 = function _c3() {\n  return import('./ServiceFlow');\n});\n_c4 = ServiceFlow;\nvar TaskView = /*#__PURE__*/lazy(_c5 = function _c5() {\n  return import('./TaskView');\n});\n_c6 = TaskView;\nvar DashboardPage = /*#__PURE__*/lazy(_c7 = function _c7() {\n  return import(\"./Dashboard\");\n});\n_c8 = DashboardPage;\nvar InsightsPage = /*#__PURE__*/lazy(_c9 = function _c9() {\n  return import(\"./Insights\");\n});\n_c10 = InsightsPage;\nvar Application = /*#__PURE__*/lazy(_c11 = function _c11() {\n  return import(\"./Application\");\n});\n_c12 = Application;\nvar Admin = /*#__PURE__*/lazy(_c13 = function _c13() {\n  return import(\"./Admin\");\n});\n_c14 = Admin;\nvar PrivateRoute = /*#__PURE__*/React.memo(_c15 = _s(function (props) {\n  _s();\n\n  var dispatch = useDispatch();\n  var isAuth = useSelector(function (state) {\n    return state.user.isAuthenticated;\n  });\n  var userRoles = useSelector(function (state) {\n    return state.user.roles || [];\n  });\n  useEffect(function () {\n    if (props.store) {\n      UserService.initKeycloak(props.store, function (err, res) {\n        dispatch(setUserAuth(res.authenticated));\n      });\n    }\n  }, [props.store, dispatch]);\n\n  var ReviewerRoute = function ReviewerRoute(_ref) {\n    var Component = _ref.component,\n        rest = _objectWithoutProperties(_ref, _excluded);\n\n    return /*#__PURE__*/_jsxDEV(Route, _objectSpread(_objectSpread({}, rest), {}, {\n      render: function render(props) {\n        return userRoles.includes(STAFF_REVIEWER) ? /*#__PURE__*/_jsxDEV(Component, _objectSpread({}, props), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, _this) : /*#__PURE__*/_jsxDEV(Redirect, {\n          exact: true,\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, _this);\n      }\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 5\n    }, _this);\n  };\n\n  var ClientReviewerRoute = function ClientReviewerRoute(_ref2) {\n    var Component = _ref2.component,\n        rest = _objectWithoutProperties(_ref2, _excluded2);\n\n    return /*#__PURE__*/_jsxDEV(Route, _objectSpread(_objectSpread({}, rest), {}, {\n      render: function render(props) {\n        return userRoles.includes(STAFF_REVIEWER) || userRoles.includes(CLIENT) ? /*#__PURE__*/_jsxDEV(Component, _objectSpread({}, props), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, _this) : /*#__PURE__*/_jsxDEV(Redirect, {\n          exact: true,\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, _this);\n      }\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }, _this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isAuth ? /*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 29\n      }, _this),\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/form\",\n          component: Form\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/admin\",\n          component: Admin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/formflow\",\n          component: Form\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(ClientReviewerRoute, {\n          path: \"/application\",\n          component: Application\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(ReviewerRoute, {\n          path: \"/metrics\",\n          component: DashboardPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(ReviewerRoute, {\n          path: \"/task\",\n          component: ServiceFlow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(ReviewerRoute, {\n          path: \"/task_new\",\n          component: ServiceFlow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(ReviewerRoute, {\n          path: \"/insights\",\n          component: InsightsPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          children: /*#__PURE__*/_jsxDEV(Redirect, {\n            to: userRoles.includes(STAFF_REVIEWER) ? '/task' : '/form'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/404\",\n          exact: true,\n          component: NotFound\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, _this), /*#__PURE__*/_jsxDEV(Redirect, {\n          from: \"*\",\n          to: \"/404\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, _this) : /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, _this)\n  }, void 0, false);\n}, \"jBrGaHWO3BvNRLZz5oHrrvHOcvk=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n}));\n_c16 = PrivateRoute;\nexport default PrivateRoute;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15, _c16;\n\n$RefreshReg$(_c, \"Form$lazy\");\n$RefreshReg$(_c2, \"Form\");\n$RefreshReg$(_c3, \"ServiceFlow$lazy\");\n$RefreshReg$(_c4, \"ServiceFlow\");\n$RefreshReg$(_c5, \"TaskView$lazy\");\n$RefreshReg$(_c6, \"TaskView\");\n$RefreshReg$(_c7, \"DashboardPage$lazy\");\n$RefreshReg$(_c8, \"DashboardPage\");\n$RefreshReg$(_c9, \"InsightsPage$lazy\");\n$RefreshReg$(_c10, \"InsightsPage\");\n$RefreshReg$(_c11, \"Application$lazy\");\n$RefreshReg$(_c12, \"Application\");\n$RefreshReg$(_c13, \"Admin$lazy\");\n$RefreshReg$(_c14, \"Admin\");\n$RefreshReg$(_c15, \"PrivateRoute$React.memo\");\n$RefreshReg$(_c16, \"PrivateRoute\");","map":{"version":3,"names":["React","useEffect","Suspense","lazy","Route","Switch","Redirect","useDispatch","useSelector","UserService","setUserAuth","CLIENT","STAFF_REVIEWER","Loading","NotFound","Form","ServiceFlow","TaskView","DashboardPage","InsightsPage","Application","Admin","PrivateRoute","memo","props","dispatch","isAuth","state","user","isAuthenticated","userRoles","roles","store","initKeycloak","err","res","authenticated","ReviewerRoute","Component","component","rest","includes","ClientReviewerRoute"],"sources":["C:/Users/Devin/AOT_Projects/jag-servebc/forms-flow-ai/forms-flow-web/src/components/PrivateRoute.jsx"],"sourcesContent":["import React, {useEffect, Suspense, lazy} from \"react\";\r\nimport {Route, Switch, Redirect} from \"react-router-dom\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\n\r\nimport UserService from \"../services/UserService\";\r\nimport {setUserAuth} from \"../actions/bpmActions\";\r\nimport {CLIENT, STAFF_REVIEWER} from \"../constants/constants\";\r\n\r\nimport Loading from \"../containers/Loading\";\r\nimport NotFound from \"./NotFound\";\r\n\r\nconst Form = lazy(() => import('./Form'));\r\nconst ServiceFlow = lazy(() => import('./ServiceFlow'));\r\nconst TaskView = lazy(() => import('./TaskView'));\r\nconst DashboardPage = lazy(() => import(\"./Dashboard\"));\r\nconst InsightsPage = lazy(() => import(\"./Insights\"));\r\nconst Application = lazy(() => import(\"./Application\"));\r\nconst Admin = lazy(() => import(\"./Admin\"))\r\nconst PrivateRoute = React.memo((props) => {\r\n  const dispatch = useDispatch();\r\n  const isAuth = useSelector((state) => state.user.isAuthenticated);\r\n  const userRoles = useSelector((state) => state.user.roles || []);\r\n\r\n  useEffect(() => {\r\n    if (props.store) {\r\n      UserService.initKeycloak(props.store, (err, res) => {\r\n        dispatch(setUserAuth(res.authenticated));\r\n      });\r\n    }\r\n  }, [props.store, dispatch]);\r\n\r\n  const ReviewerRoute = ({component: Component, ...rest}) => (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        userRoles.includes(STAFF_REVIEWER) ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect exact to=\"/\"/>\r\n        )\r\n      }\r\n    />\r\n  );\r\n\r\n  const ClientReviewerRoute = ({component: Component, ...rest}) => (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        userRoles.includes(STAFF_REVIEWER) || userRoles.includes(CLIENT) ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect exact to=\"/\"/>\r\n        )\r\n      }\r\n    />\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {isAuth ? (\r\n        <Suspense fallback={<Loading/>}>\r\n          <Switch>\r\n            <Route path=\"/form\" component={Form}/>\r\n            <Route path=\"/admin\" component={Admin}/>\r\n            <Route path=\"/formflow\" component={Form}/>\r\n            <ClientReviewerRoute path=\"/application\" component={Application}/>\r\n            <ReviewerRoute path=\"/metrics\" component={DashboardPage}/>\r\n            <ReviewerRoute path=\"/task\" component={ServiceFlow}/>\r\n            <ReviewerRoute path=\"/task_new\" component={ServiceFlow}/>\r\n            <ReviewerRoute path=\"/insights\" component={InsightsPage}/>\r\n            <Route exact path=\"/\">\r\n              <Redirect to={userRoles.includes(STAFF_REVIEWER) ? '/task' : '/form'}/>\r\n            </Route>\r\n            <Route path='/404' exact={true} component={NotFound}/>\r\n            <Redirect from='*' to='/404'/>\r\n          </Switch>\r\n        </Suspense>\r\n      ) : (\r\n        <Loading/>\r\n      )}\r\n    </>\r\n  );\r\n})\r\n\r\nexport default PrivateRoute;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}