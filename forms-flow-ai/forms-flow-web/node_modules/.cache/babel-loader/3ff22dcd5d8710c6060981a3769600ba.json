{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.array.sort.js\");\n\nrequire(\"core-js/modules/es.math.log2.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.replace.js\");\n\nrequire(\"core-js/modules/es.regexp.constructor.js\");\n\nrequire(\"core-js/modules/es.regexp.to-string.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _FormioAddon2 = _interopRequireDefault(require(\"../FormioAddon\"));\n\nvar _PasswordStrengthAddon = _interopRequireDefault(require(\"./PasswordStrengthAddon.form\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar PasswordStrengthAddon = /*#__PURE__*/function (_FormioAddon) {\n  _inherits(PasswordStrengthAddon, _FormioAddon);\n\n  var _super = _createSuper(PasswordStrengthAddon);\n\n  function PasswordStrengthAddon(settings, componentInstance) {\n    var _this;\n\n    _classCallCheck(this, PasswordStrengthAddon);\n\n    _this = _super.call(this, settings, componentInstance);\n    _this._entropy = 0; // Set initial value of entropy\n\n    _this.levels = _toConsumableArray(_this.settings.levels || _this.defaultSettings.levels);\n\n    _this.levels.sort(function (a, b) {\n      return a.maxEntropy - b.maxEntropy;\n    }); // Sort levels from the lowest one to the highest\n\n\n    _this.level = _this.levels[0]; // Set currnt level to the lowest one\n\n    _this.maxEntropy = _this.levels[_this.levels.length - 1].maxEntropy; // Set maximal amount of security points based on the highest level\n\n    return _this;\n  }\n\n  _createClass(PasswordStrengthAddon, [{\n    key: \"defaultSettings\",\n    get: function get() {\n      return PasswordStrengthAddon.info.defaultSettings;\n    }\n  }, {\n    key: \"rules\",\n    get: function get() {\n      var _this2 = this;\n\n      return {\n        length: {\n          check: function check(value, options) {\n            var minLength = options.minLength || _this2.component.component.validate.minLength || 6;\n\n            if (value.length < minLength) {\n              return \"Value must be longer than \".concat(minLength, \" characters\");\n            }\n\n            return true;\n          }\n        },\n        upperCase: {\n          check: function check(value) {\n            if (/[A-Z]/g.test(value)) {\n              return true;\n            }\n\n            return 'Value must contain uppercased alphabetical characters';\n          },\n          increaseCharactersPoolSize: 26\n        },\n        numeric: {\n          check: function check(value) {\n            if (/[0-9]/g.test(value)) {\n              return true;\n            }\n\n            return 'Value must contain numeric characters';\n          },\n          increaseCharactersPoolSize: 10\n        },\n        lowerCase: {\n          check: function check(value) {\n            if (/[a-z]/g.test(value)) {\n              return true;\n            }\n\n            return 'Value must contain lowercased alphabetical characters';\n          },\n          increaseCharactersPoolSize: 26\n        },\n        symbols: {\n          check: function check(value) {\n            if (/[ `!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?~]/.test(value)) {\n              return true;\n            }\n\n            return 'Value must contain symbols';\n          },\n          increaseCharactersPoolSize: 32\n        }\n      };\n    }\n  }, {\n    key: \"charactersPoolLength\",\n    get: function get() {\n      return this._charactersPoolLength;\n    },\n    set: function set(value) {\n      this._charactersPoolLength = value;\n    }\n  }, {\n    key: \"level\",\n    get: function get() {\n      return this._level || this.getLevel();\n    },\n    set: function set(level) {\n      this._level = level;\n    }\n  }, {\n    key: \"entropy\",\n    get: function get() {\n      return this._entropy;\n    },\n    set: function set(value) {\n      var oldLevel = this.getLevel();\n      var updateOnEntropyChange = this.settings.updateOn === 'entropyChange' && this._entropy !== value;\n      this._entropy = value;\n      this.level = this.getLevel();\n      var updateOnLevelChange = this.settings.updateOn === 'levelChange' && oldLevel.name !== this.level.name;\n\n      if (updateOnLevelChange || updateOnEntropyChange) {\n        this.updateView();\n      }\n    }\n  }, {\n    key: \"dictionarySize\",\n    get: function get() {\n      return this.settings.dictionarySize || 171476;\n    }\n  }, {\n    key: \"template\",\n    get: function get() {\n      return this.settings.template;\n    }\n  }, {\n    key: \"tooltip\",\n    get: function get() {\n      var _this$level, _this$level2;\n\n      return ((_this$level = this.level) === null || _this$level === void 0 ? void 0 : _this$level.tooltip) || \"\".concat((_this$level2 = this.level) === null || _this$level2 === void 0 ? void 0 : _this$level2.name, \" strongness\");\n    }\n  }, {\n    key: \"rulesSettings\",\n    get: function get() {\n      return this.settings.rulesSettings || [];\n    }\n  }, {\n    key: \"customRules\",\n    get: function get() {\n      return this.settings.customRules || [];\n    }\n  }, {\n    key: \"log2\",\n    value: function log2(value) {\n      if (typeof Math.log2 === 'function') {\n        return Math.log2(value);\n      }\n\n      return Math.log(value) * Math.LOG2E;\n    }\n  }, {\n    key: \"calculatePasswordEntropy\",\n    value: function calculatePasswordEntropy(passwordLength, charactersPoolSize) {\n      return !passwordLength || !charactersPoolSize ? 0 : this.log2(Math.pow(charactersPoolSize, passwordLength));\n    }\n  }, {\n    key: \"calculatePasswordEntropyWords\",\n    value: function calculatePasswordEntropyWords(wordsCount) {\n      return !this.dictionarySize ? 0 : this.log2(this.dictionarySize) * wordsCount;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var view = this.component.interpolate(this.template, {\n        entropy: this.entropy,\n        maxEntropy: this.maxEntropy,\n        level: this.level,\n        levelName: this.level.name.replace(' ', '-').toLowerCase(),\n        levels: this.levels,\n        readOnly: this.component.options.readOnly,\n        pristine: this.component.pristine,\n        t: this.t.bind(this),\n        tooltip: this.tooltip\n      });\n      return this.component.sanitize(view);\n    }\n  }, {\n    key: \"checkBlackList\",\n    value: function checkBlackList(value) {\n      var blackList = _toConsumableArray(this.settings.blackList);\n\n      var customBlacklistedWords = this.settings.customBlacklistedWords;\n\n      if (customBlacklistedWords && typeof customBlacklistedWords === 'string') {\n        customBlacklistedWords = this.evaluate(customBlacklistedWords, this.component.evalContext({\n          value: value\n        }), 'values');\n\n        if (customBlacklistedWords && customBlacklistedWords.length) {\n          blackList.push.apply(blackList, _toConsumableArray(customBlacklistedWords));\n        }\n      }\n\n      var restValue = value;\n      var blacklistedWords = [];\n\n      for (var i = 0; i < blackList.length; i++) {\n        var word = blackList[i];\n        var regExp = new RegExp(\"\".concat(word), 'gi');\n\n        if (regExp.test(value)) {\n          blacklistedWords.push(word);\n          restValue = restValue.replace(regExp, '');\n        } // If less the 3 symboles left, just stop iterating\n\n\n        if (restValue.length < 3) {\n          break;\n        }\n      }\n\n      if (blacklistedWords.length) {\n        // If there are some random characters except of blacklisted words in the password,\n        // calculate the entropy for them\n        var _ref = restValue.length ? this.performChecks(restValue) : 0,\n            charactersPoolSize = _ref.charactersPoolSize;\n\n        var entropyOfNonblacklistedValue = this.calculatePasswordEntropy(restValue.length, charactersPoolSize); // Calculate the entropy if the biggest part of the password could be picked up from dictionary words\n\n        var dictionaryCheckEntropy = this.calculatePasswordEntropyWords(blacklistedWords.length);\n        var entropy = dictionaryCheckEntropy + entropyOfNonblacklistedValue;\n        return {\n          entropy: entropy,\n          blacklistedWords: blacklistedWords\n        };\n      }\n\n      return true;\n    }\n    /**\n     * Determines is a password is secure enough to submit\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"isValid\",\n    value: function isValid() {\n      var isValidCheck = this.settings.isValid;\n\n      if (isValidCheck && typeof isValidCheck === 'string') {\n        var valid = this.evaluate(isValidCheck, this.component.evalContext({\n          entropy: this.entropy,\n          level: this.level\n        }), 'valid');\n        return valid;\n      }\n\n      return this.entropy >= Math.round(this.maxEntropy / 2);\n    }\n    /**\n     * Handles the result of check and constructs a new error object or returns an amount of points to add to the current entropy\n     * @param {boolean|number} valid - Determines if the validation was failed or an amount of points if it was passed\n     * @param {*} validation - Validation configuration\n     * @param {string} value - Value which was validated\n     * @param {string} message - Message which should be shown if validation was not passed\n     */\n\n  }, {\n    key: \"handleRuleCheckResult\",\n    value: function handleRuleCheckResult(valid, validation, message, errors) {\n      if (valid !== true) {\n        errors.push({\n          validation: validation.name,\n          message: message,\n          level: validation.required ? 'error' : 'warning'\n        });\n      } else if (validation.increaseCharactersPoolSize) {\n        return validation.increaseCharactersPoolSize;\n      }\n\n      return 0;\n    }\n  }, {\n    key: \"performChecks\",\n    value: function performChecks(value) {\n      var _this3 = this;\n\n      var errors = [];\n      var charactersPoolSize = 0;\n      this.rulesSettings.forEach(function (settings) {\n        if (_this3.rules[settings.name]) {\n          var rule = _lodash.default.merge({}, _this3.rules[settings.name], settings);\n\n          var valid = rule.check(value, settings.options || {});\n          var message = settings.message || valid;\n          charactersPoolSize += _this3.handleRuleCheckResult(valid, rule, message, errors);\n        }\n      });\n      this.customRules.forEach(function (rule) {\n        if (rule.check && typeof rule.check === 'string') {\n          var valid = _this3.evaluate(rule.check, _this3.component.evalContext({\n            value: value\n          }), 'valid');\n\n          var message = typeof valid === 'string' ? valid : \"Password does not meet \".concat(rule.name, \" validation\");\n          charactersPoolSize += _this3.handleRuleCheckResult(valid, rule, message, errors);\n        }\n      });\n      return {\n        charactersPoolSize: charactersPoolSize,\n        errors: errors\n      };\n    }\n    /**\n     * Performs checks to validate password security\n     * @param {string} value - Suggested password\n     */\n\n  }, {\n    key: \"checkValidity\",\n    value: function checkValidity(value) {\n      var _this$settings$blackL;\n\n      var passwordLength = value.length;\n\n      var _this$performChecks = this.performChecks(value),\n          charactersPoolSize = _this$performChecks.charactersPoolSize,\n          errors = _this$performChecks.errors;\n\n      this.errors = errors;\n      var entropy = this.calculatePasswordEntropy(passwordLength, charactersPoolSize);\n      var blackListCheck = (_this$settings$blackL = this.settings.blackList) !== null && _this$settings$blackL !== void 0 && _this$settings$blackL.length || this.settings.customBlacklistedWords ? this.checkBlackList(value) : null; // If there were found some words from the black list\n\n      if (blackListCheck && blackListCheck !== true) {\n        this.handleBlackListCheckResult(blackListCheck); // Select the mininal entropy based on the dictionary check or symbolic check\n\n        this.entropy = Math.min(entropy, blackListCheck.entropy);\n      } else {\n        this.entropy = entropy;\n      }\n\n      var isValid = this.isValid();\n\n      if (!isValid) {\n        this.errors.push({\n          message: 'Password is not strong enough',\n          level: this.settings.required ? 'error' : 'warning'\n        });\n      }\n\n      return !this.errors.length;\n    }\n  }, {\n    key: \"handleBlackListCheckResult\",\n    value: function handleBlackListCheckResult(result) {\n      var blacklistedWords = result.blacklistedWords;\n      var isRequired = this.settings.disableBlacklistedWords;\n      var message = \"Password \".concat(isRequired ? 'must' : 'should', \" not include common words: \").concat(blacklistedWords.join(', '));\n      var validation = {\n        name: 'blacklist',\n        required: isRequired\n      };\n      this.handleRuleCheckResult(false, validation, message, this.errors);\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this4 = this;\n\n      _get(_getPrototypeOf(PasswordStrengthAddon.prototype), \"attach\", this).call(this, element);\n\n      var container = this.component.ce('div', {\n        ref: 'passwordStrengthIndicator'\n      });\n      var inserted = this.insertContainer(element, container);\n\n      if (!inserted) {\n        this.component.append(container);\n      }\n\n      this._element = container;\n      this.component.on('redraw', function () {\n        return _this4.updateView();\n      });\n      this.component.on('componentError', function () {\n        return _this4.updateView();\n      });\n      this.updateView();\n    }\n  }, {\n    key: \"insertContainer\",\n    value: function insertContainer(element, container) {\n      var _this$settings$locati, _this$settings$locati2;\n\n      if (!element || !container) {\n        return false;\n      }\n\n      var insert = (_this$settings$locati = this.settings.location) === null || _this$settings$locati === void 0 ? void 0 : _this$settings$locati.insert;\n      var selector = (_this$settings$locati2 = this.settings.location) === null || _this$settings$locati2 === void 0 ? void 0 : _this$settings$locati2.selector;\n      var reference;\n\n      if (selector) {\n        reference = element.querySelector(selector);\n      }\n\n      if (reference) {\n        var parent = reference.parentNode;\n\n        switch (insert) {\n          case 'after':\n            if (parent) {\n              parent.insertBefore(container, reference.nextSibling || null);\n              return true;\n            }\n\n            return false;\n\n          case 'before':\n            if (parent) {\n              parent.insertBefore(container, reference);\n              return true;\n            }\n\n            return false;\n\n          default:\n            console.warn(\"Unknown insert option: \".concat(insert));\n            return false;\n        }\n      } else {\n        console.warn(\"No elements found using selector: \".concat(selector));\n        return false;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(PasswordStrengthAddon.prototype), \"destroy\", this).call(this);\n    }\n    /**\n     * Finds the level which one the passed entropy suits\n     * @param {number} entropy - Points of password's security\n     */\n\n  }, {\n    key: \"getLevel\",\n    value: function getLevel() {\n      var entropy = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.entropy;\n      var lowestLevel = this.levels[0];\n      var prevMaxEntropy = lowestLevel.maxEntropy;\n\n      if (entropy <= lowestLevel.maxEntropy) {\n        return lowestLevel;\n      }\n\n      if (entropy >= this.maxEntropy) {\n        return this.levels[this.levels.length - 1];\n      } // Iterate through levels and find the one which the passed entropy belongs to\n\n\n      for (var i = 1; i < this.levels.length; i++) {\n        var level = this.levels[i];\n\n        if (entropy > prevMaxEntropy && entropy <= level.maxEntropy) {\n          return level;\n        }\n\n        prevMaxEntropy = level.maxEntropy;\n      }\n\n      return lowestLevel;\n    }\n    /**\n     * Update the current view of the password's security indicator\n     */\n\n  }, {\n    key: \"updateView\",\n    value: function updateView() {\n      if (!this.element) {\n        return;\n      }\n\n      var view = this.render();\n      this.element.innerHTML = view;\n    }\n  }], [{\n    key: \"info\",\n    get: function get() {\n      return {\n        supportedComponents: ['password'],\n        name: 'passwordStrength',\n        components: _PasswordStrengthAddon.default,\n        label: 'Password Strength',\n        defaultSettings: {\n          rulesSettings: [{\n            name: 'length',\n            required: false,\n            message: 'Value should be longer'\n          }, {\n            name: 'upperCase',\n            required: false,\n            message: 'Value should have uppercase letters'\n          }, {\n            name: 'numeric',\n            required: false,\n            message: 'Value should have numeric symbols'\n          }, {\n            name: 'lowerCase',\n            required: false,\n            message: 'Value should be have lowercase letters'\n          }, {\n            name: 'symbols',\n            required: false,\n            message: 'Value should have symbols'\n          }],\n          updateOn: 'levelChange',\n          required: true,\n          levels: [{\n            name: 'Low',\n            maxEntropy: 28,\n            style: 'danger'\n          }, {\n            name: 'Medium',\n            maxEntropy: 45,\n            style: 'warning'\n          }, {\n            name: 'High',\n            maxEntropy: 59,\n            style: 'info'\n          }, {\n            name: 'Very High',\n            maxEntropy: 85,\n            style: 'success'\n          }],\n          blackList: [],\n          template: \"\\n          <div class=\\\"formio-security-indicator\\\">\\n            {% if (!ctx.readOnly && !ctx.pristine) { %}\\n              <div\\n                title=\\\"{{ctx.t(ctx.tooltip)}}\\\"\\n                class=\\\"security-{{ctx.levelName}} {{ ctx.level.style ? 'bg-' + ctx.level.style : ''}}\\\"\\n                style=\\\"{{ctx.level.color ? 'background-color: ' + ctx.level.color + ';' : ''}}\\\"\\n              ></div>\\n            {% } %}\\n          </div>\\n        \",\n          location: {\n            insert: 'after',\n            selector: '[ref=\"element\"]'\n          }\n        }\n      };\n    }\n  }]);\n\n  return PasswordStrengthAddon;\n}(_FormioAddon2.default);\n\nexports.default = PasswordStrengthAddon;","map":{"version":3,"sources":["C:/Users/Devin/AOT_Projects/jag-servebc/forms-flow-ai/forms-flow-web/node_modules/formiojs/addons/PasswordStrength/PasswordStrengthAddon.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","require","Object","defineProperty","exports","value","default","_lodash","_interopRequireDefault","_FormioAddon2","_PasswordStrengthAddon","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","toString","call","slice","name","Array","from","test","iter","isArray","len","length","i","arr2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","getOwnPropertyDescriptor","object","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","arguments","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","PasswordStrengthAddon","_FormioAddon","_super","settings","componentInstance","_this","_entropy","levels","defaultSettings","sort","a","b","maxEntropy","level","info","_this2","check","options","minLength","component","validate","concat","upperCase","increaseCharactersPoolSize","numeric","lowerCase","symbols","_charactersPoolLength","set","_level","getLevel","oldLevel","updateOnEntropyChange","updateOn","updateOnLevelChange","updateView","dictionarySize","template","_this$level","_this$level2","tooltip","rulesSettings","customRules","log2","Math","log","LOG2E","calculatePasswordEntropy","passwordLength","charactersPoolSize","pow","calculatePasswordEntropyWords","wordsCount","render","view","interpolate","entropy","levelName","replace","toLowerCase","readOnly","pristine","t","bind","sanitize","checkBlackList","blackList","customBlacklistedWords","evaluate","evalContext","push","restValue","blacklistedWords","word","regExp","RegExp","_ref","performChecks","entropyOfNonblacklistedValue","dictionaryCheckEntropy","isValid","isValidCheck","valid","round","handleRuleCheckResult","validation","message","errors","required","_this3","forEach","rules","rule","merge","checkValidity","_this$settings$blackL","_this$performChecks","blackListCheck","handleBlackListCheckResult","min","isRequired","disableBlacklistedWords","join","attach","element","_this4","container","ce","ref","inserted","insertContainer","append","_element","on","_this$settings$locati","_this$settings$locati2","insert","location","selector","reference","querySelector","parent","parentNode","insertBefore","nextSibling","console","warn","destroy","undefined","lowestLevel","prevMaxEntropy","innerHTML","supportedComponents","components","label","style"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.array.sort.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.math.log2.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.replace.js\");\n\nrequire(\"core-js/modules/es.regexp.constructor.js\");\n\nrequire(\"core-js/modules/es.regexp.to-string.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.array.join.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _FormioAddon2 = _interopRequireDefault(require(\"../FormioAddon\"));\n\nvar _PasswordStrengthAddon = _interopRequireDefault(require(\"./PasswordStrengthAddon.form\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar PasswordStrengthAddon = /*#__PURE__*/function (_FormioAddon) {\n  _inherits(PasswordStrengthAddon, _FormioAddon);\n\n  var _super = _createSuper(PasswordStrengthAddon);\n\n  function PasswordStrengthAddon(settings, componentInstance) {\n    var _this;\n\n    _classCallCheck(this, PasswordStrengthAddon);\n\n    _this = _super.call(this, settings, componentInstance);\n    _this._entropy = 0; // Set initial value of entropy\n\n    _this.levels = _toConsumableArray(_this.settings.levels || _this.defaultSettings.levels);\n\n    _this.levels.sort(function (a, b) {\n      return a.maxEntropy - b.maxEntropy;\n    }); // Sort levels from the lowest one to the highest\n\n\n    _this.level = _this.levels[0]; // Set currnt level to the lowest one\n\n    _this.maxEntropy = _this.levels[_this.levels.length - 1].maxEntropy; // Set maximal amount of security points based on the highest level\n\n    return _this;\n  }\n\n  _createClass(PasswordStrengthAddon, [{\n    key: \"defaultSettings\",\n    get: function get() {\n      return PasswordStrengthAddon.info.defaultSettings;\n    }\n  }, {\n    key: \"rules\",\n    get: function get() {\n      var _this2 = this;\n\n      return {\n        length: {\n          check: function check(value, options) {\n            var minLength = options.minLength || _this2.component.component.validate.minLength || 6;\n\n            if (value.length < minLength) {\n              return \"Value must be longer than \".concat(minLength, \" characters\");\n            }\n\n            return true;\n          }\n        },\n        upperCase: {\n          check: function check(value) {\n            if (/[A-Z]/g.test(value)) {\n              return true;\n            }\n\n            return 'Value must contain uppercased alphabetical characters';\n          },\n          increaseCharactersPoolSize: 26\n        },\n        numeric: {\n          check: function check(value) {\n            if (/[0-9]/g.test(value)) {\n              return true;\n            }\n\n            return 'Value must contain numeric characters';\n          },\n          increaseCharactersPoolSize: 10\n        },\n        lowerCase: {\n          check: function check(value) {\n            if (/[a-z]/g.test(value)) {\n              return true;\n            }\n\n            return 'Value must contain lowercased alphabetical characters';\n          },\n          increaseCharactersPoolSize: 26\n        },\n        symbols: {\n          check: function check(value) {\n            if (/[ `!@#$%^&*()_+\\-=[\\]{};':\"\\\\|,.<>/?~]/.test(value)) {\n              return true;\n            }\n\n            return 'Value must contain symbols';\n          },\n          increaseCharactersPoolSize: 32\n        }\n      };\n    }\n  }, {\n    key: \"charactersPoolLength\",\n    get: function get() {\n      return this._charactersPoolLength;\n    },\n    set: function set(value) {\n      this._charactersPoolLength = value;\n    }\n  }, {\n    key: \"level\",\n    get: function get() {\n      return this._level || this.getLevel();\n    },\n    set: function set(level) {\n      this._level = level;\n    }\n  }, {\n    key: \"entropy\",\n    get: function get() {\n      return this._entropy;\n    },\n    set: function set(value) {\n      var oldLevel = this.getLevel();\n      var updateOnEntropyChange = this.settings.updateOn === 'entropyChange' && this._entropy !== value;\n      this._entropy = value;\n      this.level = this.getLevel();\n      var updateOnLevelChange = this.settings.updateOn === 'levelChange' && oldLevel.name !== this.level.name;\n\n      if (updateOnLevelChange || updateOnEntropyChange) {\n        this.updateView();\n      }\n    }\n  }, {\n    key: \"dictionarySize\",\n    get: function get() {\n      return this.settings.dictionarySize || 171476;\n    }\n  }, {\n    key: \"template\",\n    get: function get() {\n      return this.settings.template;\n    }\n  }, {\n    key: \"tooltip\",\n    get: function get() {\n      var _this$level, _this$level2;\n\n      return ((_this$level = this.level) === null || _this$level === void 0 ? void 0 : _this$level.tooltip) || \"\".concat((_this$level2 = this.level) === null || _this$level2 === void 0 ? void 0 : _this$level2.name, \" strongness\");\n    }\n  }, {\n    key: \"rulesSettings\",\n    get: function get() {\n      return this.settings.rulesSettings || [];\n    }\n  }, {\n    key: \"customRules\",\n    get: function get() {\n      return this.settings.customRules || [];\n    }\n  }, {\n    key: \"log2\",\n    value: function log2(value) {\n      if (typeof Math.log2 === 'function') {\n        return Math.log2(value);\n      }\n\n      return Math.log(value) * Math.LOG2E;\n    }\n  }, {\n    key: \"calculatePasswordEntropy\",\n    value: function calculatePasswordEntropy(passwordLength, charactersPoolSize) {\n      return !passwordLength || !charactersPoolSize ? 0 : this.log2(Math.pow(charactersPoolSize, passwordLength));\n    }\n  }, {\n    key: \"calculatePasswordEntropyWords\",\n    value: function calculatePasswordEntropyWords(wordsCount) {\n      return !this.dictionarySize ? 0 : this.log2(this.dictionarySize) * wordsCount;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var view = this.component.interpolate(this.template, {\n        entropy: this.entropy,\n        maxEntropy: this.maxEntropy,\n        level: this.level,\n        levelName: this.level.name.replace(' ', '-').toLowerCase(),\n        levels: this.levels,\n        readOnly: this.component.options.readOnly,\n        pristine: this.component.pristine,\n        t: this.t.bind(this),\n        tooltip: this.tooltip\n      });\n      return this.component.sanitize(view);\n    }\n  }, {\n    key: \"checkBlackList\",\n    value: function checkBlackList(value) {\n      var blackList = _toConsumableArray(this.settings.blackList);\n\n      var customBlacklistedWords = this.settings.customBlacklistedWords;\n\n      if (customBlacklistedWords && typeof customBlacklistedWords === 'string') {\n        customBlacklistedWords = this.evaluate(customBlacklistedWords, this.component.evalContext({\n          value: value\n        }), 'values');\n\n        if (customBlacklistedWords && customBlacklistedWords.length) {\n          blackList.push.apply(blackList, _toConsumableArray(customBlacklistedWords));\n        }\n      }\n\n      var restValue = value;\n      var blacklistedWords = [];\n\n      for (var i = 0; i < blackList.length; i++) {\n        var word = blackList[i];\n        var regExp = new RegExp(\"\".concat(word), 'gi');\n\n        if (regExp.test(value)) {\n          blacklistedWords.push(word);\n          restValue = restValue.replace(regExp, '');\n        } // If less the 3 symboles left, just stop iterating\n\n\n        if (restValue.length < 3) {\n          break;\n        }\n      }\n\n      if (blacklistedWords.length) {\n        // If there are some random characters except of blacklisted words in the password,\n        // calculate the entropy for them\n        var _ref = restValue.length ? this.performChecks(restValue) : 0,\n            charactersPoolSize = _ref.charactersPoolSize;\n\n        var entropyOfNonblacklistedValue = this.calculatePasswordEntropy(restValue.length, charactersPoolSize); // Calculate the entropy if the biggest part of the password could be picked up from dictionary words\n\n        var dictionaryCheckEntropy = this.calculatePasswordEntropyWords(blacklistedWords.length);\n        var entropy = dictionaryCheckEntropy + entropyOfNonblacklistedValue;\n        return {\n          entropy: entropy,\n          blacklistedWords: blacklistedWords\n        };\n      }\n\n      return true;\n    }\n    /**\n     * Determines is a password is secure enough to submit\n     * @return {boolean}\n     */\n\n  }, {\n    key: \"isValid\",\n    value: function isValid() {\n      var isValidCheck = this.settings.isValid;\n\n      if (isValidCheck && typeof isValidCheck === 'string') {\n        var valid = this.evaluate(isValidCheck, this.component.evalContext({\n          entropy: this.entropy,\n          level: this.level\n        }), 'valid');\n        return valid;\n      }\n\n      return this.entropy >= Math.round(this.maxEntropy / 2);\n    }\n    /**\n     * Handles the result of check and constructs a new error object or returns an amount of points to add to the current entropy\n     * @param {boolean|number} valid - Determines if the validation was failed or an amount of points if it was passed\n     * @param {*} validation - Validation configuration\n     * @param {string} value - Value which was validated\n     * @param {string} message - Message which should be shown if validation was not passed\n     */\n\n  }, {\n    key: \"handleRuleCheckResult\",\n    value: function handleRuleCheckResult(valid, validation, message, errors) {\n      if (valid !== true) {\n        errors.push({\n          validation: validation.name,\n          message: message,\n          level: validation.required ? 'error' : 'warning'\n        });\n      } else if (validation.increaseCharactersPoolSize) {\n        return validation.increaseCharactersPoolSize;\n      }\n\n      return 0;\n    }\n  }, {\n    key: \"performChecks\",\n    value: function performChecks(value) {\n      var _this3 = this;\n\n      var errors = [];\n      var charactersPoolSize = 0;\n      this.rulesSettings.forEach(function (settings) {\n        if (_this3.rules[settings.name]) {\n          var rule = _lodash.default.merge({}, _this3.rules[settings.name], settings);\n\n          var valid = rule.check(value, settings.options || {});\n          var message = settings.message || valid;\n          charactersPoolSize += _this3.handleRuleCheckResult(valid, rule, message, errors);\n        }\n      });\n      this.customRules.forEach(function (rule) {\n        if (rule.check && typeof rule.check === 'string') {\n          var valid = _this3.evaluate(rule.check, _this3.component.evalContext({\n            value: value\n          }), 'valid');\n\n          var message = typeof valid === 'string' ? valid : \"Password does not meet \".concat(rule.name, \" validation\");\n          charactersPoolSize += _this3.handleRuleCheckResult(valid, rule, message, errors);\n        }\n      });\n      return {\n        charactersPoolSize: charactersPoolSize,\n        errors: errors\n      };\n    }\n    /**\n     * Performs checks to validate password security\n     * @param {string} value - Suggested password\n     */\n\n  }, {\n    key: \"checkValidity\",\n    value: function checkValidity(value) {\n      var _this$settings$blackL;\n\n      var passwordLength = value.length;\n\n      var _this$performChecks = this.performChecks(value),\n          charactersPoolSize = _this$performChecks.charactersPoolSize,\n          errors = _this$performChecks.errors;\n\n      this.errors = errors;\n      var entropy = this.calculatePasswordEntropy(passwordLength, charactersPoolSize);\n      var blackListCheck = (_this$settings$blackL = this.settings.blackList) !== null && _this$settings$blackL !== void 0 && _this$settings$blackL.length || this.settings.customBlacklistedWords ? this.checkBlackList(value) : null; // If there were found some words from the black list\n\n      if (blackListCheck && blackListCheck !== true) {\n        this.handleBlackListCheckResult(blackListCheck); // Select the mininal entropy based on the dictionary check or symbolic check\n\n        this.entropy = Math.min(entropy, blackListCheck.entropy);\n      } else {\n        this.entropy = entropy;\n      }\n\n      var isValid = this.isValid();\n\n      if (!isValid) {\n        this.errors.push({\n          message: 'Password is not strong enough',\n          level: this.settings.required ? 'error' : 'warning'\n        });\n      }\n\n      return !this.errors.length;\n    }\n  }, {\n    key: \"handleBlackListCheckResult\",\n    value: function handleBlackListCheckResult(result) {\n      var blacklistedWords = result.blacklistedWords;\n      var isRequired = this.settings.disableBlacklistedWords;\n      var message = \"Password \".concat(isRequired ? 'must' : 'should', \" not include common words: \").concat(blacklistedWords.join(', '));\n      var validation = {\n        name: 'blacklist',\n        required: isRequired\n      };\n      this.handleRuleCheckResult(false, validation, message, this.errors);\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this4 = this;\n\n      _get(_getPrototypeOf(PasswordStrengthAddon.prototype), \"attach\", this).call(this, element);\n\n      var container = this.component.ce('div', {\n        ref: 'passwordStrengthIndicator'\n      });\n      var inserted = this.insertContainer(element, container);\n\n      if (!inserted) {\n        this.component.append(container);\n      }\n\n      this._element = container;\n      this.component.on('redraw', function () {\n        return _this4.updateView();\n      });\n      this.component.on('componentError', function () {\n        return _this4.updateView();\n      });\n      this.updateView();\n    }\n  }, {\n    key: \"insertContainer\",\n    value: function insertContainer(element, container) {\n      var _this$settings$locati, _this$settings$locati2;\n\n      if (!element || !container) {\n        return false;\n      }\n\n      var insert = (_this$settings$locati = this.settings.location) === null || _this$settings$locati === void 0 ? void 0 : _this$settings$locati.insert;\n      var selector = (_this$settings$locati2 = this.settings.location) === null || _this$settings$locati2 === void 0 ? void 0 : _this$settings$locati2.selector;\n      var reference;\n\n      if (selector) {\n        reference = element.querySelector(selector);\n      }\n\n      if (reference) {\n        var parent = reference.parentNode;\n\n        switch (insert) {\n          case 'after':\n            if (parent) {\n              parent.insertBefore(container, reference.nextSibling || null);\n              return true;\n            }\n\n            return false;\n\n          case 'before':\n            if (parent) {\n              parent.insertBefore(container, reference);\n              return true;\n            }\n\n            return false;\n\n          default:\n            console.warn(\"Unknown insert option: \".concat(insert));\n            return false;\n        }\n      } else {\n        console.warn(\"No elements found using selector: \".concat(selector));\n        return false;\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(PasswordStrengthAddon.prototype), \"destroy\", this).call(this);\n    }\n    /**\n     * Finds the level which one the passed entropy suits\n     * @param {number} entropy - Points of password's security\n     */\n\n  }, {\n    key: \"getLevel\",\n    value: function getLevel() {\n      var entropy = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.entropy;\n      var lowestLevel = this.levels[0];\n      var prevMaxEntropy = lowestLevel.maxEntropy;\n\n      if (entropy <= lowestLevel.maxEntropy) {\n        return lowestLevel;\n      }\n\n      if (entropy >= this.maxEntropy) {\n        return this.levels[this.levels.length - 1];\n      } // Iterate through levels and find the one which the passed entropy belongs to\n\n\n      for (var i = 1; i < this.levels.length; i++) {\n        var level = this.levels[i];\n\n        if (entropy > prevMaxEntropy && entropy <= level.maxEntropy) {\n          return level;\n        }\n\n        prevMaxEntropy = level.maxEntropy;\n      }\n\n      return lowestLevel;\n    }\n    /**\n     * Update the current view of the password's security indicator\n     */\n\n  }, {\n    key: \"updateView\",\n    value: function updateView() {\n      if (!this.element) {\n        return;\n      }\n\n      var view = this.render();\n      this.element.innerHTML = view;\n    }\n  }], [{\n    key: \"info\",\n    get: function get() {\n      return {\n        supportedComponents: ['password'],\n        name: 'passwordStrength',\n        components: _PasswordStrengthAddon.default,\n        label: 'Password Strength',\n        defaultSettings: {\n          rulesSettings: [{\n            name: 'length',\n            required: false,\n            message: 'Value should be longer'\n          }, {\n            name: 'upperCase',\n            required: false,\n            message: 'Value should have uppercase letters'\n          }, {\n            name: 'numeric',\n            required: false,\n            message: 'Value should have numeric symbols'\n          }, {\n            name: 'lowerCase',\n            required: false,\n            message: 'Value should be have lowercase letters'\n          }, {\n            name: 'symbols',\n            required: false,\n            message: 'Value should have symbols'\n          }],\n          updateOn: 'levelChange',\n          required: true,\n          levels: [{\n            name: 'Low',\n            maxEntropy: 28,\n            style: 'danger'\n          }, {\n            name: 'Medium',\n            maxEntropy: 45,\n            style: 'warning'\n          }, {\n            name: 'High',\n            maxEntropy: 59,\n            style: 'info'\n          }, {\n            name: 'Very High',\n            maxEntropy: 85,\n            style: 'success'\n          }],\n          blackList: [],\n          template: \"\\n          <div class=\\\"formio-security-indicator\\\">\\n            {% if (!ctx.readOnly && !ctx.pristine) { %}\\n              <div\\n                title=\\\"{{ctx.t(ctx.tooltip)}}\\\"\\n                class=\\\"security-{{ctx.levelName}} {{ ctx.level.style ? 'bg-' + ctx.level.style : ''}}\\\"\\n                style=\\\"{{ctx.level.color ? 'background-color: ' + ctx.level.color + ';' : ''}}\\\"\\n              ></div>\\n            {% } %}\\n          </div>\\n        \",\n          location: {\n            insert: 'after',\n            selector: '[ref=\"element\"]'\n          }\n        }\n      };\n    }\n  }]);\n\n  return PasswordStrengthAddon;\n}(_FormioAddon2.default);\n\nexports.default = PasswordStrengthAddon;"]},"metadata":{},"sourceType":"script"}