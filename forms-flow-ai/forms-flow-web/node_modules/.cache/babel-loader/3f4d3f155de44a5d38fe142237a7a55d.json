{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\src\\\\components\\\\Dashboard\\\\Dashboard.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport ApplicationCounter from \"./ApplicationCounter\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Route, Redirect } from \"react-router\";\nimport StatusChart from \"./StatusChart\";\nimport Select from 'react-select';\nimport { fetchMetricsSubmissionCount, fetchMetricsSubmissionStatusCount } from \"./../../apiManager/services/metricsServices\";\nimport Loading from \"../../containers/Loading\";\nimport LoadError from \"../Error\";\nimport DateRangePicker from \"@wojtekmaj/react-daterange-picker\";\nimport moment from \"moment\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar firsDay = moment().format(\"YYYY-MM-01\");\nvar lastDay = moment().endOf(\"month\").format(\"YYYY-MM-DD\");\nvar Dashboard = /*#__PURE__*/React.memo(_c = _s(function () {\n  _s();\n\n  var dispatch = useDispatch();\n  var submissionsList = useSelector(function (state) {\n    return state.metrics.submissionsList;\n  });\n  var submissionsStatusList = useSelector(function (state) {\n    return state.metrics.submissionsStatusList;\n  });\n  var isMetricsLoading = useSelector(function (state) {\n    return state.metrics.isMetricsLoading;\n  });\n  var isMetricsStatusLoading = useSelector(function (state) {\n    return state.metrics.isMetricsStatusLoading;\n  });\n  var selectedMetricsId = useSelector(function (state) {\n    return state.metrics.selectedMetricsId;\n  });\n  var metricsLoadError = useSelector(function (state) {\n    return state.metrics.metricsLoadError;\n  });\n  var metricsStatusLoadError = useSelector(function (state) {\n    return state.metrics.metricsStatusLoadError;\n  });\n  var searchOptions = [{\n    value: 'created',\n    label: 'Created Date'\n  }, {\n    value: 'modified',\n    label: 'Modified Date'\n  }];\n\n  var _useState = useState(searchOptions[0]),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchBy = _useState2[0],\n      setSearchBy = _useState2[1];\n\n  var _useState3 = useState([moment(firsDay), moment(lastDay)]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      dateRange = _useState4[0],\n      setDateRange = _useState4[1];\n\n  var _useState5 = useState(submissionsList[0]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      showSubmissionData = _useState6[0],\n      setSHowSubmissionData = _useState6[1];\n\n  var getFormattedDate = function getFormattedDate(date) {\n    return moment.utc(date).format(\"YYYY-MM-DDTHH:mm:ssZ\").replace(\"+\", \"%2B\");\n  };\n\n  useEffect(function () {\n    var fromDate = getFormattedDate(dateRange[0]);\n    var toDate = getFormattedDate(dateRange[1]);\n    dispatch(fetchMetricsSubmissionCount(fromDate, toDate, searchBy.value));\n  }, [dispatch, searchBy.value, dateRange]);\n  useEffect(function () {\n    setSHowSubmissionData(submissionsList[0]);\n  }, [submissionsList]);\n\n  var onChangeInput = function onChangeInput(option) {\n    setSearchBy(option);\n  };\n\n  if (isMetricsLoading) {\n    return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 12\n    }, _this);\n  }\n\n  var getStatusDetails = function getStatusDetails(id) {\n    var fromDate = getFormattedDate(dateRange[0]);\n    var toDate = getFormattedDate(dateRange[1]);\n    dispatch(fetchMetricsSubmissionStatusCount(id, fromDate, toDate, searchBy.value));\n  };\n\n  var onSetDateRange = function onSetDateRange(date) {\n    setDateRange(date);\n  };\n\n  var noOfApplicationsAvailable = (submissionsList === null || submissionsList === void 0 ? void 0 : submissionsList.length) || 0;\n\n  if (metricsLoadError) {\n    return /*#__PURE__*/_jsxDEV(LoadError, {\n      text: \"The operation couldn't be completed. Please try after sometime\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, _this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mb-4\",\n      id: \"main\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard mb-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row \",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"dashboard-title\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-pie-chart p-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 13\n              }, _this), \"Metrics\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 13\n            }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              className: \"line-hr\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 13\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row \",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 col-lg-4 \",\n                children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"application-title\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-bars mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 108,\n                    columnNumber: 19\n                  }, _this), \" Submissions\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 17\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 15\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 col-lg-5\",\n                title: \"Search By\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    width: '200px',\n                    float: \"right\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Select, {\n                    options: searchOptions,\n                    onChange: onChangeInput,\n                    placeholder: \"Select Filter\",\n                    value: searchBy\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 15\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 15\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 15\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 col-lg-3 d-flex align-items-end flex-lg-column mt-3 mt-lg-0\",\n                children: /*#__PURE__*/_jsxDEV(DateRangePicker, {\n                  onChange: onSetDateRange,\n                  value: dateRange,\n                  format: \"MMM dd, y\",\n                  rangeDivider: \" - \",\n                  clearIcon: null,\n                  calendarIcon: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-calendar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 21\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 17\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 15\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 13\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 11\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12\",\n            children: /*#__PURE__*/_jsxDEV(ApplicationCounter, {\n              application: submissionsList,\n              getStatusDetails: getStatusDetails,\n              selectedMetricsId: selectedMetricsId,\n              noOfApplicationsAvailable: noOfApplicationsAvailable,\n              setSHowSubmissionData: setSHowSubmissionData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 13\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 11\n          }, _this), metricsStatusLoadError && /*#__PURE__*/_jsxDEV(LoadError, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 38\n          }, _this), noOfApplicationsAvailable > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12\",\n            children: isMetricsStatusLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, _this) : /*#__PURE__*/_jsxDEV(StatusChart, {\n              submissionsStatusList: submissionsStatusList,\n              submissionData: showSubmissionData\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Route, {\n      path: \"/metrics/:notAvailable\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(Redirect, {\n        exact: true,\n        to: \"/404\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 47\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, _this);\n}, \"H0G6Rb9J53Y2Am6VbQlX0urQQM8=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector];\n}));\n_c2 = Dashboard;\nexport default Dashboard;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Dashboard$React.memo\");\n$RefreshReg$(_c2, \"Dashboard\");","map":{"version":3,"sources":["C:/Users/Devin/AOT_Projects/forms-flow-master/forms-flow-ai/forms-flow-web/src/components/Dashboard/Dashboard.js"],"names":["React","Fragment","useEffect","useState","ApplicationCounter","useDispatch","useSelector","Route","Redirect","StatusChart","Select","fetchMetricsSubmissionCount","fetchMetricsSubmissionStatusCount","Loading","LoadError","DateRangePicker","moment","firsDay","format","lastDay","endOf","Dashboard","memo","dispatch","submissionsList","state","metrics","submissionsStatusList","isMetricsLoading","isMetricsStatusLoading","selectedMetricsId","metricsLoadError","metricsStatusLoadError","searchOptions","value","label","searchBy","setSearchBy","dateRange","setDateRange","showSubmissionData","setSHowSubmissionData","getFormattedDate","date","utc","replace","fromDate","toDate","onChangeInput","option","getStatusDetails","id","onSetDateRange","noOfApplicationsAvailable","length","width","float"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\nimport ApplicationCounter from \"./ApplicationCounter\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Route, Redirect } from \"react-router\";\r\nimport StatusChart from \"./StatusChart\";\r\nimport Select from 'react-select';\r\nimport {\r\n  fetchMetricsSubmissionCount,\r\n  fetchMetricsSubmissionStatusCount,\r\n} from \"./../../apiManager/services/metricsServices\";\r\n\r\nimport Loading from \"../../containers/Loading\";\r\nimport LoadError from \"../Error\";\r\n\r\nimport DateRangePicker from \"@wojtekmaj/react-daterange-picker\";\r\nimport moment from \"moment\";\r\n\r\nconst firsDay = moment().format(\"YYYY-MM-01\");\r\n\r\nconst lastDay = moment().endOf(\"month\").format(\"YYYY-MM-DD\");\r\n\r\nconst Dashboard = React.memo(() => {\r\n  const dispatch = useDispatch();\r\n  const submissionsList = useSelector((state) => state.metrics.submissionsList);\r\n  const submissionsStatusList = useSelector(\r\n    (state) => state.metrics.submissionsStatusList\r\n  );\r\n  const isMetricsLoading = useSelector(\r\n    (state) => state.metrics.isMetricsLoading\r\n  );\r\n  const isMetricsStatusLoading = useSelector(\r\n    (state) => state.metrics.isMetricsStatusLoading\r\n  );\r\n  const selectedMetricsId = useSelector(\r\n    (state) => state.metrics.selectedMetricsId\r\n  );\r\n  const metricsLoadError = useSelector(\r\n    (state) => state.metrics.metricsLoadError\r\n  );\r\n  const metricsStatusLoadError = useSelector(\r\n    (state) => state.metrics.metricsStatusLoadError\r\n  );\r\n  const searchOptions = [\r\n    { value: 'created', label: 'Created Date' },\r\n    { value: 'modified', label: 'Modified Date' },\r\n  ];\r\n  const [searchBy, setSearchBy] = useState(searchOptions[0]);\r\n  const [dateRange, setDateRange] = useState([\r\n    moment(firsDay),\r\n    moment(lastDay),\r\n  ]);\r\n  const [showSubmissionData,setSHowSubmissionData]=useState(submissionsList[0])\r\n\r\n  const getFormattedDate = (date) => {\r\n    return moment.utc(date).format(\"YYYY-MM-DDTHH:mm:ssZ\").replace(\"+\",\"%2B\")\r\n  };\r\n  useEffect(() => {\r\n    const fromDate = getFormattedDate(dateRange[0]);\r\n    const toDate = getFormattedDate(dateRange[1]);\r\n    dispatch(fetchMetricsSubmissionCount(fromDate, toDate, searchBy.value));\r\n  }, [dispatch,searchBy.value,dateRange]);\r\n\r\n  useEffect(()=>{\r\n    setSHowSubmissionData(submissionsList[0])\r\n  },[submissionsList])\r\n  \r\n  const  onChangeInput =(option) => {\r\n    setSearchBy(option);\r\n    \r\n  }\r\n\r\n  if (isMetricsLoading) {\r\n    return <Loading />;\r\n  }\r\n\r\n  const getStatusDetails = (id) => {\r\n    const fromDate = getFormattedDate(dateRange[0]);\r\n    const toDate = getFormattedDate(dateRange[1]);\r\n    dispatch(fetchMetricsSubmissionStatusCount(id, fromDate, toDate, searchBy.value));\r\n  };\r\n\r\n  const onSetDateRange = (date) => {\r\n    \r\n    setDateRange(date);\r\n  };\r\n  \r\n  const noOfApplicationsAvailable = submissionsList?.length || 0;\r\n  if (metricsLoadError) {\r\n    return (\r\n      <LoadError text=\"The operation couldn't be completed. Please try after sometime\" />\r\n    );\r\n  }\r\n  return (\r\n    <Fragment>\r\n      <div className=\"container mb-4\" id=\"main\">\r\n      <div className=\"dashboard mb-2\">\r\n        <div className=\"row \">\r\n          <div className=\"col-12\">\r\n            <h1 className=\"dashboard-title\">\r\n            <i className=\"fa fa-pie-chart p-1\" />\r\n              {/* <i className=\"fa fa-pie-chart\" aria-hidden=\"true\"/> */}\r\n               Metrics\r\n            </h1>\r\n            <hr className=\"line-hr\"/>\r\n            <div className=\"row \">\r\n              <div className=\"col-12 col-lg-4 \">\r\n                <h3 className=\"application-title\">\r\n                  <i className=\"fa fa-bars mr-1\"/> Submissions\r\n                </h3>\r\n              </div>\r\n              <div className=\"col-12 col-lg-5\" title=\"Search By\">\r\n              <div style={{width: '200px',float:\"right\"}} >\r\n              <Select\r\n                    options={searchOptions}\r\n                    onChange={onChangeInput}\r\n                    placeholder='Select Filter'\r\n                    value={searchBy}\r\n              />\r\n              </div>\r\n              </div>\r\n              <div className=\"col-12 col-lg-3 d-flex align-items-end flex-lg-column mt-3 mt-lg-0\" >\r\n                <DateRangePicker\r\n                  onChange={onSetDateRange}\r\n                  value={dateRange}\r\n                  format=\"MMM dd, y\"\r\n                  rangeDivider=\" - \"\r\n                  clearIcon={null}\r\n                  calendarIcon={\r\n                    <i className=\"fa fa-calendar\" />\r\n                  }\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-12\">\r\n            <ApplicationCounter\r\n              application={submissionsList}\r\n              getStatusDetails={getStatusDetails}\r\n              selectedMetricsId={selectedMetricsId}\r\n              noOfApplicationsAvailable={noOfApplicationsAvailable}\r\n              setSHowSubmissionData={setSHowSubmissionData}\r\n            />\r\n          </div>\r\n          {metricsStatusLoadError && <LoadError />}\r\n          {noOfApplicationsAvailable > 0 && (\r\n            <div className=\"col-12\">\r\n              {isMetricsStatusLoading ? (\r\n                <Loading />\r\n              ) : (\r\n                <StatusChart  submissionsStatusList={submissionsStatusList} submissionData={showSubmissionData} />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      </div>\r\n      <Route path={\"/metrics/:notAvailable\"}> <Redirect exact to='/404'/></Route>\r\n    </Fragment>\r\n  );\r\n});\r\n\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}