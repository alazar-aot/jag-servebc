{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.applyFormChanges = applyFormChanges;\nexports.eachComponent = eachComponent;\nexports.escapeRegExCharacters = escapeRegExCharacters;\nexports.findComponent = findComponent;\nexports.findComponents = findComponents;\nexports.flattenComponents = flattenComponents;\nexports.formatAsCurrency = formatAsCurrency;\nexports.generateFormChange = generateFormChange;\nexports.getComponent = getComponent;\nexports.getStrings = getStrings;\nexports.getValue = getValue;\nexports.hasCondition = hasCondition;\nexports.isLayoutComponent = isLayoutComponent;\nexports.matchComponent = matchComponent;\nexports.parseFloatExt = parseFloatExt;\nexports.removeComponent = removeComponent;\nexports.searchComponents = searchComponents;\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.array.splice.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.replace.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.regexp.to-string.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nvar _get = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _set = _interopRequireDefault(require(\"lodash/set\"));\n\nvar _has = _interopRequireDefault(require(\"lodash/has\"));\n\nvar _clone = _interopRequireDefault(require(\"lodash/clone\"));\n\nvar _forOwn = _interopRequireDefault(require(\"lodash/forOwn\"));\n\nvar _isString = _interopRequireDefault(require(\"lodash/isString\"));\n\nvar _isNaN = _interopRequireDefault(require(\"lodash/isNaN\"));\n\nvar _isNil = _interopRequireDefault(require(\"lodash/isNil\"));\n\nvar _isPlainObject = _interopRequireDefault(require(\"lodash/isPlainObject\"));\n\nvar _round = _interopRequireDefault(require(\"lodash/round\"));\n\nvar _chunk = _interopRequireDefault(require(\"lodash/chunk\"));\n\nvar _pad = _interopRequireDefault(require(\"lodash/pad\"));\n\nvar _fastJsonPatch = require(\"fast-json-patch\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Determine if a component is a layout component or not.\n *\n * @param {Object} component\n *   The component to check.\n *\n * @returns {Boolean}\n *   Whether or not the component is a layout component.\n */\n\n\nfunction isLayoutComponent(component) {\n  return Boolean(component.columns && Array.isArray(component.columns) || component.rows && Array.isArray(component.rows) || component.components && Array.isArray(component.components));\n}\n/**\n * Iterate through each component within a form.\n *\n * @param {Object} components\n *   The components to iterate.\n * @param {Function} fn\n *   The iteration function to invoke for each component.\n * @param {Boolean} includeAll\n *   Whether or not to include layout components.\n * @param {String} path\n *   The current data path of the element. Example: data.user.firstName\n * @param {Object} parent\n *   The parent object.\n */\n\n\nfunction eachComponent(components, fn, includeAll, path, parent, inRecursion) {\n  if (!components) return;\n  path = path || '';\n\n  if (inRecursion) {\n    if (components.noRecurse) {\n      delete components.noRecurse;\n      return;\n    }\n\n    components.noRecurse = true;\n  }\n\n  components.forEach(function (component) {\n    if (!component) {\n      return;\n    }\n\n    var hasColumns = component.columns && Array.isArray(component.columns);\n    var hasRows = component.rows && Array.isArray(component.rows);\n    var hasComps = component.components && Array.isArray(component.components);\n    var noRecurse = false;\n    var newPath = component.key ? path ? \"\".concat(path, \".\").concat(component.key) : component.key : ''; // Keep track of parent references.\n\n    if (parent) {\n      // Ensure we don't create infinite JSON structures.\n      component.parent = (0, _clone.default)(parent);\n      delete component.parent.components;\n      delete component.parent.componentMap;\n      delete component.parent.columns;\n      delete component.parent.rows;\n    } // there's no need to add other layout components here because we expect that those would either have columns, rows or components\n\n\n    var layoutTypes = ['htmlelement', 'content'];\n    var isLayoutComponent = hasColumns || hasRows || hasComps && !component.input || layoutTypes.indexOf(component.type) > -1;\n\n    if (includeAll || component.tree || !isLayoutComponent) {\n      noRecurse = fn(component, newPath, components);\n    }\n\n    var subPath = function subPath() {\n      if (component.key && !['panel', 'table', 'well', 'columns', 'fieldset', 'tabs', 'form'].includes(component.type) && (['datagrid', 'container', 'editgrid', 'address', 'dynamicWizard', 'datatable'].includes(component.type) || component.tree)) {\n        return newPath;\n      } else if (component.key && component.type === 'form') {\n        return \"\".concat(newPath, \".data\");\n      }\n\n      return path;\n    };\n\n    if (!noRecurse) {\n      if (hasColumns) {\n        component.columns.forEach(function (column) {\n          return eachComponent(column.components, fn, includeAll, subPath(), parent ? component : null);\n        }, true);\n      } else if (hasRows) {\n        component.rows.forEach(function (row) {\n          if (Array.isArray(row)) {\n            row.forEach(function (column) {\n              return eachComponent(column.components, fn, includeAll, subPath(), parent ? component : null);\n            }, true);\n          }\n        });\n      } else if (hasComps) {\n        eachComponent(component.components, fn, includeAll, subPath(), parent ? component : null, true);\n      }\n    }\n  });\n\n  if (components.noRecurse) {\n    delete components.noRecurse;\n  }\n}\n/**\n * Matches if a component matches the query.\n *\n * @param component\n * @param query\n * @return {boolean}\n */\n\n\nfunction matchComponent(component, query) {\n  if ((0, _isString.default)(query)) {\n    return component.key === query || component.path === query;\n  } else {\n    var matches = false;\n    (0, _forOwn.default)(query, function (value, key) {\n      matches = (0, _get.default)(component, key) === value;\n\n      if (!matches) {\n        return false;\n      }\n    });\n    return matches;\n  }\n}\n/**\n * Get a component by its key\n *\n * @param {Object} components\n *   The components to iterate.\n * @param {String|Object} key\n *   The key of the component to get, or a query of the component to search.\n *\n * @returns {Object}\n *   The component that matches the given key, or undefined if not found.\n */\n\n\nfunction getComponent(components, key, includeAll) {\n  var result;\n  eachComponent(components, function (component, path) {\n    if (path === key || component.path === key) {\n      result = component;\n      return true;\n    }\n  }, includeAll);\n  return result;\n}\n/**\n * Finds a component provided a query of properties of that component.\n *\n * @param components\n * @param query\n * @return {*}\n */\n\n\nfunction searchComponents(components, query) {\n  var results = [];\n  eachComponent(components, function (component) {\n    if (matchComponent(component, query)) {\n      results.push(component);\n    }\n  }, true);\n  return results;\n}\n/**\n * Deprecated version of findComponents. Renamed to searchComponents.\n *\n * @param components\n * @param query\n * @returns {*}\n */\n\n\nfunction findComponents(components, query) {\n  console.warn('formio.js/utils findComponents is deprecated. Use searchComponents instead.');\n  return searchComponents(components, query);\n}\n/**\n * This function will find a component in a form and return the component AND THE PATH to the component in the form.\n * Path to the component is stored as an array of nested components and their indexes.The Path is being filled recursively\n * when you iterating through the nested structure.\n * If the component is not found the callback won't be called and function won't return anything.\n *\n * @param components\n * @param key\n * @param fn\n * @param path\n * @returns {*}\n */\n\n\nfunction findComponent(components, key, path, fn) {\n  if (!components) return;\n  path = path || [];\n\n  if (!key) {\n    return fn(components);\n  }\n\n  components.forEach(function (component, index) {\n    var newPath = path.slice(); // Add an index of the component it iterates through in nested structure\n\n    newPath.push(index);\n    if (!component) return;\n\n    if (component.hasOwnProperty('columns') && Array.isArray(component.columns)) {\n      newPath.push('columns');\n      component.columns.forEach(function (column, index) {\n        var colPath = newPath.slice();\n        colPath.push(index);\n        colPath.push('components');\n        findComponent(column.components, key, colPath, fn);\n      });\n    }\n\n    if (component.hasOwnProperty('rows') && Array.isArray(component.rows)) {\n      newPath.push('rows');\n      component.rows.forEach(function (row, index) {\n        var rowPath = newPath.slice();\n        rowPath.push(index);\n        row.forEach(function (column, index) {\n          var colPath = rowPath.slice();\n          colPath.push(index);\n          colPath.push('components');\n          findComponent(column.components, key, colPath, fn);\n        });\n      });\n    }\n\n    if (component.hasOwnProperty('components') && Array.isArray(component.components)) {\n      newPath.push('components');\n      findComponent(component.components, key, newPath, fn);\n    }\n\n    if (component.key === key) {\n      //Final callback if the component is found\n      fn(component, newPath, components);\n    }\n  });\n}\n/**\n * Remove a component by path.\n *\n * @param components\n * @param path\n */\n\n\nfunction removeComponent(components, path) {\n  // Using _.unset() leave a null value. Use Array splice instead.\n  var index = path.pop();\n\n  if (path.length !== 0) {\n    components = (0, _get.default)(components, path);\n  }\n\n  components.splice(index, 1);\n}\n\nfunction generateFormChange(type, data) {\n  var change;\n\n  switch (type) {\n    case 'add':\n      change = {\n        op: 'add',\n        key: data.component.key,\n        container: data.parent.key,\n        // Parent component\n        path: data.path,\n        // Path to container within parent component.\n        index: data.index,\n        // Index of component in parent container.\n        component: data.component\n      };\n      break;\n\n    case 'edit':\n      change = {\n        op: 'edit',\n        key: data.originalComponent.key,\n        patches: (0, _fastJsonPatch.compare)(data.originalComponent, data.component)\n      }; // Don't save if nothing changed.\n\n      if (!change.patches.length) {\n        change = null;\n      }\n\n      break;\n\n    case 'remove':\n      change = {\n        op: 'remove',\n        key: data.component.key\n      };\n      break;\n  }\n\n  return change;\n}\n\nfunction applyFormChanges(form, changes) {\n  var failed = [];\n  changes.forEach(function (change) {\n    var found = false;\n\n    switch (change.op) {\n      case 'add':\n        var newComponent = change.component; // Find the container to set the component in.\n\n        findComponent(form.components, change.container, null, function (parent) {\n          if (!change.container) {\n            parent = form;\n          } // A move will first run an add so remove any existing components with matching key before inserting.\n\n\n          findComponent(form.components, change.key, null, function (component, path) {\n            // If found, use the existing component. (If someone else edited it, the changes would be here)\n            newComponent = component;\n            removeComponent(form.components, path);\n          });\n          found = true;\n          var container = (0, _get.default)(parent, change.path);\n          container.splice(change.index, 0, newComponent);\n        });\n        break;\n\n      case 'remove':\n        findComponent(form.components, change.key, null, function (component, path) {\n          found = true;\n          var oldComponent = (0, _get.default)(form.components, path);\n\n          if (oldComponent.key !== component.key) {\n            path.pop();\n          }\n\n          removeComponent(form.components, path);\n        });\n        break;\n\n      case 'edit':\n        findComponent(form.components, change.key, null, function (component, path) {\n          found = true;\n\n          try {\n            var oldComponent = (0, _get.default)(form.components, path);\n            var _newComponent = (0, _fastJsonPatch.applyPatch)(component, change.patches).newDocument;\n\n            if (oldComponent.key !== _newComponent.key) {\n              path.pop();\n            }\n\n            (0, _set.default)(form.components, path, _newComponent);\n          } catch (err) {\n            failed.push(change);\n          }\n        });\n        break;\n\n      case 'move':\n        break;\n    }\n\n    if (!found) {\n      failed.push(change);\n    }\n  });\n  return {\n    form: form,\n    failed: failed\n  };\n}\n/**\n * Flatten the form components for data manipulation.\n *\n * @param {Object} components\n *   The components to iterate.\n * @param {Boolean} includeAll\n *   Whether or not to include layout components.\n *\n * @returns {Object}\n *   The flattened components map.\n */\n\n\nfunction flattenComponents(components, includeAll) {\n  var flattened = {};\n  eachComponent(components, function (component, path) {\n    flattened[path] = component;\n  }, includeAll);\n  return flattened;\n}\n/**\n * Returns if this component has a conditional statement.\n *\n * @param component - The component JSON schema.\n *\n * @returns {boolean} - TRUE - This component has a conditional, FALSE - No conditional provided.\n */\n\n\nfunction hasCondition(component) {\n  return Boolean(component.customConditional || component.conditional && (component.conditional.when || component.conditional.json || component.conditional.condition));\n}\n/**\n * Extension of standard #parseFloat(value) function, that also clears input string.\n *\n * @param {any} value\n *   The value to parse.\n *\n * @returns {Number}\n *   Parsed value.\n */\n\n\nfunction parseFloatExt(value) {\n  return parseFloat((0, _isString.default)(value) ? value.replace(/[^\\de.+-]/gi, '') : value);\n}\n/**\n * Formats provided value in way how Currency component uses it.\n *\n * @param {any} value\n *   The value to format.\n *\n * @returns {String}\n *   Value formatted for Currency component.\n */\n\n\nfunction formatAsCurrency(value) {\n  var parsedValue = parseFloatExt(value);\n\n  if ((0, _isNaN.default)(parsedValue)) {\n    return '';\n  }\n\n  var parts = (0, _round.default)(parsedValue, 2).toString().split('.');\n  parts[0] = (0, _chunk.default)(Array.from(parts[0]).reverse(), 3).reverse().map(function (part) {\n    return part.reverse().join('');\n  }).join(',');\n  parts[1] = (0, _pad.default)(parts[1], 2, '0');\n  return parts.join('.');\n}\n/**\n * Escapes RegEx characters in provided String value.\n *\n * @param {String} value\n *   String for escaping RegEx characters.\n * @returns {string}\n *   String with escaped RegEx characters.\n */\n\n\nfunction escapeRegExCharacters(value) {\n  return value.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, '\\\\$&');\n}\n/**\n * Get the value for a component key, in the given submission.\n *\n * @param {Object} submission\n *   A submission object to search.\n * @param {String} key\n *   A for components API key to search for.\n */\n\n\nfunction getValue(submission, key) {\n  var search = function search(data) {\n    if ((0, _isPlainObject.default)(data)) {\n      if ((0, _has.default)(data, key)) {\n        return _lodash.default.get(data, key);\n      }\n\n      var value = null;\n      (0, _forOwn.default)(data, function (prop) {\n        var result = search(prop);\n\n        if (!(0, _isNil.default)(result)) {\n          value = result;\n          return false;\n        }\n      });\n      return value;\n    } else {\n      return null;\n    }\n  };\n\n  return search(submission.data);\n}\n/**\n * Iterate over all components in a form and get string values for translation.\n * @param form\n */\n\n\nfunction getStrings(form) {\n  var properties = ['label', 'title', 'legend', 'tooltip', 'description', 'placeholder', 'prefix', 'suffix', 'errorLabel', 'content', 'html'];\n  var strings = [];\n  eachComponent(form.components, function (component) {\n    properties.forEach(function (property) {\n      if (component.hasOwnProperty(property) && component[property]) {\n        strings.push({\n          key: component.key,\n          type: component.type,\n          property: property,\n          string: component[property]\n        });\n      }\n    });\n\n    if ((!component.dataSrc || component.dataSrc === 'values') && component.hasOwnProperty('values') && Array.isArray(component.values) && component.values.length) {\n      component.values.forEach(function (value, index) {\n        strings.push({\n          key: component.key,\n          property: \"value[\".concat(index, \"].label\"),\n          string: component.values[index].label\n        });\n      });\n    } // Hard coded values from Day component\n\n\n    if (component.type === 'day') {\n      ['day', 'month', 'year', 'Day', 'Month', 'Year', 'january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'].forEach(function (string) {\n        strings.push({\n          key: component.key,\n          property: 'day',\n          string: string\n        });\n      });\n\n      if (component.fields.day.placeholder) {\n        strings.push({\n          key: component.key,\n          property: 'fields.day.placeholder',\n          string: component.fields.day.placeholder\n        });\n      }\n\n      if (component.fields.month.placeholder) {\n        strings.push({\n          key: component.key,\n          property: 'fields.month.placeholder',\n          string: component.fields.month.placeholder\n        });\n      }\n\n      if (component.fields.year.placeholder) {\n        strings.push({\n          key: component.key,\n          property: 'fields.year.placeholder',\n          string: component.fields.year.placeholder\n        });\n      }\n    }\n\n    if (component.type === 'editgrid') {\n      var string = component.addAnother || 'Add Another';\n\n      if (component.addAnother) {\n        strings.push({\n          key: component.key,\n          property: 'addAnother',\n          string: string\n        });\n      }\n    }\n\n    if (component.type === 'select') {\n      ['loading...', 'Type to search'].forEach(function (string) {\n        strings.push({\n          key: component.key,\n          property: 'select',\n          string: string\n        });\n      });\n    }\n  }, true);\n  return strings;\n}","map":{"version":3,"sources":["C:/Users/Devin/AOT_Projects/forms-flow-master/forms-flow-ai/forms-flow-web/node_modules/formiojs/utils/formUtils.js"],"names":["Object","defineProperty","exports","value","applyFormChanges","eachComponent","escapeRegExCharacters","findComponent","findComponents","flattenComponents","formatAsCurrency","generateFormChange","getComponent","getStrings","getValue","hasCondition","isLayoutComponent","matchComponent","parseFloatExt","removeComponent","searchComponents","require","_get","_interopRequireDefault","_set","_has","_clone","_forOwn","_isString","_isNaN","_isNil","_isPlainObject","_round","_chunk","_pad","_fastJsonPatch","_lodash","obj","__esModule","default","component","Boolean","columns","Array","isArray","rows","components","fn","includeAll","path","parent","inRecursion","noRecurse","forEach","hasColumns","hasRows","hasComps","newPath","key","concat","componentMap","layoutTypes","input","indexOf","type","tree","subPath","includes","column","row","query","matches","result","results","push","console","warn","index","slice","hasOwnProperty","colPath","rowPath","pop","length","splice","data","change","op","container","originalComponent","patches","compare","form","changes","failed","found","newComponent","oldComponent","_newComponent","applyPatch","newDocument","err","flattened","customConditional","conditional","when","json","condition","parseFloat","replace","parsedValue","parts","toString","split","from","reverse","map","part","join","submission","search","get","prop","properties","strings","property","string","dataSrc","values","label","fields","day","placeholder","month","year","addAnother"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.applyFormChanges = applyFormChanges;\nexports.eachComponent = eachComponent;\nexports.escapeRegExCharacters = escapeRegExCharacters;\nexports.findComponent = findComponent;\nexports.findComponents = findComponents;\nexports.flattenComponents = flattenComponents;\nexports.formatAsCurrency = formatAsCurrency;\nexports.generateFormChange = generateFormChange;\nexports.getComponent = getComponent;\nexports.getStrings = getStrings;\nexports.getValue = getValue;\nexports.hasCondition = hasCondition;\nexports.isLayoutComponent = isLayoutComponent;\nexports.matchComponent = matchComponent;\nexports.parseFloatExt = parseFloatExt;\nexports.removeComponent = removeComponent;\nexports.searchComponents = searchComponents;\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.array.splice.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.replace.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.regexp.to-string.js\");\n\nrequire(\"core-js/modules/es.array.join.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nvar _get = _interopRequireDefault(require(\"lodash/get\"));\n\nvar _set = _interopRequireDefault(require(\"lodash/set\"));\n\nvar _has = _interopRequireDefault(require(\"lodash/has\"));\n\nvar _clone = _interopRequireDefault(require(\"lodash/clone\"));\n\nvar _forOwn = _interopRequireDefault(require(\"lodash/forOwn\"));\n\nvar _isString = _interopRequireDefault(require(\"lodash/isString\"));\n\nvar _isNaN = _interopRequireDefault(require(\"lodash/isNaN\"));\n\nvar _isNil = _interopRequireDefault(require(\"lodash/isNil\"));\n\nvar _isPlainObject = _interopRequireDefault(require(\"lodash/isPlainObject\"));\n\nvar _round = _interopRequireDefault(require(\"lodash/round\"));\n\nvar _chunk = _interopRequireDefault(require(\"lodash/chunk\"));\n\nvar _pad = _interopRequireDefault(require(\"lodash/pad\"));\n\nvar _fastJsonPatch = require(\"fast-json-patch\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Determine if a component is a layout component or not.\n *\n * @param {Object} component\n *   The component to check.\n *\n * @returns {Boolean}\n *   Whether or not the component is a layout component.\n */\nfunction isLayoutComponent(component) {\n  return Boolean(component.columns && Array.isArray(component.columns) || component.rows && Array.isArray(component.rows) || component.components && Array.isArray(component.components));\n}\n/**\n * Iterate through each component within a form.\n *\n * @param {Object} components\n *   The components to iterate.\n * @param {Function} fn\n *   The iteration function to invoke for each component.\n * @param {Boolean} includeAll\n *   Whether or not to include layout components.\n * @param {String} path\n *   The current data path of the element. Example: data.user.firstName\n * @param {Object} parent\n *   The parent object.\n */\n\n\nfunction eachComponent(components, fn, includeAll, path, parent, inRecursion) {\n  if (!components) return;\n  path = path || '';\n\n  if (inRecursion) {\n    if (components.noRecurse) {\n      delete components.noRecurse;\n      return;\n    }\n\n    components.noRecurse = true;\n  }\n\n  components.forEach(function (component) {\n    if (!component) {\n      return;\n    }\n\n    var hasColumns = component.columns && Array.isArray(component.columns);\n    var hasRows = component.rows && Array.isArray(component.rows);\n    var hasComps = component.components && Array.isArray(component.components);\n    var noRecurse = false;\n    var newPath = component.key ? path ? \"\".concat(path, \".\").concat(component.key) : component.key : ''; // Keep track of parent references.\n\n    if (parent) {\n      // Ensure we don't create infinite JSON structures.\n      component.parent = (0, _clone.default)(parent);\n      delete component.parent.components;\n      delete component.parent.componentMap;\n      delete component.parent.columns;\n      delete component.parent.rows;\n    } // there's no need to add other layout components here because we expect that those would either have columns, rows or components\n\n\n    var layoutTypes = ['htmlelement', 'content'];\n    var isLayoutComponent = hasColumns || hasRows || hasComps && !component.input || layoutTypes.indexOf(component.type) > -1;\n\n    if (includeAll || component.tree || !isLayoutComponent) {\n      noRecurse = fn(component, newPath, components);\n    }\n\n    var subPath = function subPath() {\n      if (component.key && !['panel', 'table', 'well', 'columns', 'fieldset', 'tabs', 'form'].includes(component.type) && (['datagrid', 'container', 'editgrid', 'address', 'dynamicWizard', 'datatable'].includes(component.type) || component.tree)) {\n        return newPath;\n      } else if (component.key && component.type === 'form') {\n        return \"\".concat(newPath, \".data\");\n      }\n\n      return path;\n    };\n\n    if (!noRecurse) {\n      if (hasColumns) {\n        component.columns.forEach(function (column) {\n          return eachComponent(column.components, fn, includeAll, subPath(), parent ? component : null);\n        }, true);\n      } else if (hasRows) {\n        component.rows.forEach(function (row) {\n          if (Array.isArray(row)) {\n            row.forEach(function (column) {\n              return eachComponent(column.components, fn, includeAll, subPath(), parent ? component : null);\n            }, true);\n          }\n        });\n      } else if (hasComps) {\n        eachComponent(component.components, fn, includeAll, subPath(), parent ? component : null, true);\n      }\n    }\n  });\n\n  if (components.noRecurse) {\n    delete components.noRecurse;\n  }\n}\n/**\n * Matches if a component matches the query.\n *\n * @param component\n * @param query\n * @return {boolean}\n */\n\n\nfunction matchComponent(component, query) {\n  if ((0, _isString.default)(query)) {\n    return component.key === query || component.path === query;\n  } else {\n    var matches = false;\n    (0, _forOwn.default)(query, function (value, key) {\n      matches = (0, _get.default)(component, key) === value;\n\n      if (!matches) {\n        return false;\n      }\n    });\n    return matches;\n  }\n}\n/**\n * Get a component by its key\n *\n * @param {Object} components\n *   The components to iterate.\n * @param {String|Object} key\n *   The key of the component to get, or a query of the component to search.\n *\n * @returns {Object}\n *   The component that matches the given key, or undefined if not found.\n */\n\n\nfunction getComponent(components, key, includeAll) {\n  var result;\n  eachComponent(components, function (component, path) {\n    if (path === key || component.path === key) {\n      result = component;\n      return true;\n    }\n  }, includeAll);\n  return result;\n}\n/**\n * Finds a component provided a query of properties of that component.\n *\n * @param components\n * @param query\n * @return {*}\n */\n\n\nfunction searchComponents(components, query) {\n  var results = [];\n  eachComponent(components, function (component) {\n    if (matchComponent(component, query)) {\n      results.push(component);\n    }\n  }, true);\n  return results;\n}\n/**\n * Deprecated version of findComponents. Renamed to searchComponents.\n *\n * @param components\n * @param query\n * @returns {*}\n */\n\n\nfunction findComponents(components, query) {\n  console.warn('formio.js/utils findComponents is deprecated. Use searchComponents instead.');\n  return searchComponents(components, query);\n}\n/**\n * This function will find a component in a form and return the component AND THE PATH to the component in the form.\n * Path to the component is stored as an array of nested components and their indexes.The Path is being filled recursively\n * when you iterating through the nested structure.\n * If the component is not found the callback won't be called and function won't return anything.\n *\n * @param components\n * @param key\n * @param fn\n * @param path\n * @returns {*}\n */\n\n\nfunction findComponent(components, key, path, fn) {\n  if (!components) return;\n  path = path || [];\n\n  if (!key) {\n    return fn(components);\n  }\n\n  components.forEach(function (component, index) {\n    var newPath = path.slice(); // Add an index of the component it iterates through in nested structure\n\n    newPath.push(index);\n    if (!component) return;\n\n    if (component.hasOwnProperty('columns') && Array.isArray(component.columns)) {\n      newPath.push('columns');\n      component.columns.forEach(function (column, index) {\n        var colPath = newPath.slice();\n        colPath.push(index);\n        colPath.push('components');\n        findComponent(column.components, key, colPath, fn);\n      });\n    }\n\n    if (component.hasOwnProperty('rows') && Array.isArray(component.rows)) {\n      newPath.push('rows');\n      component.rows.forEach(function (row, index) {\n        var rowPath = newPath.slice();\n        rowPath.push(index);\n        row.forEach(function (column, index) {\n          var colPath = rowPath.slice();\n          colPath.push(index);\n          colPath.push('components');\n          findComponent(column.components, key, colPath, fn);\n        });\n      });\n    }\n\n    if (component.hasOwnProperty('components') && Array.isArray(component.components)) {\n      newPath.push('components');\n      findComponent(component.components, key, newPath, fn);\n    }\n\n    if (component.key === key) {\n      //Final callback if the component is found\n      fn(component, newPath, components);\n    }\n  });\n}\n/**\n * Remove a component by path.\n *\n * @param components\n * @param path\n */\n\n\nfunction removeComponent(components, path) {\n  // Using _.unset() leave a null value. Use Array splice instead.\n  var index = path.pop();\n\n  if (path.length !== 0) {\n    components = (0, _get.default)(components, path);\n  }\n\n  components.splice(index, 1);\n}\n\nfunction generateFormChange(type, data) {\n  var change;\n\n  switch (type) {\n    case 'add':\n      change = {\n        op: 'add',\n        key: data.component.key,\n        container: data.parent.key,\n        // Parent component\n        path: data.path,\n        // Path to container within parent component.\n        index: data.index,\n        // Index of component in parent container.\n        component: data.component\n      };\n      break;\n\n    case 'edit':\n      change = {\n        op: 'edit',\n        key: data.originalComponent.key,\n        patches: (0, _fastJsonPatch.compare)(data.originalComponent, data.component)\n      }; // Don't save if nothing changed.\n\n      if (!change.patches.length) {\n        change = null;\n      }\n\n      break;\n\n    case 'remove':\n      change = {\n        op: 'remove',\n        key: data.component.key\n      };\n      break;\n  }\n\n  return change;\n}\n\nfunction applyFormChanges(form, changes) {\n  var failed = [];\n  changes.forEach(function (change) {\n    var found = false;\n\n    switch (change.op) {\n      case 'add':\n        var newComponent = change.component; // Find the container to set the component in.\n\n        findComponent(form.components, change.container, null, function (parent) {\n          if (!change.container) {\n            parent = form;\n          } // A move will first run an add so remove any existing components with matching key before inserting.\n\n\n          findComponent(form.components, change.key, null, function (component, path) {\n            // If found, use the existing component. (If someone else edited it, the changes would be here)\n            newComponent = component;\n            removeComponent(form.components, path);\n          });\n          found = true;\n          var container = (0, _get.default)(parent, change.path);\n          container.splice(change.index, 0, newComponent);\n        });\n        break;\n\n      case 'remove':\n        findComponent(form.components, change.key, null, function (component, path) {\n          found = true;\n          var oldComponent = (0, _get.default)(form.components, path);\n\n          if (oldComponent.key !== component.key) {\n            path.pop();\n          }\n\n          removeComponent(form.components, path);\n        });\n        break;\n\n      case 'edit':\n        findComponent(form.components, change.key, null, function (component, path) {\n          found = true;\n\n          try {\n            var oldComponent = (0, _get.default)(form.components, path);\n            var _newComponent = (0, _fastJsonPatch.applyPatch)(component, change.patches).newDocument;\n\n            if (oldComponent.key !== _newComponent.key) {\n              path.pop();\n            }\n\n            (0, _set.default)(form.components, path, _newComponent);\n          } catch (err) {\n            failed.push(change);\n          }\n        });\n        break;\n\n      case 'move':\n        break;\n    }\n\n    if (!found) {\n      failed.push(change);\n    }\n  });\n  return {\n    form: form,\n    failed: failed\n  };\n}\n/**\n * Flatten the form components for data manipulation.\n *\n * @param {Object} components\n *   The components to iterate.\n * @param {Boolean} includeAll\n *   Whether or not to include layout components.\n *\n * @returns {Object}\n *   The flattened components map.\n */\n\n\nfunction flattenComponents(components, includeAll) {\n  var flattened = {};\n  eachComponent(components, function (component, path) {\n    flattened[path] = component;\n  }, includeAll);\n  return flattened;\n}\n/**\n * Returns if this component has a conditional statement.\n *\n * @param component - The component JSON schema.\n *\n * @returns {boolean} - TRUE - This component has a conditional, FALSE - No conditional provided.\n */\n\n\nfunction hasCondition(component) {\n  return Boolean(component.customConditional || component.conditional && (component.conditional.when || component.conditional.json || component.conditional.condition));\n}\n/**\n * Extension of standard #parseFloat(value) function, that also clears input string.\n *\n * @param {any} value\n *   The value to parse.\n *\n * @returns {Number}\n *   Parsed value.\n */\n\n\nfunction parseFloatExt(value) {\n  return parseFloat((0, _isString.default)(value) ? value.replace(/[^\\de.+-]/gi, '') : value);\n}\n/**\n * Formats provided value in way how Currency component uses it.\n *\n * @param {any} value\n *   The value to format.\n *\n * @returns {String}\n *   Value formatted for Currency component.\n */\n\n\nfunction formatAsCurrency(value) {\n  var parsedValue = parseFloatExt(value);\n\n  if ((0, _isNaN.default)(parsedValue)) {\n    return '';\n  }\n\n  var parts = (0, _round.default)(parsedValue, 2).toString().split('.');\n  parts[0] = (0, _chunk.default)(Array.from(parts[0]).reverse(), 3).reverse().map(function (part) {\n    return part.reverse().join('');\n  }).join(',');\n  parts[1] = (0, _pad.default)(parts[1], 2, '0');\n  return parts.join('.');\n}\n/**\n * Escapes RegEx characters in provided String value.\n *\n * @param {String} value\n *   String for escaping RegEx characters.\n * @returns {string}\n *   String with escaped RegEx characters.\n */\n\n\nfunction escapeRegExCharacters(value) {\n  return value.replace(/[-[\\]/{}()*+?.\\\\^$|]/g, '\\\\$&');\n}\n/**\n * Get the value for a component key, in the given submission.\n *\n * @param {Object} submission\n *   A submission object to search.\n * @param {String} key\n *   A for components API key to search for.\n */\n\n\nfunction getValue(submission, key) {\n  var search = function search(data) {\n    if ((0, _isPlainObject.default)(data)) {\n      if ((0, _has.default)(data, key)) {\n        return _lodash.default.get(data, key);\n      }\n\n      var value = null;\n      (0, _forOwn.default)(data, function (prop) {\n        var result = search(prop);\n\n        if (!(0, _isNil.default)(result)) {\n          value = result;\n          return false;\n        }\n      });\n      return value;\n    } else {\n      return null;\n    }\n  };\n\n  return search(submission.data);\n}\n/**\n * Iterate over all components in a form and get string values for translation.\n * @param form\n */\n\n\nfunction getStrings(form) {\n  var properties = ['label', 'title', 'legend', 'tooltip', 'description', 'placeholder', 'prefix', 'suffix', 'errorLabel', 'content', 'html'];\n  var strings = [];\n  eachComponent(form.components, function (component) {\n    properties.forEach(function (property) {\n      if (component.hasOwnProperty(property) && component[property]) {\n        strings.push({\n          key: component.key,\n          type: component.type,\n          property: property,\n          string: component[property]\n        });\n      }\n    });\n\n    if ((!component.dataSrc || component.dataSrc === 'values') && component.hasOwnProperty('values') && Array.isArray(component.values) && component.values.length) {\n      component.values.forEach(function (value, index) {\n        strings.push({\n          key: component.key,\n          property: \"value[\".concat(index, \"].label\"),\n          string: component.values[index].label\n        });\n      });\n    } // Hard coded values from Day component\n\n\n    if (component.type === 'day') {\n      ['day', 'month', 'year', 'Day', 'Month', 'Year', 'january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'].forEach(function (string) {\n        strings.push({\n          key: component.key,\n          property: 'day',\n          string: string\n        });\n      });\n\n      if (component.fields.day.placeholder) {\n        strings.push({\n          key: component.key,\n          property: 'fields.day.placeholder',\n          string: component.fields.day.placeholder\n        });\n      }\n\n      if (component.fields.month.placeholder) {\n        strings.push({\n          key: component.key,\n          property: 'fields.month.placeholder',\n          string: component.fields.month.placeholder\n        });\n      }\n\n      if (component.fields.year.placeholder) {\n        strings.push({\n          key: component.key,\n          property: 'fields.year.placeholder',\n          string: component.fields.year.placeholder\n        });\n      }\n    }\n\n    if (component.type === 'editgrid') {\n      var string = component.addAnother || 'Add Another';\n\n      if (component.addAnother) {\n        strings.push({\n          key: component.key,\n          property: 'addAnother',\n          string: string\n        });\n      }\n    }\n\n    if (component.type === 'select') {\n      ['loading...', 'Type to search'].forEach(function (string) {\n        strings.push({\n          key: component.key,\n          property: 'select',\n          string: string\n        });\n      });\n    }\n  }, true);\n  return strings;\n}"]},"metadata":{},"sourceType":"script"}