{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.string.includes.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.find.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.array.find-index.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _Webform2 = _interopRequireDefault(require(\"./Webform\"));\n\nvar _Formio = require(\"./Formio\");\n\nvar _utils = require(\"./utils/utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar Wizard = /*#__PURE__*/function (_Webform) {\n  _inherits(Wizard, _Webform);\n\n  var _super = _createSuper(Wizard);\n  /**\n   * Constructor for wizard based forms\n   * @param element Dom element to place this wizard.\n   * @param {Object} options Options object, supported options are:\n   *    - breadcrumbSettings.clickable: true (default) determines if the breadcrumb bar is clickable or not\n   *    - buttonSettings.show*(Previous, Next, Cancel): true (default) determines if the button is shown or not\n   *    - allowPrevious: false (default) determines if the breadcrumb bar is clickable or not for visited tabs\n   */\n\n\n  function Wizard() {\n    var _this;\n\n    _classCallCheck(this, Wizard);\n\n    var element, options;\n\n    if (arguments[0] instanceof HTMLElement || arguments[1]) {\n      element = arguments[0];\n      options = arguments[1] || {};\n    } else {\n      options = arguments[0] || {};\n    }\n\n    options.display = 'wizard';\n    _this = _super.call(this, element, options);\n    _this.pages = [];\n    _this.prefixComps = [];\n    _this.suffixComps = [];\n    _this.components = [];\n    _this.originalComponents = [];\n    _this.page = 0;\n    _this.currentPanel = null;\n    _this.currentPanels = null;\n    _this.currentNextPage = 0;\n    _this._seenPages = [0];\n    _this.subWizards = [];\n    _this.allPages = [];\n    _this.lastPromise = _nativePromiseOnly.default.resolve();\n    _this.enabledIndex = 0;\n    _this.editMode = false;\n    _this.originalOptions = _lodash.default.cloneDeep(_this.options);\n    return _this;\n  }\n\n  _createClass(Wizard, [{\n    key: \"isLastPage\",\n    value: function isLastPage() {\n      var next = this.getNextPage();\n\n      if (_lodash.default.isNumber(next)) {\n        return next === -1;\n      }\n\n      return _lodash.default.isNull(next);\n    }\n  }, {\n    key: \"getPages\",\n    value: function getPages() {\n      var _this2 = this;\n\n      var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _args$all = args.all,\n          all = _args$all === void 0 ? false : _args$all;\n      var pages = this.hasExtraPages ? this.components : this.pages;\n      var filteredPages = pages.filter(all ? _lodash.default.identity : function (p, index) {\n        return _this2._seenPages.includes(index);\n      });\n      return filteredPages;\n    }\n  }, {\n    key: \"hasExtraPages\",\n    get: function get() {\n      return !_lodash.default.isEmpty(this.subWizards);\n    }\n  }, {\n    key: \"data\",\n    get: function get() {\n      return _get(_getPrototypeOf(Wizard.prototype), \"data\", this);\n    },\n    set: function set(value) {\n      var _this3 = this;\n\n      this._data = value;\n\n      _lodash.default.each(this.getPages({\n        all: true\n      }), function (component) {\n        component.data = _this3.componentContext(component);\n      });\n    }\n  }, {\n    key: \"localData\",\n    get: function get() {\n      var _this$pages$this$page, _this$pages$this$page2;\n\n      return ((_this$pages$this$page = this.pages[this.page]) === null || _this$pages$this$page === void 0 ? void 0 : (_this$pages$this$page2 = _this$pages$this$page.root) === null || _this$pages$this$page2 === void 0 ? void 0 : _this$pages$this$page2.submission.data) || this.submission.data;\n    }\n  }, {\n    key: \"checkConditions\",\n    value: function checkConditions(data, flags, row) {\n      var visible = _get(_getPrototypeOf(Wizard.prototype), \"checkConditions\", this).call(this, data, flags, row);\n\n      this.establishPages(data);\n      return visible;\n    }\n  }, {\n    key: \"getComponents\",\n    value: function getComponents() {\n      return this.submitting ? this.getPages({\n        all: this.isLastPage()\n      }) : _get(_getPrototypeOf(Wizard.prototype), \"getComponents\", this).call(this);\n    }\n  }, {\n    key: \"resetValue\",\n    value: function resetValue() {\n      this.getPages({\n        all: true\n      }).forEach(function (page) {\n        return page.resetValue();\n      });\n      this.setPristine(true);\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this$pages,\n          _this4 = this; // Check for and initlize button settings object\n\n\n      this.options.buttonSettings = _lodash.default.defaults(this.options.buttonSettings, {\n        showPrevious: true,\n        showNext: true,\n        showSubmit: true,\n        showCancel: !this.options.readOnly\n      });\n\n      if (!this.isSecondInit) {\n        var _this$options, _this$options$breadcr;\n\n        this.isClickableDefined = (_this$options = this.options) === null || _this$options === void 0 ? void 0 : (_this$options$breadcr = _this$options.breadcrumbSettings) === null || _this$options$breadcr === void 0 ? void 0 : _this$options$breadcr.hasOwnProperty('clickable');\n        this.isSecondInit = true;\n      }\n\n      this.options.breadcrumbSettings = _lodash.default.defaults(this.options.breadcrumbSettings, {\n        clickable: true\n      });\n      this.options.allowPrevious = this.options.allowPrevious || false;\n      this.page = 0;\n\n      var onReady = _get(_getPrototypeOf(Wizard.prototype), \"init\", this).call(this);\n\n      this.setComponentSchema();\n\n      if ((_this$pages = this.pages) !== null && _this$pages !== void 0 && _this$pages[this.page]) {\n        this.component = this.pages[this.page].component;\n      }\n\n      this.on('subWizardsUpdated', function (subForm) {\n        var subWizard = _this4.subWizards.find(function (subWizard) {\n          var _subWizard$subForm;\n\n          return (subForm === null || subForm === void 0 ? void 0 : subForm.id) && ((_subWizard$subForm = subWizard.subForm) === null || _subWizard$subForm === void 0 ? void 0 : _subWizard$subForm.id) === (subForm === null || subForm === void 0 ? void 0 : subForm.id);\n        });\n\n        if (_this4.subWizards.length && subWizard) {\n          subWizard.subForm.setValue(subForm._submission, {}, true);\n\n          _this4.establishPages();\n\n          _this4.redraw();\n        }\n      });\n      return onReady;\n    }\n  }, {\n    key: \"wizardKey\",\n    get: function get() {\n      return \"wizard-\".concat(this.id);\n    }\n  }, {\n    key: \"wizard\",\n    get: function get() {\n      return this.form;\n    },\n    set: function set(form) {\n      this.setForm(form);\n    }\n  }, {\n    key: \"buttons\",\n    get: function get() {\n      var _this5 = this;\n\n      var buttons = {};\n      [{\n        name: 'cancel',\n        method: 'cancel'\n      }, {\n        name: 'previous',\n        method: 'prevPage'\n      }, {\n        name: 'next',\n        method: 'nextPage'\n      }, {\n        name: 'submit',\n        method: 'submit'\n      }].forEach(function (button) {\n        if (_this5.hasButton(button.name)) {\n          buttons[button.name] = button;\n        }\n      });\n      return buttons;\n    }\n  }, {\n    key: \"buttonOrder\",\n    get: function get() {\n      var _this$options$propert, _this$options$propert2, _this$options$propert3;\n\n      var defaultButtonOrder = ['cancel', 'previous', 'next', 'submit'];\n      return (_this$options$propert = (_this$options$propert2 = this.options.properties) === null || _this$options$propert2 === void 0 ? void 0 : (_this$options$propert3 = _this$options$propert2.wizardButtonOrder) === null || _this$options$propert3 === void 0 ? void 0 : _this$options$propert3.toLowerCase().split(', ')) !== null && _this$options$propert !== void 0 ? _this$options$propert : defaultButtonOrder;\n    }\n  }, {\n    key: \"renderContext\",\n    get: function get() {\n      var _this$root, _this$root$component;\n\n      return {\n        wizardKey: this.wizardKey,\n        isBreadcrumbClickable: this.isBreadcrumbClickable(),\n        isSubForm: !!this.parent && !((_this$root = this.root) !== null && _this$root !== void 0 && (_this$root$component = _this$root.component) !== null && _this$root$component !== void 0 && _this$root$component.type) === 'wizard',\n        panels: this.allPages.length ? this.allPages.map(function (page) {\n          return page.component;\n        }) : this.pages.map(function (page) {\n          return page.component;\n        }),\n        buttons: this.buttons,\n        currentPage: this.page,\n        buttonOrder: this.buttonOrder\n      };\n    }\n  }, {\n    key: \"prepareNavigationSettings\",\n    value: function prepareNavigationSettings(ctx) {\n      var currentPanel = this.currentPanel;\n\n      if (currentPanel && currentPanel.buttonSettings) {\n        Object.keys(currentPanel.buttonSettings).forEach(function () {\n          Object.keys(ctx.buttons).forEach(function (key) {\n            if (typeof currentPanel.buttonSettings[key] !== 'undefined' && !currentPanel.buttonSettings[key] || ctx.isSubForm) {\n              ctx.buttons[key] = null;\n            }\n          });\n        });\n      }\n\n      return this.renderTemplate('wizardNav', ctx);\n    }\n  }, {\n    key: \"prepareHeaderSettings\",\n    value: function prepareHeaderSettings(ctx, headerType) {\n      if (this.currentPanel && this.currentPanel.breadcrumb === 'none' || ctx.isSubForm) {\n        return null;\n      }\n\n      return this.renderTemplate(headerType, ctx);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var ctx = this.renderContext;\n\n      if (this.component.key) {\n        ctx.panels.map(function (panel) {\n          if (panel.key === _this6.component.key) {\n            _this6.currentPanel = panel;\n            ctx.wizardPageTooltip = _this6.getFormattedTooltip(panel.tooltip);\n          }\n        });\n      }\n\n      var wizardNav = this.prepareNavigationSettings(ctx);\n      var wizardHeaderType = \"wizardHeader\".concat(_lodash.default.get(this.form, 'settings.wizardHeaderType', ''));\n      var wizardHeader = this.prepareHeaderSettings(ctx, wizardHeaderType);\n      return this.renderTemplate('wizard', _objectSpread(_objectSpread({}, ctx), {}, {\n        className: _get(_getPrototypeOf(Wizard.prototype), \"getClassName\", this).call(this),\n        wizardHeader: wizardHeader,\n        wizardHeaderType: wizardHeaderType,\n        wizardNav: wizardNav,\n        components: this.renderComponents([].concat(_toConsumableArray(this.prefixComps), _toConsumableArray(this.currentPage.components), _toConsumableArray(this.suffixComps)))\n      }), this.builderMode ? 'builder' : 'form');\n    }\n  }, {\n    key: \"redrawNavigation\",\n    value: function redrawNavigation() {\n      if (this.element) {\n        var navElement = this.element.querySelector(\"#\".concat(this.wizardKey, \"-nav\"));\n\n        if (navElement) {\n          var _this$loadRefs;\n\n          this.detachNav();\n          navElement.outerHTML = this.renderTemplate('wizardNav', this.renderContext);\n          navElement = this.element.querySelector(\"#\".concat(this.wizardKey, \"-nav\"));\n          this.loadRefs(navElement, (_this$loadRefs = {}, _defineProperty(_this$loadRefs, \"\".concat(this.wizardKey, \"-cancel\"), 'single'), _defineProperty(_this$loadRefs, \"\".concat(this.wizardKey, \"-previous\"), 'single'), _defineProperty(_this$loadRefs, \"\".concat(this.wizardKey, \"-next\"), 'single'), _defineProperty(_this$loadRefs, \"\".concat(this.wizardKey, \"-submit\"), 'single'), _this$loadRefs));\n          this.attachNav();\n        }\n      }\n    }\n  }, {\n    key: \"redrawHeader\",\n    value: function redrawHeader() {\n      if (this.element) {\n        var headerElement = this.element.querySelector(\"#\".concat(this.wizardKey, \"-header\"));\n\n        if (headerElement) {\n          var _this$loadRefs2;\n\n          this.detachHeader();\n          headerElement.outerHTML = this.renderTemplate(\"wizardHeader\".concat(_lodash.default.get(this.form, 'settings.wizardHeaderType', '')), this.renderContext);\n          headerElement = this.element.querySelector(\"#\".concat(this.wizardKey, \"-header\"));\n          this.loadRefs(headerElement, (_this$loadRefs2 = {}, _defineProperty(_this$loadRefs2, \"\".concat(this.wizardKey, \"-link\"), 'multiple'), _defineProperty(_this$loadRefs2, \"\".concat(this.wizardKey, \"-tooltip\"), 'multiple'), _this$loadRefs2));\n          this.attachHeader();\n        }\n      }\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this$loadRefs3,\n          _this7 = this;\n\n      this.element = element;\n      this.loadRefs(element, (_this$loadRefs3 = {}, _defineProperty(_this$loadRefs3, this.wizardKey, 'single'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-header\"), 'single'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-cancel\"), 'single'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-previous\"), 'single'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-next\"), 'single'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-submit\"), 'single'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-link\"), 'multiple'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-tooltip\"), 'multiple'), _this$loadRefs3));\n\n      if ((this.options.readOnly || this.editMode) && !this.enabledIndex) {\n        var _this$pages2;\n\n        this.enabledIndex = ((_this$pages2 = this.pages) === null || _this$pages2 === void 0 ? void 0 : _this$pages2.length) - 1;\n      }\n\n      this.hook('attachWebform', element, this);\n      var promises = this.attachComponents(this.refs[this.wizardKey], [].concat(_toConsumableArray(this.prefixComps), _toConsumableArray(this.currentPage.components), _toConsumableArray(this.suffixComps)));\n      this.attachNav();\n      this.attachHeader();\n      return promises.then(function () {\n        _this7.emit('render', {\n          component: _this7.currentPage,\n          page: _this7.page\n        });\n\n        if (_this7.component.scrollToTop) {\n          _this7.scrollPageToTop();\n        }\n      });\n    }\n  }, {\n    key: \"scrollPageToTop\",\n    value: function scrollPageToTop() {\n      var _this$refs$;\n\n      var pageTop = (_this$refs$ = this.refs[\"\".concat(this.wizardKey, \"-header\")]) !== null && _this$refs$ !== void 0 ? _this$refs$ : this.refs[this.wizardKey];\n\n      if (!pageTop) {\n        return;\n      }\n\n      if ('scrollIntoView' in pageTop) {\n        pageTop.scrollIntoView(true);\n      } else {\n        this.scrollIntoView(pageTop);\n      }\n    }\n  }, {\n    key: \"isBreadcrumbClickable\",\n    value: function isBreadcrumbClickable() {\n      var _this8 = this;\n\n      var currentPage = null;\n      this.pages.map(function (page) {\n        if (_lodash.default.isEqual(_this8.currentPage.component, page.component)) {\n          currentPage = page;\n        }\n      });\n      return this.isClickableDefined ? this.options.breadcrumbSettings.clickable : _lodash.default.get(currentPage, 'component.breadcrumbClickable', true);\n    }\n  }, {\n    key: \"isAllowPrevious\",\n    value: function isAllowPrevious() {\n      var _this9 = this;\n\n      var currentPage = null;\n      this.pages.map(function (page) {\n        if (_lodash.default.isEqual(_this9.currentPage.component, page.component)) {\n          currentPage = page;\n        }\n      });\n      return _lodash.default.get(currentPage.component, 'allowPrevious', this.options.allowPrevious);\n    }\n  }, {\n    key: \"handleNaviageteOnEnter\",\n    value: function handleNaviageteOnEnter(event) {\n      if (event.keyCode === 13) {\n        var clickEvent = new CustomEvent('click');\n        var buttonElement = this.refs[\"\".concat(this.wizardKey, \"-\").concat(this.buttons.next.name)];\n\n        if (buttonElement) {\n          buttonElement.dispatchEvent(clickEvent);\n        }\n      }\n    }\n  }, {\n    key: \"handleSaveOnEnter\",\n    value: function handleSaveOnEnter(event) {\n      if (event.keyCode === 13) {\n        var clickEvent = new CustomEvent('click');\n        var buttonElement = this.refs[\"\".concat(this.wizardKey, \"-\").concat(this.buttons.submit.name)];\n\n        if (buttonElement) {\n          buttonElement.dispatchEvent(clickEvent);\n        }\n      }\n    }\n  }, {\n    key: \"attachNav\",\n    value: function attachNav() {\n      var _this10 = this;\n\n      if (this.component.navigateOnEnter) {\n        this.addEventListener(document, 'keyup', this.handleNaviageteOnEnter.bind(this));\n      }\n\n      if (this.component.saveOnEnter) {\n        this.addEventListener(document, 'keyup', this.handleSaveOnEnter.bind(this));\n      }\n\n      _lodash.default.each(this.buttons, function (button) {\n        var buttonElement = _this10.refs[\"\".concat(_this10.wizardKey, \"-\").concat(button.name)];\n\n        _this10.addEventListener(buttonElement, 'click', function (event) {\n          event.preventDefault(); // Disable the button until done.\n\n          buttonElement.setAttribute('disabled', 'disabled');\n\n          _this10.setLoading(buttonElement, true); // Call the button method, then re-enable the button.\n\n\n          _this10[button.method]().then(function () {\n            buttonElement.removeAttribute('disabled');\n\n            _this10.setLoading(buttonElement, false);\n          }).catch(function () {\n            buttonElement.removeAttribute('disabled');\n\n            _this10.setLoading(buttonElement, false);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"emitWizardPageSelected\",\n    value: function emitWizardPageSelected(index) {\n      this.emit('wizardPageSelected', this.pages[index], index);\n    }\n  }, {\n    key: \"attachHeader\",\n    value: function attachHeader() {\n      var _this11 = this;\n\n      var isAllowPrevious = this.isAllowPrevious();\n      this.attachTooltips(this.refs[\"\".concat(this.wizardKey, \"-tooltip\")], this.currentPanel.tooltip);\n\n      if (this.isBreadcrumbClickable() || isAllowPrevious) {\n        var _this$refs$2;\n\n        (_this$refs$2 = this.refs[\"\".concat(this.wizardKey, \"-link\")]) === null || _this$refs$2 === void 0 ? void 0 : _this$refs$2.forEach(function (link, index) {\n          if (!isAllowPrevious || index <= _this11.enabledIndex) {\n            _this11.addEventListener(link, 'click', function (event) {\n              _this11.emit('wizardNavigationClicked', _this11.pages[index]);\n\n              event.preventDefault();\n              return _this11.setPage(index).then(function () {\n                _this11.emitWizardPageSelected(index);\n              });\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"detachNav\",\n    value: function detachNav() {\n      var _this12 = this;\n\n      if (this.component.navigateOnEnter) {\n        this.removeEventListener(document, 'keyup', this.handleNaviageteOnEnter.bind(this));\n      }\n\n      if (this.component.saveOnEnter) {\n        this.removeEventListener(document, 'keyup', this.handleSaveOnEnter.bind(this));\n      }\n\n      _lodash.default.each(this.buttons, function (button) {\n        _this12.removeEventListener(_this12.refs[\"\".concat(_this12.wizardKey, \"-\").concat(button.name)], 'click');\n      });\n    }\n  }, {\n    key: \"detachHeader\",\n    value: function detachHeader() {\n      var _this13 = this;\n\n      if (this.refs[\"\".concat(this.wizardKey, \"-link\")]) {\n        this.refs[\"\".concat(this.wizardKey, \"-link\")].forEach(function (link) {\n          _this13.removeEventListener(link, 'click');\n        });\n      }\n    }\n  }, {\n    key: \"transformPages\",\n    value: function transformPages() {\n      var _this14 = this;\n\n      var allComponents = [];\n      var components = this.getSortedComponents(this);\n      var defferedComponents = [];\n      this.allPages = []; // Get all components including all nested components and line up in the correct order\n\n      var getAllComponents = function getAllComponents(nestedComp, compsArr) {\n        var pushAllowed = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        var nestedPages = [];\n        var dataArrayComponents = ['datagrid', 'editgrid', 'dynamicWizard'];\n        var currentComponents = nestedComp !== null && nestedComp !== void 0 && nestedComp.subForm ? _this14.getSortedComponents(nestedComp.subForm) : (nestedComp === null || nestedComp === void 0 ? void 0 : nestedComp.components) || [];\n        var visibleComponents = currentComponents.filter(function (comp) {\n          return comp._visible;\n        });\n        var filteredComponents = visibleComponents.filter(function (comp) {\n          return !dataArrayComponents.includes(comp.component.type) && (comp.type !== 'form' || comp.isNestedWizard);\n        });\n        var additionalComponents = visibleComponents.filter(function (comp) {\n          var _comp$subForm;\n\n          return ((_comp$subForm = comp.subForm) === null || _comp$subForm === void 0 ? void 0 : _comp$subForm._form.display) !== 'wizard';\n        });\n        var hasNested = false;\n        (0, _utils.eachComponent)(filteredComponents, function (comp) {\n          if (comp.component.type === 'panel' && comp !== null && comp !== void 0 && comp.parent.wizard && !getAllComponents(comp, compsArr, false)) {\n            if (pushAllowed) {\n              _this14.setRootPanelId(comp);\n\n              nestedPages.push(comp);\n            }\n\n            hasNested = true;\n          }\n\n          if (comp && comp.isNestedWizard && comp.subForm) {\n            var hasNestedForm = getAllComponents(comp, nestedPages, pushAllowed);\n\n            if (!hasNested) {\n              hasNested = hasNestedForm;\n            }\n          }\n        }, true);\n\n        if (nestedComp.component.type === 'panel') {\n          if (!hasNested && pushAllowed) {\n            _this14.setRootPanelId(nestedComp);\n\n            compsArr.push(nestedComp);\n          }\n\n          if (hasNested && additionalComponents.length) {\n            var newComp = _lodash.default.clone(nestedComp);\n\n            newComp.components = additionalComponents;\n\n            _this14.setRootPanelId(newComp);\n\n            defferedComponents.push(newComp);\n          }\n        }\n\n        if (pushAllowed) {\n          compsArr.push.apply(compsArr, _toConsumableArray(defferedComponents).concat(nestedPages));\n          defferedComponents = [];\n        }\n\n        return hasNested;\n      };\n\n      components.forEach(function (component) {\n        if (component.visible) {\n          getAllComponents(component, allComponents);\n        }\n      }, []); // recalculate pages only for root wizards, including the situation when the wizard is in a wrapper\n\n      if (this.localRoot && this.id === this.localRoot.id) {\n        allComponents.forEach(function (comp, index) {\n          comp.eachComponent(function (component) {\n            component.page = index;\n          });\n        });\n      }\n\n      this.allPages = allComponents;\n    }\n  }, {\n    key: \"getSortedComponents\",\n    value: function getSortedComponents(_ref) {\n      var components = _ref.components,\n          originalComponents = _ref.originalComponents; // sorts components if they were shuffled after the conditional logic\n\n      var currentComponents = [];\n      var currentPages = [];\n\n      if (components && components.length) {\n        components.map(function (page) {\n          if (page.component.type === 'panel') {\n            currentPages[page.component.key || page.component.title] = page;\n          }\n        });\n      }\n\n      originalComponents === null || originalComponents === void 0 ? void 0 : originalComponents.forEach(function (item) {\n        if (!item.key) {\n          item.key = item.title;\n        }\n\n        if (currentPages[item.key]) {\n          currentComponents.push(currentPages[item.key]);\n        }\n      });\n      return currentComponents;\n    }\n  }, {\n    key: \"findRootPanel\",\n    value: function findRootPanel(component) {\n      var _component$parent;\n\n      return (_component$parent = component.parent) !== null && _component$parent !== void 0 && _component$parent.parent ? this.findRootPanel(component.parent) : component;\n    }\n  }, {\n    key: \"setRootPanelId\",\n    value: function setRootPanelId(component) {\n      var _component$parent2;\n\n      if (component.rootPanelId && component.rootPanelId !== component.id) {\n        return;\n      }\n\n      var parent = (_component$parent2 = component.parent) !== null && _component$parent2 !== void 0 && _component$parent2.parent ? this.findRootPanel(component.parent) : component;\n      component.rootPanelId = parent.id;\n    }\n  }, {\n    key: \"establishPages\",\n    value: function establishPages() {\n      var _this15 = this;\n\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.data;\n      this.pages = [];\n      this.prefixComps = [];\n      this.suffixComps = [];\n      var visible = [];\n      var currentPages = {};\n\n      var pageOptions = _objectSpread(_objectSpread({}, _lodash.default.clone(this.options)), this.parent ? {\n        root: this\n      } : {});\n\n      if (this.components && this.components.length) {\n        this.components.forEach(function (page) {\n          if (page.component.type === 'panel') {\n            currentPages[page.component.key || page.component.title] = page;\n          }\n        });\n      }\n\n      if (this.originalComponents) {\n        this.originalComponents.forEach(function (item) {\n          if (item.type === 'panel') {\n            if (!item.key) {\n              item.key = item.title;\n            }\n\n            var page = currentPages[item.key];\n            var forceShow = _this15.options.show ? _this15.options.show[item.key] : false;\n            var forceHide = _this15.options.hide ? _this15.options.hide[item.key] : false;\n            var isVisible = !page ? (0, _utils.checkCondition)(item, data, data, _this15.component, _this15) && !item.hidden : page.visible;\n\n            if (forceShow) {\n              isVisible = true;\n            } else if (forceHide) {\n              isVisible = false;\n            }\n\n            if (isVisible) {\n              visible.push(item);\n\n              if (page) {\n                _this15.pages.push(page);\n              }\n            }\n\n            if (!page && isVisible) {\n              page = _this15.createComponent(item, pageOptions);\n              page.visible = isVisible;\n\n              _this15.pages.push(page);\n\n              page.eachComponent(function (component) {\n                component.page = _this15.pages.length - 1;\n              });\n            }\n          } else if (item.type !== 'button') {\n            if (!_this15.pages.length) {\n              _this15.prefixComps.push(_this15.createComponent(item, pageOptions));\n            } else {\n              _this15.suffixComps.push(_this15.createComponent(item, pageOptions));\n            }\n          }\n        });\n      }\n\n      if (this.pages.length) {\n        this.emit('pagesChanged');\n      }\n\n      this.transformPages();\n\n      if (this.allPages && this.allPages.length) {\n        this.updatePages();\n      }\n\n      return visible;\n    }\n  }, {\n    key: \"updatePages\",\n    value: function updatePages() {\n      this.pages = this.allPages;\n    }\n  }, {\n    key: \"addComponents\",\n    value: function addComponents() {\n      this.establishPages();\n    }\n  }, {\n    key: \"setPage\",\n    value: function setPage(num) {\n      var _this16 = this;\n\n      if (num === this.page) {\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      if (num >= 0 && num < this.pages.length) {\n        this.page = num;\n        this.pageFieldLogic(num);\n        this.getNextPage();\n        var parentNum = num;\n\n        if (this.hasExtraPages) {\n          var pageFromPages = this.pages[num];\n          var pageFromComponents = this.components[num];\n\n          if (!pageFromComponents || (pageFromPages === null || pageFromPages === void 0 ? void 0 : pageFromPages.id) !== pageFromComponents.id) {\n            parentNum = this.components.findIndex(function (comp) {\n              var _this16$pages, _this16$pages$parentN;\n\n              return comp.id === ((_this16$pages = _this16.pages) === null || _this16$pages === void 0 ? void 0 : (_this16$pages$parentN = _this16$pages[parentNum]) === null || _this16$pages$parentN === void 0 ? void 0 : _this16$pages$parentN.rootPanelId);\n            });\n          }\n        }\n\n        if (!this._seenPages.includes(parentNum)) {\n          this._seenPages = this._seenPages.concat(parentNum);\n        }\n\n        this.redraw().then(function () {\n          _this16.checkData(_this16.submission.data);\n        });\n        return _nativePromiseOnly.default.resolve();\n      } else if (!this.pages.length) {\n        this.redraw();\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      return _nativePromiseOnly.default.reject('Page not found');\n    }\n  }, {\n    key: \"pageFieldLogic\",\n    value: function pageFieldLogic(page) {\n      var _this$pages3;\n\n      if ((_this$pages3 = this.pages) !== null && _this$pages3 !== void 0 && _this$pages3[page]) {\n        // Handle field logic on pages.\n        this.component = this.pages[page].component;\n        this.originalComponent = (0, _utils.fastCloneDeep)(this.component);\n        this.fieldLogic(this.data); // If disabled changed, be sure to distribute the setting.\n\n        this.disabled = this.shouldDisabled;\n      }\n    }\n  }, {\n    key: \"currentPage\",\n    get: function get() {\n      return this.pages && this.pages.length >= this.page ? this.pages[this.page] : {\n        components: []\n      };\n    }\n  }, {\n    key: \"getNextPage\",\n    value: function getNextPage() {\n      var _this$pages4;\n\n      if ((_this$pages4 = this.pages) !== null && _this$pages4 !== void 0 && _this$pages4[this.page]) {\n        var data = this.submission.data;\n        var form = this.pages[this.page].component; // Check conditional nextPage\n\n        if (form) {\n          var page = this.pages.length > this.page + 1 && !this.showAllErrors ? this.page + 1 : -1;\n\n          if (form.nextPage) {\n            var next = this.evaluate(form.nextPage, {\n              next: page,\n              data: data,\n              page: page,\n              form: form\n            }, 'next');\n\n            if (next === null) {\n              this.currentNextPage = null;\n              return null;\n            }\n\n            var pageNum = parseInt(next, 10);\n\n            if (!isNaN(parseInt(pageNum, 10)) && isFinite(pageNum)) {\n              this.currentNextPage = pageNum;\n              return pageNum;\n            }\n\n            this.currentNextPage = this.getPageIndexByKey(next);\n            return this.currentNextPage;\n          }\n\n          this.currentNextPage = page;\n          return page;\n        }\n\n        this.currentNextPage = null;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getPreviousPage\",\n    value: function getPreviousPage() {\n      return this.page - 1;\n    }\n  }, {\n    key: \"beforeSubmit\",\n    value: function beforeSubmit() {\n      var pages = this.getPages();\n      return _nativePromiseOnly.default.all(pages.map(function (page) {\n        page.options.beforeSubmit = true;\n        return page.beforeSubmit();\n      }));\n    }\n  }, {\n    key: \"beforePage\",\n    value: function beforePage(next) {\n      var _this17 = this;\n\n      return new _nativePromiseOnly.default(function (resolve, reject) {\n        _this17.hook(next ? 'beforeNext' : 'beforePrev', _this17.currentPage, _this17.submission, function (err) {\n          if (err) {\n            _this17.showErrors(err, true);\n\n            reject(err);\n          }\n\n          var form = _this17.currentPage;\n\n          if (form) {\n            form.beforePage(next).then(resolve).catch(reject);\n          } else {\n            resolve();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"emitNextPage\",\n    value: function emitNextPage() {\n      this.emit('nextPage', {\n        page: this.page,\n        submission: this.submission\n      });\n    }\n  }, {\n    key: \"nextPage\",\n    value: function nextPage() {\n      var _this18 = this; // Read-only forms should not worry about validation before going to next page, nor should they submit.\n\n\n      if (this.options.readOnly) {\n        return this.beforePage(true).then(function () {\n          return _this18.setPage(_this18.getNextPage()).then(function () {\n            _this18.emitNextPage();\n          });\n        });\n      } // Validate the form, before go to the next page\n\n\n      if (this.checkValidity(this.localData, true, this.localData, true)) {\n        this.checkData(this.submission.data);\n        return this.beforePage(true).then(function () {\n          return _this18.setPage(_this18.getNextPage()).then(function () {\n            if (!(_this18.options.readOnly || _this18.editMode) && _this18.enabledIndex < _this18.page) {\n              _this18.enabledIndex = _this18.page;\n\n              _this18.redraw();\n            }\n\n            _this18.emitNextPage();\n          });\n        });\n      } else {\n        this.currentPage.components.forEach(function (comp) {\n          return comp.setPristine(false);\n        });\n        return _nativePromiseOnly.default.reject(this.showErrors([], true));\n      }\n    }\n  }, {\n    key: \"emitPrevPage\",\n    value: function emitPrevPage() {\n      this.emit('prevPage', {\n        page: this.page,\n        submission: this.submission\n      });\n    }\n  }, {\n    key: \"prevPage\",\n    value: function prevPage() {\n      var _this19 = this;\n\n      return this.beforePage().then(function () {\n        return _this19.setPage(_this19.getPreviousPage()).then(function () {\n          _this19.emitPrevPage();\n        });\n      });\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel(noconfirm) {\n      var _this20 = this;\n\n      if (this.options.readOnly) {\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      if (_get(_getPrototypeOf(Wizard.prototype), \"cancel\", this).call(this, noconfirm)) {\n        this.setPristine(true);\n        return this.setPage(0).then(function () {\n          if (_this20.enabledIndex) {\n            _this20.enabledIndex = 0;\n          }\n\n          _this20.onChange();\n\n          _this20.redraw();\n\n          return _this20.page;\n        });\n      }\n\n      return _nativePromiseOnly.default.resolve();\n    }\n  }, {\n    key: \"getPageIndexByKey\",\n    value: function getPageIndexByKey(key) {\n      var pageIndex = this.page;\n      this.pages.forEach(function (page, index) {\n        if (page.component.key === key) {\n          pageIndex = index;\n          return false;\n        }\n      });\n      return pageIndex;\n    }\n  }, {\n    key: \"schema\",\n    get: function get() {\n      return this.wizard;\n    }\n  }, {\n    key: \"setComponentSchema\",\n    value: function setComponentSchema() {\n      var _this21 = this;\n\n      var pageKeys = {};\n      this.originalComponents = [];\n      this.component.components.map(function (item) {\n        if (item.type === 'panel') {\n          item.key = (0, _utils.uniqueKey)(pageKeys, item.key || 'panel');\n          pageKeys[item.key] = true;\n\n          if (_this21.wizard.full) {\n            _this21.options.show = _this21.options.show || {};\n            _this21.options.show[item.key] = true;\n          } else if (_this21.wizard.hasOwnProperty('full') && !_lodash.default.isEqual(_this21.originalOptions.show, _this21.options.show)) {\n            _this21.options.show = _objectSpread({}, _this21.originalOptions.show || {});\n          }\n        }\n\n        _this21.originalComponents.push(_lodash.default.clone(item));\n      });\n\n      if (!Object.keys(pageKeys).length) {\n        var newPage = {\n          type: 'panel',\n          title: 'Page 1',\n          label: 'Page 1',\n          key: 'page1',\n          components: this.component.components\n        };\n        this.component.components = [newPage];\n        this.originalComponents.push(_lodash.default.clone(newPage));\n      }\n    }\n  }, {\n    key: \"setForm\",\n    value: function setForm(form, flags) {\n      if (!form) {\n        return;\n      }\n\n      return _get(_getPrototypeOf(Wizard.prototype), \"setForm\", this).call(this, form, flags);\n    }\n  }, {\n    key: \"onSetForm\",\n    value: function onSetForm(clonedForm, initialForm) {\n      this.component.components = (this._parentPath ? initialForm.components : clonedForm.components) || [];\n      this.setComponentSchema();\n    }\n  }, {\n    key: \"setEditMode\",\n    value: function setEditMode(submission) {\n      if (!this.editMode && submission._id && !this.options.readOnly) {\n        this.editMode = true;\n        this.redraw();\n      }\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(submission) {\n      var _this22 = this;\n\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var ignoreEstablishment = arguments.length > 2 ? arguments[2] : undefined;\n      this._submission = submission;\n\n      if (flags && flags.fromSubmission && (this.options.readOnly || this.editMode) && !this.isHtmlRenderMode()) {\n        this._data = submission.data;\n      }\n\n      if (!ignoreEstablishment) {\n        this.establishPages(submission.data);\n      }\n\n      var changed = this.getPages({\n        all: true\n      }).reduce(function (changed, page) {\n        return _this22.setNestedValue(page, submission.data, flags, changed) || changed;\n      }, false);\n\n      if (changed) {\n        this.pageFieldLogic(this.page);\n      }\n\n      this.setEditMode(submission);\n      return changed;\n    }\n  }, {\n    key: \"isClickable\",\n    value: function isClickable(page, index) {\n      return this.page !== index && (0, _utils.firstNonNil)([_lodash.default.get(page, 'breadcrumbClickable'), this.options.breadcrumbSettings.clickable]);\n    }\n  }, {\n    key: \"hasButton\",\n    value: function hasButton(name) {\n      var nextPage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.getNextPage(); // get page options with global options as default values\n\n      var _$get = _lodash.default.get(this.currentPage, 'component.buttonSettings', {}),\n          _$get$previous = _$get.previous,\n          previous = _$get$previous === void 0 ? this.options.buttonSettings.showPrevious : _$get$previous,\n          _$get$cancel = _$get.cancel,\n          cancel = _$get$cancel === void 0 ? this.options.buttonSettings.showCancel : _$get$cancel,\n          _$get$submit = _$get.submit,\n          submit = _$get$submit === void 0 ? this.options.buttonSettings.showSubmit : _$get$submit,\n          _$get$next = _$get.next,\n          next = _$get$next === void 0 ? this.options.buttonSettings.showNext : _$get$next;\n\n      switch (name) {\n        case 'previous':\n          return previous && this.getPreviousPage() > -1;\n\n        case 'next':\n          return next && nextPage !== null && nextPage !== -1;\n\n        case 'cancel':\n          return cancel && !this.options.readOnly;\n\n        case 'submit':\n          return submit && !this.options.readOnly && (nextPage === null || this.page === this.pages.length - 1);\n\n        default:\n          return true;\n      }\n    }\n  }, {\n    key: \"pageId\",\n    value: function pageId(page) {\n      if (page.key) {\n        // Some panels have the same key....\n        return \"\".concat(page.key, \"-\").concat(page.title);\n      } else if (page.components && page.components.length > 0) {\n        return this.pageId(page.components[0]);\n      } else {\n        return page.title;\n      }\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(flags, changed, modified, changes) {\n      var _this23 = this;\n\n      _get(_getPrototypeOf(Wizard.prototype), \"onChange\", this).call(this, flags, changed, modified, changes);\n\n      if (this.alert && !this.submitted) {\n        this.checkValidity(this.localData, false, this.localData, true);\n        this.showErrors([], true, true);\n      } // If the pages change, need to redraw the header.\n\n\n      var currentPanels;\n      var panels;\n      var currentNextPage = this.currentNextPage;\n\n      if (this.hasExtraPages) {\n        currentPanels = this.pages.map(function (page) {\n          return page.component.key;\n        });\n        this.establishPages();\n        panels = this.pages.map(function (page) {\n          return page.component.key;\n        });\n      } else {\n        var _this$currentPanel, _this$currentPanels;\n\n        currentPanels = this.currentPanels || this.pages.map(function (page) {\n          return page.component.key;\n        });\n        panels = this.establishPages().map(function (panel) {\n          return panel.key;\n        });\n        this.currentPanels = panels;\n\n        if ((_this$currentPanel = this.currentPanel) !== null && _this$currentPanel !== void 0 && _this$currentPanel.key && (_this$currentPanels = this.currentPanels) !== null && _this$currentPanels !== void 0 && _this$currentPanels.length) {\n          this.setPage(this.currentPanels.findIndex(function (panel) {\n            return panel === _this23.currentPanel.key;\n          }));\n        }\n      }\n\n      if (!_lodash.default.isEqual(panels, currentPanels) || flags && flags.fromSubmission) {\n        this.redrawHeader();\n      } // If the next page changes, then make sure to redraw navigation.\n\n\n      if (currentNextPage !== this.getNextPage()) {\n        this.redrawNavigation();\n      }\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      var _this$parent, _this$parent$componen;\n\n      if ((_this$parent = this.parent) !== null && _this$parent !== void 0 && (_this$parent$componen = _this$parent.component) !== null && _this$parent$componen !== void 0 && _this$parent$componen.modalEdit) {\n        return this.parent.redraw();\n      }\n\n      return _get(_getPrototypeOf(Wizard.prototype), \"redraw\", this).call(this);\n    }\n  }, {\n    key: \"checkValidity\",\n    value: function checkValidity(data, dirty, row, currentPageOnly) {\n      if (!this.checkCondition(row, data)) {\n        this.setCustomValidity('');\n        return true;\n      }\n\n      var components = !currentPageOnly || this.isLastPage() ? this.getComponents() : this.currentPage.components;\n      return components.reduce(function (check, comp) {\n        return comp.checkValidity(data, dirty, row) && check;\n      }, true);\n    }\n  }, {\n    key: \"errors\",\n    get: function get() {\n      if (!this.isLastPage()) {\n        return this.currentPage.errors;\n      }\n\n      return _get(_getPrototypeOf(Wizard.prototype), \"errors\", this);\n    }\n  }, {\n    key: \"focusOnComponent\",\n    value: function focusOnComponent(key) {\n      var _this24 = this;\n\n      var pageIndex = 0;\n\n      var _this$pages$filter = this.pages.filter(function (page, index) {\n        var hasComponent = false;\n        page.getComponent(key, function (comp) {\n          if (comp.path === key) {\n            pageIndex = index;\n            hasComponent = true;\n          }\n        });\n        return hasComponent;\n      }),\n          _this$pages$filter2 = _slicedToArray(_this$pages$filter, 1),\n          page = _this$pages$filter2[0];\n\n      if (page && page !== this.currentPage) {\n        return this.setPage(pageIndex).then(function () {\n          _this24.checkValidity(_this24.submission.data, true, _this24.submission.data);\n\n          _this24.showErrors();\n\n          _get(_getPrototypeOf(Wizard.prototype), \"focusOnComponent\", _this24).call(_this24, key);\n        });\n      }\n\n      return _get(_getPrototypeOf(Wizard.prototype), \"focusOnComponent\", this).call(this, key);\n    }\n  }]);\n\n  return Wizard;\n}(_Webform2.default);\n\nexports.default = Wizard;\nWizard.setBaseUrl = _Formio.GlobalFormio.setBaseUrl;\nWizard.setApiUrl = _Formio.GlobalFormio.setApiUrl;\nWizard.setAppUrl = _Formio.GlobalFormio.setAppUrl;","map":{"version":3,"sources":["C:/Users/Devin/AOT_Projects/jag-servebc/forms-flow-ai/forms-flow-web/node_modules/formiojs/Wizard.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","require","Object","defineProperty","exports","value","default","_nativePromiseOnly","_interopRequireDefault","_lodash","_Webform2","_Formio","_utils","__esModule","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","_i","_arr","_n","_d","_s","_e","call","next","done","push","length","err","Array","isArray","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","o","minLen","_arrayLikeToArray","n","toString","slice","name","from","test","iter","len","arr2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","target","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_get","property","receiver","Reflect","get","base","_superPropBase","desc","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","Wizard","_Webform","_super","_this","element","options","HTMLElement","display","pages","prefixComps","suffixComps","components","originalComponents","page","currentPanel","currentPanels","currentNextPage","_seenPages","subWizards","allPages","lastPromise","resolve","enabledIndex","editMode","originalOptions","cloneDeep","isLastPage","getNextPage","isNumber","isNull","getPages","_this2","args","undefined","_args$all","all","hasExtraPages","filteredPages","identity","index","includes","isEmpty","set","_this3","_data","each","component","data","componentContext","_this$pages$this$page","_this$pages$this$page2","root","submission","checkConditions","flags","row","visible","establishPages","getComponents","submitting","resetValue","setPristine","init","_this$pages","_this4","buttonSettings","defaults","showPrevious","showNext","showSubmit","showCancel","readOnly","isSecondInit","_this$options","_this$options$breadcr","isClickableDefined","breadcrumbSettings","clickable","allowPrevious","onReady","setComponentSchema","on","subForm","subWizard","find","_subWizard$subForm","id","setValue","_submission","redraw","concat","form","setForm","_this5","buttons","method","button","hasButton","_this$options$propert","_this$options$propert2","_this$options$propert3","defaultButtonOrder","properties","wizardButtonOrder","toLowerCase","split","_this$root","_this$root$component","wizardKey","isBreadcrumbClickable","isSubForm","parent","type","panels","map","currentPage","buttonOrder","prepareNavigationSettings","ctx","renderTemplate","prepareHeaderSettings","headerType","breadcrumb","render","_this6","renderContext","panel","wizardPageTooltip","getFormattedTooltip","tooltip","wizardNav","wizardHeaderType","wizardHeader","className","renderComponents","builderMode","redrawNavigation","navElement","querySelector","_this$loadRefs","detachNav","outerHTML","loadRefs","attachNav","redrawHeader","headerElement","_this$loadRefs2","detachHeader","attachHeader","attach","_this$loadRefs3","_this7","_this$pages2","hook","promises","attachComponents","refs","then","emit","scrollToTop","scrollPageToTop","_this$refs$","pageTop","scrollIntoView","_this8","isEqual","isAllowPrevious","_this9","handleNaviageteOnEnter","event","keyCode","clickEvent","CustomEvent","buttonElement","dispatchEvent","handleSaveOnEnter","submit","_this10","navigateOnEnter","addEventListener","document","bind","saveOnEnter","preventDefault","setAttribute","setLoading","removeAttribute","catch","emitWizardPageSelected","_this11","attachTooltips","_this$refs$2","link","setPage","_this12","removeEventListener","_this13","transformPages","_this14","allComponents","getSortedComponents","defferedComponents","getAllComponents","nestedComp","compsArr","pushAllowed","nestedPages","dataArrayComponents","currentComponents","visibleComponents","comp","_visible","filteredComponents","isNestedWizard","additionalComponents","_comp$subForm","_form","hasNested","eachComponent","wizard","setRootPanelId","hasNestedForm","newComp","clone","localRoot","_ref","currentPages","title","item","findRootPanel","_component$parent","_component$parent2","rootPanelId","_this15","pageOptions","forceShow","show","forceHide","hide","isVisible","checkCondition","hidden","createComponent","updatePages","addComponents","num","_this16","pageFieldLogic","parentNum","pageFromPages","pageFromComponents","findIndex","_this16$pages","_this16$pages$parentN","checkData","reject","_this$pages3","originalComponent","fastCloneDeep","fieldLogic","disabled","shouldDisabled","_this$pages4","showAllErrors","nextPage","evaluate","pageNum","parseInt","isNaN","isFinite","getPageIndexByKey","getPreviousPage","beforeSubmit","beforePage","_this17","showErrors","emitNextPage","_this18","checkValidity","localData","emitPrevPage","prevPage","_this19","cancel","noconfirm","_this20","onChange","pageIndex","_this21","pageKeys","uniqueKey","full","newPage","label","onSetForm","clonedForm","initialForm","_parentPath","setEditMode","_id","_this22","ignoreEstablishment","fromSubmission","isHtmlRenderMode","changed","reduce","setNestedValue","isClickable","firstNonNil","_$get","_$get$previous","previous","_$get$cancel","_$get$submit","_$get$next","pageId","modified","changes","_this23","alert","submitted","_this$currentPanel","_this$currentPanels","_this$parent","_this$parent$componen","modalEdit","dirty","currentPageOnly","setCustomValidity","check","errors","focusOnComponent","_this24","_this$pages$filter","hasComponent","getComponent","path","_this$pages$filter2","setBaseUrl","GlobalFormio","setApiUrl","setAppUrl"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.string.includes.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.find.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.string.split.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.array.find-index.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _Webform2 = _interopRequireDefault(require(\"./Webform\"));\n\nvar _Formio = require(\"./Formio\");\n\nvar _utils = require(\"./utils/utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar Wizard = /*#__PURE__*/function (_Webform) {\n  _inherits(Wizard, _Webform);\n\n  var _super = _createSuper(Wizard);\n\n  /**\n   * Constructor for wizard based forms\n   * @param element Dom element to place this wizard.\n   * @param {Object} options Options object, supported options are:\n   *    - breadcrumbSettings.clickable: true (default) determines if the breadcrumb bar is clickable or not\n   *    - buttonSettings.show*(Previous, Next, Cancel): true (default) determines if the button is shown or not\n   *    - allowPrevious: false (default) determines if the breadcrumb bar is clickable or not for visited tabs\n   */\n  function Wizard() {\n    var _this;\n\n    _classCallCheck(this, Wizard);\n\n    var element, options;\n\n    if (arguments[0] instanceof HTMLElement || arguments[1]) {\n      element = arguments[0];\n      options = arguments[1] || {};\n    } else {\n      options = arguments[0] || {};\n    }\n\n    options.display = 'wizard';\n    _this = _super.call(this, element, options);\n    _this.pages = [];\n    _this.prefixComps = [];\n    _this.suffixComps = [];\n    _this.components = [];\n    _this.originalComponents = [];\n    _this.page = 0;\n    _this.currentPanel = null;\n    _this.currentPanels = null;\n    _this.currentNextPage = 0;\n    _this._seenPages = [0];\n    _this.subWizards = [];\n    _this.allPages = [];\n    _this.lastPromise = _nativePromiseOnly.default.resolve();\n    _this.enabledIndex = 0;\n    _this.editMode = false;\n    _this.originalOptions = _lodash.default.cloneDeep(_this.options);\n    return _this;\n  }\n\n  _createClass(Wizard, [{\n    key: \"isLastPage\",\n    value: function isLastPage() {\n      var next = this.getNextPage();\n\n      if (_lodash.default.isNumber(next)) {\n        return next === -1;\n      }\n\n      return _lodash.default.isNull(next);\n    }\n  }, {\n    key: \"getPages\",\n    value: function getPages() {\n      var _this2 = this;\n\n      var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _args$all = args.all,\n          all = _args$all === void 0 ? false : _args$all;\n      var pages = this.hasExtraPages ? this.components : this.pages;\n      var filteredPages = pages.filter(all ? _lodash.default.identity : function (p, index) {\n        return _this2._seenPages.includes(index);\n      });\n      return filteredPages;\n    }\n  }, {\n    key: \"hasExtraPages\",\n    get: function get() {\n      return !_lodash.default.isEmpty(this.subWizards);\n    }\n  }, {\n    key: \"data\",\n    get: function get() {\n      return _get(_getPrototypeOf(Wizard.prototype), \"data\", this);\n    },\n    set: function set(value) {\n      var _this3 = this;\n\n      this._data = value;\n\n      _lodash.default.each(this.getPages({\n        all: true\n      }), function (component) {\n        component.data = _this3.componentContext(component);\n      });\n    }\n  }, {\n    key: \"localData\",\n    get: function get() {\n      var _this$pages$this$page, _this$pages$this$page2;\n\n      return ((_this$pages$this$page = this.pages[this.page]) === null || _this$pages$this$page === void 0 ? void 0 : (_this$pages$this$page2 = _this$pages$this$page.root) === null || _this$pages$this$page2 === void 0 ? void 0 : _this$pages$this$page2.submission.data) || this.submission.data;\n    }\n  }, {\n    key: \"checkConditions\",\n    value: function checkConditions(data, flags, row) {\n      var visible = _get(_getPrototypeOf(Wizard.prototype), \"checkConditions\", this).call(this, data, flags, row);\n\n      this.establishPages(data);\n      return visible;\n    }\n  }, {\n    key: \"getComponents\",\n    value: function getComponents() {\n      return this.submitting ? this.getPages({\n        all: this.isLastPage()\n      }) : _get(_getPrototypeOf(Wizard.prototype), \"getComponents\", this).call(this);\n    }\n  }, {\n    key: \"resetValue\",\n    value: function resetValue() {\n      this.getPages({\n        all: true\n      }).forEach(function (page) {\n        return page.resetValue();\n      });\n      this.setPristine(true);\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this$pages,\n          _this4 = this;\n\n      // Check for and initlize button settings object\n      this.options.buttonSettings = _lodash.default.defaults(this.options.buttonSettings, {\n        showPrevious: true,\n        showNext: true,\n        showSubmit: true,\n        showCancel: !this.options.readOnly\n      });\n\n      if (!this.isSecondInit) {\n        var _this$options, _this$options$breadcr;\n\n        this.isClickableDefined = (_this$options = this.options) === null || _this$options === void 0 ? void 0 : (_this$options$breadcr = _this$options.breadcrumbSettings) === null || _this$options$breadcr === void 0 ? void 0 : _this$options$breadcr.hasOwnProperty('clickable');\n        this.isSecondInit = true;\n      }\n\n      this.options.breadcrumbSettings = _lodash.default.defaults(this.options.breadcrumbSettings, {\n        clickable: true\n      });\n      this.options.allowPrevious = this.options.allowPrevious || false;\n      this.page = 0;\n\n      var onReady = _get(_getPrototypeOf(Wizard.prototype), \"init\", this).call(this);\n\n      this.setComponentSchema();\n\n      if ((_this$pages = this.pages) !== null && _this$pages !== void 0 && _this$pages[this.page]) {\n        this.component = this.pages[this.page].component;\n      }\n\n      this.on('subWizardsUpdated', function (subForm) {\n        var subWizard = _this4.subWizards.find(function (subWizard) {\n          var _subWizard$subForm;\n\n          return (subForm === null || subForm === void 0 ? void 0 : subForm.id) && ((_subWizard$subForm = subWizard.subForm) === null || _subWizard$subForm === void 0 ? void 0 : _subWizard$subForm.id) === (subForm === null || subForm === void 0 ? void 0 : subForm.id);\n        });\n\n        if (_this4.subWizards.length && subWizard) {\n          subWizard.subForm.setValue(subForm._submission, {}, true);\n\n          _this4.establishPages();\n\n          _this4.redraw();\n        }\n      });\n      return onReady;\n    }\n  }, {\n    key: \"wizardKey\",\n    get: function get() {\n      return \"wizard-\".concat(this.id);\n    }\n  }, {\n    key: \"wizard\",\n    get: function get() {\n      return this.form;\n    },\n    set: function set(form) {\n      this.setForm(form);\n    }\n  }, {\n    key: \"buttons\",\n    get: function get() {\n      var _this5 = this;\n\n      var buttons = {};\n      [{\n        name: 'cancel',\n        method: 'cancel'\n      }, {\n        name: 'previous',\n        method: 'prevPage'\n      }, {\n        name: 'next',\n        method: 'nextPage'\n      }, {\n        name: 'submit',\n        method: 'submit'\n      }].forEach(function (button) {\n        if (_this5.hasButton(button.name)) {\n          buttons[button.name] = button;\n        }\n      });\n      return buttons;\n    }\n  }, {\n    key: \"buttonOrder\",\n    get: function get() {\n      var _this$options$propert, _this$options$propert2, _this$options$propert3;\n\n      var defaultButtonOrder = ['cancel', 'previous', 'next', 'submit'];\n      return (_this$options$propert = (_this$options$propert2 = this.options.properties) === null || _this$options$propert2 === void 0 ? void 0 : (_this$options$propert3 = _this$options$propert2.wizardButtonOrder) === null || _this$options$propert3 === void 0 ? void 0 : _this$options$propert3.toLowerCase().split(', ')) !== null && _this$options$propert !== void 0 ? _this$options$propert : defaultButtonOrder;\n    }\n  }, {\n    key: \"renderContext\",\n    get: function get() {\n      var _this$root, _this$root$component;\n\n      return {\n        wizardKey: this.wizardKey,\n        isBreadcrumbClickable: this.isBreadcrumbClickable(),\n        isSubForm: !!this.parent && !((_this$root = this.root) !== null && _this$root !== void 0 && (_this$root$component = _this$root.component) !== null && _this$root$component !== void 0 && _this$root$component.type) === 'wizard',\n        panels: this.allPages.length ? this.allPages.map(function (page) {\n          return page.component;\n        }) : this.pages.map(function (page) {\n          return page.component;\n        }),\n        buttons: this.buttons,\n        currentPage: this.page,\n        buttonOrder: this.buttonOrder\n      };\n    }\n  }, {\n    key: \"prepareNavigationSettings\",\n    value: function prepareNavigationSettings(ctx) {\n      var currentPanel = this.currentPanel;\n\n      if (currentPanel && currentPanel.buttonSettings) {\n        Object.keys(currentPanel.buttonSettings).forEach(function () {\n          Object.keys(ctx.buttons).forEach(function (key) {\n            if (typeof currentPanel.buttonSettings[key] !== 'undefined' && !currentPanel.buttonSettings[key] || ctx.isSubForm) {\n              ctx.buttons[key] = null;\n            }\n          });\n        });\n      }\n\n      return this.renderTemplate('wizardNav', ctx);\n    }\n  }, {\n    key: \"prepareHeaderSettings\",\n    value: function prepareHeaderSettings(ctx, headerType) {\n      if (this.currentPanel && this.currentPanel.breadcrumb === 'none' || ctx.isSubForm) {\n        return null;\n      }\n\n      return this.renderTemplate(headerType, ctx);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var ctx = this.renderContext;\n\n      if (this.component.key) {\n        ctx.panels.map(function (panel) {\n          if (panel.key === _this6.component.key) {\n            _this6.currentPanel = panel;\n            ctx.wizardPageTooltip = _this6.getFormattedTooltip(panel.tooltip);\n          }\n        });\n      }\n\n      var wizardNav = this.prepareNavigationSettings(ctx);\n      var wizardHeaderType = \"wizardHeader\".concat(_lodash.default.get(this.form, 'settings.wizardHeaderType', ''));\n      var wizardHeader = this.prepareHeaderSettings(ctx, wizardHeaderType);\n      return this.renderTemplate('wizard', _objectSpread(_objectSpread({}, ctx), {}, {\n        className: _get(_getPrototypeOf(Wizard.prototype), \"getClassName\", this).call(this),\n        wizardHeader: wizardHeader,\n        wizardHeaderType: wizardHeaderType,\n        wizardNav: wizardNav,\n        components: this.renderComponents([].concat(_toConsumableArray(this.prefixComps), _toConsumableArray(this.currentPage.components), _toConsumableArray(this.suffixComps)))\n      }), this.builderMode ? 'builder' : 'form');\n    }\n  }, {\n    key: \"redrawNavigation\",\n    value: function redrawNavigation() {\n      if (this.element) {\n        var navElement = this.element.querySelector(\"#\".concat(this.wizardKey, \"-nav\"));\n\n        if (navElement) {\n          var _this$loadRefs;\n\n          this.detachNav();\n          navElement.outerHTML = this.renderTemplate('wizardNav', this.renderContext);\n          navElement = this.element.querySelector(\"#\".concat(this.wizardKey, \"-nav\"));\n          this.loadRefs(navElement, (_this$loadRefs = {}, _defineProperty(_this$loadRefs, \"\".concat(this.wizardKey, \"-cancel\"), 'single'), _defineProperty(_this$loadRefs, \"\".concat(this.wizardKey, \"-previous\"), 'single'), _defineProperty(_this$loadRefs, \"\".concat(this.wizardKey, \"-next\"), 'single'), _defineProperty(_this$loadRefs, \"\".concat(this.wizardKey, \"-submit\"), 'single'), _this$loadRefs));\n          this.attachNav();\n        }\n      }\n    }\n  }, {\n    key: \"redrawHeader\",\n    value: function redrawHeader() {\n      if (this.element) {\n        var headerElement = this.element.querySelector(\"#\".concat(this.wizardKey, \"-header\"));\n\n        if (headerElement) {\n          var _this$loadRefs2;\n\n          this.detachHeader();\n          headerElement.outerHTML = this.renderTemplate(\"wizardHeader\".concat(_lodash.default.get(this.form, 'settings.wizardHeaderType', '')), this.renderContext);\n          headerElement = this.element.querySelector(\"#\".concat(this.wizardKey, \"-header\"));\n          this.loadRefs(headerElement, (_this$loadRefs2 = {}, _defineProperty(_this$loadRefs2, \"\".concat(this.wizardKey, \"-link\"), 'multiple'), _defineProperty(_this$loadRefs2, \"\".concat(this.wizardKey, \"-tooltip\"), 'multiple'), _this$loadRefs2));\n          this.attachHeader();\n        }\n      }\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      var _this$loadRefs3,\n          _this7 = this;\n\n      this.element = element;\n      this.loadRefs(element, (_this$loadRefs3 = {}, _defineProperty(_this$loadRefs3, this.wizardKey, 'single'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-header\"), 'single'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-cancel\"), 'single'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-previous\"), 'single'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-next\"), 'single'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-submit\"), 'single'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-link\"), 'multiple'), _defineProperty(_this$loadRefs3, \"\".concat(this.wizardKey, \"-tooltip\"), 'multiple'), _this$loadRefs3));\n\n      if ((this.options.readOnly || this.editMode) && !this.enabledIndex) {\n        var _this$pages2;\n\n        this.enabledIndex = ((_this$pages2 = this.pages) === null || _this$pages2 === void 0 ? void 0 : _this$pages2.length) - 1;\n      }\n\n      this.hook('attachWebform', element, this);\n      var promises = this.attachComponents(this.refs[this.wizardKey], [].concat(_toConsumableArray(this.prefixComps), _toConsumableArray(this.currentPage.components), _toConsumableArray(this.suffixComps)));\n      this.attachNav();\n      this.attachHeader();\n      return promises.then(function () {\n        _this7.emit('render', {\n          component: _this7.currentPage,\n          page: _this7.page\n        });\n\n        if (_this7.component.scrollToTop) {\n          _this7.scrollPageToTop();\n        }\n      });\n    }\n  }, {\n    key: \"scrollPageToTop\",\n    value: function scrollPageToTop() {\n      var _this$refs$;\n\n      var pageTop = (_this$refs$ = this.refs[\"\".concat(this.wizardKey, \"-header\")]) !== null && _this$refs$ !== void 0 ? _this$refs$ : this.refs[this.wizardKey];\n\n      if (!pageTop) {\n        return;\n      }\n\n      if ('scrollIntoView' in pageTop) {\n        pageTop.scrollIntoView(true);\n      } else {\n        this.scrollIntoView(pageTop);\n      }\n    }\n  }, {\n    key: \"isBreadcrumbClickable\",\n    value: function isBreadcrumbClickable() {\n      var _this8 = this;\n\n      var currentPage = null;\n      this.pages.map(function (page) {\n        if (_lodash.default.isEqual(_this8.currentPage.component, page.component)) {\n          currentPage = page;\n        }\n      });\n      return this.isClickableDefined ? this.options.breadcrumbSettings.clickable : _lodash.default.get(currentPage, 'component.breadcrumbClickable', true);\n    }\n  }, {\n    key: \"isAllowPrevious\",\n    value: function isAllowPrevious() {\n      var _this9 = this;\n\n      var currentPage = null;\n      this.pages.map(function (page) {\n        if (_lodash.default.isEqual(_this9.currentPage.component, page.component)) {\n          currentPage = page;\n        }\n      });\n      return _lodash.default.get(currentPage.component, 'allowPrevious', this.options.allowPrevious);\n    }\n  }, {\n    key: \"handleNaviageteOnEnter\",\n    value: function handleNaviageteOnEnter(event) {\n      if (event.keyCode === 13) {\n        var clickEvent = new CustomEvent('click');\n        var buttonElement = this.refs[\"\".concat(this.wizardKey, \"-\").concat(this.buttons.next.name)];\n\n        if (buttonElement) {\n          buttonElement.dispatchEvent(clickEvent);\n        }\n      }\n    }\n  }, {\n    key: \"handleSaveOnEnter\",\n    value: function handleSaveOnEnter(event) {\n      if (event.keyCode === 13) {\n        var clickEvent = new CustomEvent('click');\n        var buttonElement = this.refs[\"\".concat(this.wizardKey, \"-\").concat(this.buttons.submit.name)];\n\n        if (buttonElement) {\n          buttonElement.dispatchEvent(clickEvent);\n        }\n      }\n    }\n  }, {\n    key: \"attachNav\",\n    value: function attachNav() {\n      var _this10 = this;\n\n      if (this.component.navigateOnEnter) {\n        this.addEventListener(document, 'keyup', this.handleNaviageteOnEnter.bind(this));\n      }\n\n      if (this.component.saveOnEnter) {\n        this.addEventListener(document, 'keyup', this.handleSaveOnEnter.bind(this));\n      }\n\n      _lodash.default.each(this.buttons, function (button) {\n        var buttonElement = _this10.refs[\"\".concat(_this10.wizardKey, \"-\").concat(button.name)];\n\n        _this10.addEventListener(buttonElement, 'click', function (event) {\n          event.preventDefault(); // Disable the button until done.\n\n          buttonElement.setAttribute('disabled', 'disabled');\n\n          _this10.setLoading(buttonElement, true); // Call the button method, then re-enable the button.\n\n\n          _this10[button.method]().then(function () {\n            buttonElement.removeAttribute('disabled');\n\n            _this10.setLoading(buttonElement, false);\n          }).catch(function () {\n            buttonElement.removeAttribute('disabled');\n\n            _this10.setLoading(buttonElement, false);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"emitWizardPageSelected\",\n    value: function emitWizardPageSelected(index) {\n      this.emit('wizardPageSelected', this.pages[index], index);\n    }\n  }, {\n    key: \"attachHeader\",\n    value: function attachHeader() {\n      var _this11 = this;\n\n      var isAllowPrevious = this.isAllowPrevious();\n      this.attachTooltips(this.refs[\"\".concat(this.wizardKey, \"-tooltip\")], this.currentPanel.tooltip);\n\n      if (this.isBreadcrumbClickable() || isAllowPrevious) {\n        var _this$refs$2;\n\n        (_this$refs$2 = this.refs[\"\".concat(this.wizardKey, \"-link\")]) === null || _this$refs$2 === void 0 ? void 0 : _this$refs$2.forEach(function (link, index) {\n          if (!isAllowPrevious || index <= _this11.enabledIndex) {\n            _this11.addEventListener(link, 'click', function (event) {\n              _this11.emit('wizardNavigationClicked', _this11.pages[index]);\n\n              event.preventDefault();\n              return _this11.setPage(index).then(function () {\n                _this11.emitWizardPageSelected(index);\n              });\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"detachNav\",\n    value: function detachNav() {\n      var _this12 = this;\n\n      if (this.component.navigateOnEnter) {\n        this.removeEventListener(document, 'keyup', this.handleNaviageteOnEnter.bind(this));\n      }\n\n      if (this.component.saveOnEnter) {\n        this.removeEventListener(document, 'keyup', this.handleSaveOnEnter.bind(this));\n      }\n\n      _lodash.default.each(this.buttons, function (button) {\n        _this12.removeEventListener(_this12.refs[\"\".concat(_this12.wizardKey, \"-\").concat(button.name)], 'click');\n      });\n    }\n  }, {\n    key: \"detachHeader\",\n    value: function detachHeader() {\n      var _this13 = this;\n\n      if (this.refs[\"\".concat(this.wizardKey, \"-link\")]) {\n        this.refs[\"\".concat(this.wizardKey, \"-link\")].forEach(function (link) {\n          _this13.removeEventListener(link, 'click');\n        });\n      }\n    }\n  }, {\n    key: \"transformPages\",\n    value: function transformPages() {\n      var _this14 = this;\n\n      var allComponents = [];\n      var components = this.getSortedComponents(this);\n      var defferedComponents = [];\n      this.allPages = []; // Get all components including all nested components and line up in the correct order\n\n      var getAllComponents = function getAllComponents(nestedComp, compsArr) {\n        var pushAllowed = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        var nestedPages = [];\n        var dataArrayComponents = ['datagrid', 'editgrid', 'dynamicWizard'];\n        var currentComponents = nestedComp !== null && nestedComp !== void 0 && nestedComp.subForm ? _this14.getSortedComponents(nestedComp.subForm) : (nestedComp === null || nestedComp === void 0 ? void 0 : nestedComp.components) || [];\n        var visibleComponents = currentComponents.filter(function (comp) {\n          return comp._visible;\n        });\n        var filteredComponents = visibleComponents.filter(function (comp) {\n          return !dataArrayComponents.includes(comp.component.type) && (comp.type !== 'form' || comp.isNestedWizard);\n        });\n        var additionalComponents = visibleComponents.filter(function (comp) {\n          var _comp$subForm;\n\n          return ((_comp$subForm = comp.subForm) === null || _comp$subForm === void 0 ? void 0 : _comp$subForm._form.display) !== 'wizard';\n        });\n        var hasNested = false;\n        (0, _utils.eachComponent)(filteredComponents, function (comp) {\n          if (comp.component.type === 'panel' && comp !== null && comp !== void 0 && comp.parent.wizard && !getAllComponents(comp, compsArr, false)) {\n            if (pushAllowed) {\n              _this14.setRootPanelId(comp);\n\n              nestedPages.push(comp);\n            }\n\n            hasNested = true;\n          }\n\n          if (comp && comp.isNestedWizard && comp.subForm) {\n            var hasNestedForm = getAllComponents(comp, nestedPages, pushAllowed);\n\n            if (!hasNested) {\n              hasNested = hasNestedForm;\n            }\n          }\n        }, true);\n\n        if (nestedComp.component.type === 'panel') {\n          if (!hasNested && pushAllowed) {\n            _this14.setRootPanelId(nestedComp);\n\n            compsArr.push(nestedComp);\n          }\n\n          if (hasNested && additionalComponents.length) {\n            var newComp = _lodash.default.clone(nestedComp);\n\n            newComp.components = additionalComponents;\n\n            _this14.setRootPanelId(newComp);\n\n            defferedComponents.push(newComp);\n          }\n        }\n\n        if (pushAllowed) {\n          compsArr.push.apply(compsArr, _toConsumableArray(defferedComponents).concat(nestedPages));\n          defferedComponents = [];\n        }\n\n        return hasNested;\n      };\n\n      components.forEach(function (component) {\n        if (component.visible) {\n          getAllComponents(component, allComponents);\n        }\n      }, []); // recalculate pages only for root wizards, including the situation when the wizard is in a wrapper\n\n      if (this.localRoot && this.id === this.localRoot.id) {\n        allComponents.forEach(function (comp, index) {\n          comp.eachComponent(function (component) {\n            component.page = index;\n          });\n        });\n      }\n\n      this.allPages = allComponents;\n    }\n  }, {\n    key: \"getSortedComponents\",\n    value: function getSortedComponents(_ref) {\n      var components = _ref.components,\n          originalComponents = _ref.originalComponents;\n      // sorts components if they were shuffled after the conditional logic\n      var currentComponents = [];\n      var currentPages = [];\n\n      if (components && components.length) {\n        components.map(function (page) {\n          if (page.component.type === 'panel') {\n            currentPages[page.component.key || page.component.title] = page;\n          }\n        });\n      }\n\n      originalComponents === null || originalComponents === void 0 ? void 0 : originalComponents.forEach(function (item) {\n        if (!item.key) {\n          item.key = item.title;\n        }\n\n        if (currentPages[item.key]) {\n          currentComponents.push(currentPages[item.key]);\n        }\n      });\n      return currentComponents;\n    }\n  }, {\n    key: \"findRootPanel\",\n    value: function findRootPanel(component) {\n      var _component$parent;\n\n      return (_component$parent = component.parent) !== null && _component$parent !== void 0 && _component$parent.parent ? this.findRootPanel(component.parent) : component;\n    }\n  }, {\n    key: \"setRootPanelId\",\n    value: function setRootPanelId(component) {\n      var _component$parent2;\n\n      if (component.rootPanelId && component.rootPanelId !== component.id) {\n        return;\n      }\n\n      var parent = (_component$parent2 = component.parent) !== null && _component$parent2 !== void 0 && _component$parent2.parent ? this.findRootPanel(component.parent) : component;\n      component.rootPanelId = parent.id;\n    }\n  }, {\n    key: \"establishPages\",\n    value: function establishPages() {\n      var _this15 = this;\n\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.data;\n      this.pages = [];\n      this.prefixComps = [];\n      this.suffixComps = [];\n      var visible = [];\n      var currentPages = {};\n\n      var pageOptions = _objectSpread(_objectSpread({}, _lodash.default.clone(this.options)), this.parent ? {\n        root: this\n      } : {});\n\n      if (this.components && this.components.length) {\n        this.components.forEach(function (page) {\n          if (page.component.type === 'panel') {\n            currentPages[page.component.key || page.component.title] = page;\n          }\n        });\n      }\n\n      if (this.originalComponents) {\n        this.originalComponents.forEach(function (item) {\n          if (item.type === 'panel') {\n            if (!item.key) {\n              item.key = item.title;\n            }\n\n            var page = currentPages[item.key];\n            var forceShow = _this15.options.show ? _this15.options.show[item.key] : false;\n            var forceHide = _this15.options.hide ? _this15.options.hide[item.key] : false;\n            var isVisible = !page ? (0, _utils.checkCondition)(item, data, data, _this15.component, _this15) && !item.hidden : page.visible;\n\n            if (forceShow) {\n              isVisible = true;\n            } else if (forceHide) {\n              isVisible = false;\n            }\n\n            if (isVisible) {\n              visible.push(item);\n\n              if (page) {\n                _this15.pages.push(page);\n              }\n            }\n\n            if (!page && isVisible) {\n              page = _this15.createComponent(item, pageOptions);\n              page.visible = isVisible;\n\n              _this15.pages.push(page);\n\n              page.eachComponent(function (component) {\n                component.page = _this15.pages.length - 1;\n              });\n            }\n          } else if (item.type !== 'button') {\n            if (!_this15.pages.length) {\n              _this15.prefixComps.push(_this15.createComponent(item, pageOptions));\n            } else {\n              _this15.suffixComps.push(_this15.createComponent(item, pageOptions));\n            }\n          }\n        });\n      }\n\n      if (this.pages.length) {\n        this.emit('pagesChanged');\n      }\n\n      this.transformPages();\n\n      if (this.allPages && this.allPages.length) {\n        this.updatePages();\n      }\n\n      return visible;\n    }\n  }, {\n    key: \"updatePages\",\n    value: function updatePages() {\n      this.pages = this.allPages;\n    }\n  }, {\n    key: \"addComponents\",\n    value: function addComponents() {\n      this.establishPages();\n    }\n  }, {\n    key: \"setPage\",\n    value: function setPage(num) {\n      var _this16 = this;\n\n      if (num === this.page) {\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      if (num >= 0 && num < this.pages.length) {\n        this.page = num;\n        this.pageFieldLogic(num);\n        this.getNextPage();\n        var parentNum = num;\n\n        if (this.hasExtraPages) {\n          var pageFromPages = this.pages[num];\n          var pageFromComponents = this.components[num];\n\n          if (!pageFromComponents || (pageFromPages === null || pageFromPages === void 0 ? void 0 : pageFromPages.id) !== pageFromComponents.id) {\n            parentNum = this.components.findIndex(function (comp) {\n              var _this16$pages, _this16$pages$parentN;\n\n              return comp.id === ((_this16$pages = _this16.pages) === null || _this16$pages === void 0 ? void 0 : (_this16$pages$parentN = _this16$pages[parentNum]) === null || _this16$pages$parentN === void 0 ? void 0 : _this16$pages$parentN.rootPanelId);\n            });\n          }\n        }\n\n        if (!this._seenPages.includes(parentNum)) {\n          this._seenPages = this._seenPages.concat(parentNum);\n        }\n\n        this.redraw().then(function () {\n          _this16.checkData(_this16.submission.data);\n        });\n        return _nativePromiseOnly.default.resolve();\n      } else if (!this.pages.length) {\n        this.redraw();\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      return _nativePromiseOnly.default.reject('Page not found');\n    }\n  }, {\n    key: \"pageFieldLogic\",\n    value: function pageFieldLogic(page) {\n      var _this$pages3;\n\n      if ((_this$pages3 = this.pages) !== null && _this$pages3 !== void 0 && _this$pages3[page]) {\n        // Handle field logic on pages.\n        this.component = this.pages[page].component;\n        this.originalComponent = (0, _utils.fastCloneDeep)(this.component);\n        this.fieldLogic(this.data); // If disabled changed, be sure to distribute the setting.\n\n        this.disabled = this.shouldDisabled;\n      }\n    }\n  }, {\n    key: \"currentPage\",\n    get: function get() {\n      return this.pages && this.pages.length >= this.page ? this.pages[this.page] : {\n        components: []\n      };\n    }\n  }, {\n    key: \"getNextPage\",\n    value: function getNextPage() {\n      var _this$pages4;\n\n      if ((_this$pages4 = this.pages) !== null && _this$pages4 !== void 0 && _this$pages4[this.page]) {\n        var data = this.submission.data;\n        var form = this.pages[this.page].component; // Check conditional nextPage\n\n        if (form) {\n          var page = this.pages.length > this.page + 1 && !this.showAllErrors ? this.page + 1 : -1;\n\n          if (form.nextPage) {\n            var next = this.evaluate(form.nextPage, {\n              next: page,\n              data: data,\n              page: page,\n              form: form\n            }, 'next');\n\n            if (next === null) {\n              this.currentNextPage = null;\n              return null;\n            }\n\n            var pageNum = parseInt(next, 10);\n\n            if (!isNaN(parseInt(pageNum, 10)) && isFinite(pageNum)) {\n              this.currentNextPage = pageNum;\n              return pageNum;\n            }\n\n            this.currentNextPage = this.getPageIndexByKey(next);\n            return this.currentNextPage;\n          }\n\n          this.currentNextPage = page;\n          return page;\n        }\n\n        this.currentNextPage = null;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getPreviousPage\",\n    value: function getPreviousPage() {\n      return this.page - 1;\n    }\n  }, {\n    key: \"beforeSubmit\",\n    value: function beforeSubmit() {\n      var pages = this.getPages();\n      return _nativePromiseOnly.default.all(pages.map(function (page) {\n        page.options.beforeSubmit = true;\n        return page.beforeSubmit();\n      }));\n    }\n  }, {\n    key: \"beforePage\",\n    value: function beforePage(next) {\n      var _this17 = this;\n\n      return new _nativePromiseOnly.default(function (resolve, reject) {\n        _this17.hook(next ? 'beforeNext' : 'beforePrev', _this17.currentPage, _this17.submission, function (err) {\n          if (err) {\n            _this17.showErrors(err, true);\n\n            reject(err);\n          }\n\n          var form = _this17.currentPage;\n\n          if (form) {\n            form.beforePage(next).then(resolve).catch(reject);\n          } else {\n            resolve();\n          }\n        });\n      });\n    }\n  }, {\n    key: \"emitNextPage\",\n    value: function emitNextPage() {\n      this.emit('nextPage', {\n        page: this.page,\n        submission: this.submission\n      });\n    }\n  }, {\n    key: \"nextPage\",\n    value: function nextPage() {\n      var _this18 = this;\n\n      // Read-only forms should not worry about validation before going to next page, nor should they submit.\n      if (this.options.readOnly) {\n        return this.beforePage(true).then(function () {\n          return _this18.setPage(_this18.getNextPage()).then(function () {\n            _this18.emitNextPage();\n          });\n        });\n      } // Validate the form, before go to the next page\n\n\n      if (this.checkValidity(this.localData, true, this.localData, true)) {\n        this.checkData(this.submission.data);\n        return this.beforePage(true).then(function () {\n          return _this18.setPage(_this18.getNextPage()).then(function () {\n            if (!(_this18.options.readOnly || _this18.editMode) && _this18.enabledIndex < _this18.page) {\n              _this18.enabledIndex = _this18.page;\n\n              _this18.redraw();\n            }\n\n            _this18.emitNextPage();\n          });\n        });\n      } else {\n        this.currentPage.components.forEach(function (comp) {\n          return comp.setPristine(false);\n        });\n        return _nativePromiseOnly.default.reject(this.showErrors([], true));\n      }\n    }\n  }, {\n    key: \"emitPrevPage\",\n    value: function emitPrevPage() {\n      this.emit('prevPage', {\n        page: this.page,\n        submission: this.submission\n      });\n    }\n  }, {\n    key: \"prevPage\",\n    value: function prevPage() {\n      var _this19 = this;\n\n      return this.beforePage().then(function () {\n        return _this19.setPage(_this19.getPreviousPage()).then(function () {\n          _this19.emitPrevPage();\n        });\n      });\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel(noconfirm) {\n      var _this20 = this;\n\n      if (this.options.readOnly) {\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      if (_get(_getPrototypeOf(Wizard.prototype), \"cancel\", this).call(this, noconfirm)) {\n        this.setPristine(true);\n        return this.setPage(0).then(function () {\n          if (_this20.enabledIndex) {\n            _this20.enabledIndex = 0;\n          }\n\n          _this20.onChange();\n\n          _this20.redraw();\n\n          return _this20.page;\n        });\n      }\n\n      return _nativePromiseOnly.default.resolve();\n    }\n  }, {\n    key: \"getPageIndexByKey\",\n    value: function getPageIndexByKey(key) {\n      var pageIndex = this.page;\n      this.pages.forEach(function (page, index) {\n        if (page.component.key === key) {\n          pageIndex = index;\n          return false;\n        }\n      });\n      return pageIndex;\n    }\n  }, {\n    key: \"schema\",\n    get: function get() {\n      return this.wizard;\n    }\n  }, {\n    key: \"setComponentSchema\",\n    value: function setComponentSchema() {\n      var _this21 = this;\n\n      var pageKeys = {};\n      this.originalComponents = [];\n      this.component.components.map(function (item) {\n        if (item.type === 'panel') {\n          item.key = (0, _utils.uniqueKey)(pageKeys, item.key || 'panel');\n          pageKeys[item.key] = true;\n\n          if (_this21.wizard.full) {\n            _this21.options.show = _this21.options.show || {};\n            _this21.options.show[item.key] = true;\n          } else if (_this21.wizard.hasOwnProperty('full') && !_lodash.default.isEqual(_this21.originalOptions.show, _this21.options.show)) {\n            _this21.options.show = _objectSpread({}, _this21.originalOptions.show || {});\n          }\n        }\n\n        _this21.originalComponents.push(_lodash.default.clone(item));\n      });\n\n      if (!Object.keys(pageKeys).length) {\n        var newPage = {\n          type: 'panel',\n          title: 'Page 1',\n          label: 'Page 1',\n          key: 'page1',\n          components: this.component.components\n        };\n        this.component.components = [newPage];\n        this.originalComponents.push(_lodash.default.clone(newPage));\n      }\n    }\n  }, {\n    key: \"setForm\",\n    value: function setForm(form, flags) {\n      if (!form) {\n        return;\n      }\n\n      return _get(_getPrototypeOf(Wizard.prototype), \"setForm\", this).call(this, form, flags);\n    }\n  }, {\n    key: \"onSetForm\",\n    value: function onSetForm(clonedForm, initialForm) {\n      this.component.components = (this._parentPath ? initialForm.components : clonedForm.components) || [];\n      this.setComponentSchema();\n    }\n  }, {\n    key: \"setEditMode\",\n    value: function setEditMode(submission) {\n      if (!this.editMode && submission._id && !this.options.readOnly) {\n        this.editMode = true;\n        this.redraw();\n      }\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(submission) {\n      var _this22 = this;\n\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var ignoreEstablishment = arguments.length > 2 ? arguments[2] : undefined;\n      this._submission = submission;\n\n      if (flags && flags.fromSubmission && (this.options.readOnly || this.editMode) && !this.isHtmlRenderMode()) {\n        this._data = submission.data;\n      }\n\n      if (!ignoreEstablishment) {\n        this.establishPages(submission.data);\n      }\n\n      var changed = this.getPages({\n        all: true\n      }).reduce(function (changed, page) {\n        return _this22.setNestedValue(page, submission.data, flags, changed) || changed;\n      }, false);\n\n      if (changed) {\n        this.pageFieldLogic(this.page);\n      }\n\n      this.setEditMode(submission);\n      return changed;\n    }\n  }, {\n    key: \"isClickable\",\n    value: function isClickable(page, index) {\n      return this.page !== index && (0, _utils.firstNonNil)([_lodash.default.get(page, 'breadcrumbClickable'), this.options.breadcrumbSettings.clickable]);\n    }\n  }, {\n    key: \"hasButton\",\n    value: function hasButton(name) {\n      var nextPage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.getNextPage();\n\n      // get page options with global options as default values\n      var _$get = _lodash.default.get(this.currentPage, 'component.buttonSettings', {}),\n          _$get$previous = _$get.previous,\n          previous = _$get$previous === void 0 ? this.options.buttonSettings.showPrevious : _$get$previous,\n          _$get$cancel = _$get.cancel,\n          cancel = _$get$cancel === void 0 ? this.options.buttonSettings.showCancel : _$get$cancel,\n          _$get$submit = _$get.submit,\n          submit = _$get$submit === void 0 ? this.options.buttonSettings.showSubmit : _$get$submit,\n          _$get$next = _$get.next,\n          next = _$get$next === void 0 ? this.options.buttonSettings.showNext : _$get$next;\n\n      switch (name) {\n        case 'previous':\n          return previous && this.getPreviousPage() > -1;\n\n        case 'next':\n          return next && nextPage !== null && nextPage !== -1;\n\n        case 'cancel':\n          return cancel && !this.options.readOnly;\n\n        case 'submit':\n          return submit && !this.options.readOnly && (nextPage === null || this.page === this.pages.length - 1);\n\n        default:\n          return true;\n      }\n    }\n  }, {\n    key: \"pageId\",\n    value: function pageId(page) {\n      if (page.key) {\n        // Some panels have the same key....\n        return \"\".concat(page.key, \"-\").concat(page.title);\n      } else if (page.components && page.components.length > 0) {\n        return this.pageId(page.components[0]);\n      } else {\n        return page.title;\n      }\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(flags, changed, modified, changes) {\n      var _this23 = this;\n\n      _get(_getPrototypeOf(Wizard.prototype), \"onChange\", this).call(this, flags, changed, modified, changes);\n\n      if (this.alert && !this.submitted) {\n        this.checkValidity(this.localData, false, this.localData, true);\n        this.showErrors([], true, true);\n      } // If the pages change, need to redraw the header.\n\n\n      var currentPanels;\n      var panels;\n      var currentNextPage = this.currentNextPage;\n\n      if (this.hasExtraPages) {\n        currentPanels = this.pages.map(function (page) {\n          return page.component.key;\n        });\n        this.establishPages();\n        panels = this.pages.map(function (page) {\n          return page.component.key;\n        });\n      } else {\n        var _this$currentPanel, _this$currentPanels;\n\n        currentPanels = this.currentPanels || this.pages.map(function (page) {\n          return page.component.key;\n        });\n        panels = this.establishPages().map(function (panel) {\n          return panel.key;\n        });\n        this.currentPanels = panels;\n\n        if ((_this$currentPanel = this.currentPanel) !== null && _this$currentPanel !== void 0 && _this$currentPanel.key && (_this$currentPanels = this.currentPanels) !== null && _this$currentPanels !== void 0 && _this$currentPanels.length) {\n          this.setPage(this.currentPanels.findIndex(function (panel) {\n            return panel === _this23.currentPanel.key;\n          }));\n        }\n      }\n\n      if (!_lodash.default.isEqual(panels, currentPanels) || flags && flags.fromSubmission) {\n        this.redrawHeader();\n      } // If the next page changes, then make sure to redraw navigation.\n\n\n      if (currentNextPage !== this.getNextPage()) {\n        this.redrawNavigation();\n      }\n    }\n  }, {\n    key: \"redraw\",\n    value: function redraw() {\n      var _this$parent, _this$parent$componen;\n\n      if ((_this$parent = this.parent) !== null && _this$parent !== void 0 && (_this$parent$componen = _this$parent.component) !== null && _this$parent$componen !== void 0 && _this$parent$componen.modalEdit) {\n        return this.parent.redraw();\n      }\n\n      return _get(_getPrototypeOf(Wizard.prototype), \"redraw\", this).call(this);\n    }\n  }, {\n    key: \"checkValidity\",\n    value: function checkValidity(data, dirty, row, currentPageOnly) {\n      if (!this.checkCondition(row, data)) {\n        this.setCustomValidity('');\n        return true;\n      }\n\n      var components = !currentPageOnly || this.isLastPage() ? this.getComponents() : this.currentPage.components;\n      return components.reduce(function (check, comp) {\n        return comp.checkValidity(data, dirty, row) && check;\n      }, true);\n    }\n  }, {\n    key: \"errors\",\n    get: function get() {\n      if (!this.isLastPage()) {\n        return this.currentPage.errors;\n      }\n\n      return _get(_getPrototypeOf(Wizard.prototype), \"errors\", this);\n    }\n  }, {\n    key: \"focusOnComponent\",\n    value: function focusOnComponent(key) {\n      var _this24 = this;\n\n      var pageIndex = 0;\n\n      var _this$pages$filter = this.pages.filter(function (page, index) {\n        var hasComponent = false;\n        page.getComponent(key, function (comp) {\n          if (comp.path === key) {\n            pageIndex = index;\n            hasComponent = true;\n          }\n        });\n        return hasComponent;\n      }),\n          _this$pages$filter2 = _slicedToArray(_this$pages$filter, 1),\n          page = _this$pages$filter2[0];\n\n      if (page && page !== this.currentPage) {\n        return this.setPage(pageIndex).then(function () {\n          _this24.checkValidity(_this24.submission.data, true, _this24.submission.data);\n\n          _this24.showErrors();\n\n          _get(_getPrototypeOf(Wizard.prototype), \"focusOnComponent\", _this24).call(_this24, key);\n        });\n      }\n\n      return _get(_getPrototypeOf(Wizard.prototype), \"focusOnComponent\", this).call(this, key);\n    }\n  }]);\n\n  return Wizard;\n}(_Webform2.default);\n\nexports.default = Wizard;\nWizard.setBaseUrl = _Formio.GlobalFormio.setBaseUrl;\nWizard.setApiUrl = _Formio.GlobalFormio.setApiUrl;\nWizard.setAppUrl = _Formio.GlobalFormio.setAppUrl;"]},"metadata":{},"sourceType":"script"}