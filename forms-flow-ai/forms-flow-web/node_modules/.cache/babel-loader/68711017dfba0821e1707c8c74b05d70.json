{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.reflect.set.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _Component = _interopRequireDefault(require(\"../_classes/component/Component\"));\n\nvar _Components = _interopRequireDefault(require(\"../Components\"));\n\nvar _NestedDataComponent2 = _interopRequireDefault(require(\"../_classes/nesteddata/NestedDataComponent\"));\n\nvar _Node = _interopRequireDefault(require(\"./Node\"));\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction set(target, property, value, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.set) {\n    set = Reflect.set;\n  } else {\n    set = function set(target, property, value, receiver) {\n      var base = _superPropBase(target, property);\n\n      var desc;\n\n      if (base) {\n        desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.set) {\n          desc.set.call(receiver, value);\n          return true;\n        } else if (!desc.writable) {\n          return false;\n        }\n      }\n\n      desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n      if (desc) {\n        if (!desc.writable) {\n          return false;\n        }\n\n        desc.value = value;\n        Object.defineProperty(receiver, property, desc);\n      } else {\n        _defineProperty(receiver, property, value);\n      }\n\n      return true;\n    };\n  }\n\n  return set(target, property, value, receiver);\n}\n\nfunction _set(target, property, value, receiver, isStrict) {\n  var s = set(target, property, value, receiver || target);\n\n  if (!s && isStrict) {\n    throw new Error('failed to set property');\n  }\n\n  return value;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = _superPropBase(target, property);\n\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = _getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar TreeComponent = /*#__PURE__*/function (_NestedDataComponent) {\n  _inherits(TreeComponent, _NestedDataComponent);\n\n  var _super = _createSuper(TreeComponent);\n\n  function TreeComponent() {\n    var _this;\n\n    _classCallCheck(this, TreeComponent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.type = 'tree';\n    return _this;\n  }\n\n  _createClass(TreeComponent, [{\n    key: \"emptyValue\",\n    get: function get() {\n      return {};\n    }\n  }, {\n    key: \"viewComponents\",\n    get: function get() {\n      if (!this.viewComponentsInstantiated) {\n        this.viewComponentsInstantiated = true;\n        this._viewComponents = this.createComponents({});\n      }\n\n      return this._viewComponents;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      if (this.builderMode) {\n        return _get(_getPrototypeOf(TreeComponent.prototype), \"init\", this).call(this);\n      }\n\n      this.components = [];\n      this.componentOptions = _objectSpread(_objectSpread({}, this.options), {}, {\n        parent: this,\n        root: this.root || this\n      });\n      this.disabled = this.shouldDisabled;\n      this.setRoot();\n      this.viewComponentsInstantiated = false;\n      this._viewComponents = [];\n    }\n  }, {\n    key: \"disabled\",\n    get: function get() {\n      return _get(_getPrototypeOf(TreeComponent.prototype), \"disabled\", this);\n    },\n    set: function set(disabled) {\n      _set(_getPrototypeOf(TreeComponent.prototype), \"disabled\", disabled, this, true);\n\n      this.viewComponents.forEach(function (component) {\n        return component.parentDisabled = disabled;\n      });\n    }\n  }, {\n    key: \"isDefaultValueComponent\",\n    get: function get() {\n      return !!this.options.editComponent && !!this.options.editForm && this.component.key === 'defaultValue';\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(TreeComponent.prototype), \"destroy\", this).call(this);\n\n      if (!this.builderMode) {\n        this.removeComponents(this._viewComponents);\n      }\n    }\n  }, {\n    key: \"createComponents\",\n    value: function createComponents(data, node) {\n      var _this2 = this;\n\n      var components = this.componentComponents.map(function (component) {\n        var componentInstance = _Components.default.create(component, _this2.componentOptions, data);\n\n        componentInstance.init();\n        componentInstance.parentDisabled = _this2.disabled;\n        return componentInstance;\n      });\n\n      if (node) {\n        this.checkNode(this.data, node);\n      }\n\n      return components;\n    }\n  }, {\n    key: \"removeComponents\",\n    value: function removeComponents(components) {\n      return components.map(function (component) {\n        return component.destroy();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.builderMode) {\n        return _get(_getPrototypeOf(TreeComponent.prototype), \"render\", this).call(this);\n      }\n\n      return _get(_getPrototypeOf(TreeComponent.prototype), \"render\", this).call(this, this.renderTree(this.treeRoot));\n    }\n  }, {\n    key: \"renderTree\",\n    value: function renderTree() {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var odd = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var childNodes = node.hasChildren && !node.collapsed ? this.renderChildNodes(node.children, !odd) : [];\n      var content = node.changing ? this.renderEdit(node) : this.renderView(node);\n      return this.renderTemplate('tree', {\n        odd: odd,\n        childNodes: childNodes,\n        content: content,\n        node: node\n      });\n    }\n  }, {\n    key: \"renderChildNodes\",\n    value: function renderChildNodes() {\n      var _this3 = this;\n\n      var nodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var odd = arguments.length > 1 ? arguments[1] : undefined;\n      return nodes.map(function (node) {\n        return _this3.renderTree(node, odd);\n      });\n    }\n  }, {\n    key: \"renderEdit\",\n    value: function renderEdit() {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.renderTemplate('treeEdit', {\n        children: this.renderComponents(node.components),\n        node: node\n      });\n    }\n  }, {\n    key: \"renderView\",\n    value: function renderView() {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.renderTemplate('treeView', {\n        values: this.viewComponents.map(function (component) {\n          component.data = node.data;\n          component.checkComponentConditions(node.data);\n          return component.getView(component.dataValue);\n        }),\n        nodeData: node.data,\n        node: node\n      });\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      if (this.builderMode) {\n        return _get(_getPrototypeOf(TreeComponent.prototype), \"attach\", this).call(this, element);\n      }\n\n      this.loadRefs(element, {\n        root: 'single'\n      });\n      return _nativePromiseOnly.default.all([_get(_getPrototypeOf(TreeComponent.prototype), \"attach\", this).call(this, element), this.attachNode(this.refs.root, this.treeRoot)]);\n    }\n  }, {\n    key: \"attachNode\",\n    value: function attachNode(element, node) {\n      if (!element) {\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      var componentsPromise = _nativePromiseOnly.default.resolve();\n\n      var childrenPromise = _nativePromiseOnly.default.resolve();\n\n      node.refs = _lodash.default.reduce(element.children, function (refs, child) {\n        return child.hasAttribute('ref') ? _objectSpread(_objectSpread({}, refs), {}, _defineProperty({}, child.getAttribute('ref'), child)) : refs;\n      }, {});\n\n      if (node.refs.content) {\n        this.attachActions(node);\n        componentsPromise = this.attachComponents(node);\n      }\n\n      if (node.refs.childNodes) {\n        childrenPromise = this.attachChildren(node);\n      }\n\n      return _nativePromiseOnly.default.all([componentsPromise, childrenPromise]);\n    }\n  }, {\n    key: \"attachActions\",\n    value: function attachActions(node) {\n      var _node$refs$content$ch,\n          _this4 = this;\n\n      if (!node.editing) {\n        this.loadRefs.call(node, node.refs.content, {\n          addChild: 'single',\n          editNode: 'single',\n          removeNode: 'single',\n          revertNode: 'single',\n          toggleNode: 'single'\n        });\n      } //load refs correctly (if there is nested tree)\n\n\n      this.loadRefs.call(node, ((_node$refs$content$ch = node.refs.content.children[0]) === null || _node$refs$content$ch === void 0 ? void 0 : _node$refs$content$ch.children[1]) || node.refs.content, {\n        cancelNode: 'single',\n        saveNode: 'single'\n      });\n\n      if (node.refs.addChild) {\n        this.addEventListener(node.refs.addChild, 'click', function () {\n          _this4.addChild(node);\n        });\n      }\n\n      if (node.refs.cancelNode) {\n        this.addEventListener(node.refs.cancelNode, 'click', function () {\n          _this4.cancelNode(node);\n        });\n      }\n\n      if (node.refs.editNode) {\n        this.addEventListener(node.refs.editNode, 'click', function () {\n          _this4.editNode(node);\n        });\n      }\n\n      if (node.refs.removeNode) {\n        this.addEventListener(node.refs.removeNode, 'click', function () {\n          _this4.removeNode(node);\n        });\n      }\n\n      if (node.refs.revertNode) {\n        this.addEventListener(node.refs.revertNode, 'click', function () {\n          _this4.revertNode(node);\n        });\n      }\n\n      if (node.refs.saveNode) {\n        this.addEventListener(node.refs.saveNode, 'click', function () {\n          _this4.saveNode(node);\n        });\n      }\n\n      if (node.refs.toggleNode) {\n        this.addEventListener(node.refs.toggleNode, 'click', function () {\n          _this4.toggleNode(node);\n        });\n      }\n    }\n  }, {\n    key: \"attachComponents\",\n    value: function attachComponents(node) {\n      if (this.builderMode) {\n        var _get2;\n\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        return (_get2 = _get(_getPrototypeOf(TreeComponent.prototype), \"attachComponents\", this)).call.apply(_get2, [this, node].concat(args));\n      }\n\n      this.loadRefs.call(node, node.refs.content, {\n        nodeEdit: 'single'\n      });\n      return node.refs.nodeEdit ? _get(_getPrototypeOf(TreeComponent.prototype), \"attachComponents\", this).call(this, node.refs.nodeEdit, node.components) : _nativePromiseOnly.default.resolve();\n    }\n  }, {\n    key: \"attachChildren\",\n    value: function attachChildren(node) {\n      var _this5 = this;\n\n      var childElements = node.refs.childNodes.children;\n      return _nativePromiseOnly.default.all(_lodash.default.map(childElements, function (childElement, index) {\n        return _this5.attachNode(childElement, node.children[index]);\n      }));\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var changed = this.updateValue(value, flags);\n      this.setRoot();\n      return changed;\n    }\n  }, {\n    key: \"addChild\",\n    value: function addChild(parent) {\n      var _this6 = this;\n\n      if (this.options.readOnly || parent.new) {\n        return;\n      }\n\n      this.hook('tree.addChild', {\n        parent: parent,\n        component: this\n      }, function () {\n        var child = parent.addChild();\n\n        _this6.redraw();\n\n        return child;\n      });\n    }\n  }, {\n    key: \"cancelNode\",\n    value: function cancelNode(node) {\n      var _this7 = this;\n\n      if (this.options.readOnly) {\n        return;\n      }\n\n      this.hook('tree.cancelNode', {\n        node: node,\n        component: this\n      }, function () {\n        if (node.isRoot) {\n          if (node.persistentData && !_lodash.default.isEmpty(node.persistentData)) {\n            node.cancel();\n\n            _this7.redraw();\n          } else {\n            _this7.removeRoot();\n          }\n        } else {\n          node.cancel();\n\n          _this7.redraw();\n        }\n\n        return node;\n      });\n    }\n  }, {\n    key: \"editNode\",\n    value: function editNode(node) {\n      var _this8 = this;\n\n      if (this.options.readOnly || node.new) {\n        return;\n      }\n\n      this.hook('tree.editNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.edit();\n\n        _this8.redraw();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"removeNode\",\n    value: function removeNode(node) {\n      var _this9 = this;\n\n      if (this.options.readOnly || node.new) {\n        return;\n      }\n\n      this.hook('tree.removeNode', {\n        node: node,\n        component: this\n      }, function () {\n        if (node.isRoot) {\n          _this9.removeRoot();\n        } else {\n          node.remove();\n\n          _this9.updateTree();\n        }\n\n        return node;\n      });\n    }\n  }, {\n    key: \"revertNode\",\n    value: function revertNode(node) {\n      var _this10 = this;\n\n      if (this.options.readOnly || !node.revertAvailable) {\n        return;\n      }\n\n      this.hook('tree.revertNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.revert();\n\n        _this10.updateTree();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"saveNode\",\n    value: function saveNode(node) {\n      var _this11 = this;\n\n      if (this.options.readOnly) {\n        return;\n      }\n\n      this.hook('tree.saveNode', {\n        node: node,\n        component: this\n      }, function () {\n        var isSaved = node.save();\n\n        if (isSaved) {\n          _this11.updateTree();\n        }\n\n        return node;\n      });\n    }\n  }, {\n    key: \"toggleNode\",\n    value: function toggleNode(node) {\n      var _this12 = this;\n\n      this.hook('tree.toggleNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.collapsed = !node.collapsed;\n\n        _this12.redraw();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"removeRoot\",\n    value: function removeRoot() {\n      if (this.options.readOnly) {\n        return;\n      }\n\n      this.dataValue = this.defaultValue;\n      this.setRoot();\n      this.redraw();\n    }\n  }, {\n    key: \"setRoot\",\n    value: function setRoot() {\n      var value = this.getValue();\n      this.treeRoot = new _Node.default(null, value, {\n        isNew: this.builderMode ? true : !value.data,\n        createComponents: this.createComponents.bind(this),\n        checkNode: this.checkNode.bind(this, this.data),\n        removeComponents: this.removeComponents,\n        parentPath: this.isDefaultValueComponent ? this.path || this.component.key : null\n      });\n      this.hook('tree.setRoot', {\n        root: this.treeRoot,\n        component: this\n      });\n      this.redraw();\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      return this.dataValue || {};\n    }\n  }, {\n    key: \"updateTree\",\n    value: function updateTree() {\n      this.updateValue(this.treeRoot.value);\n      this.redraw();\n    }\n  }, {\n    key: \"checkData\",\n    value: function checkData(data, flags, row) {\n      return this.checkNode(data, this.treeRoot, flags, row);\n    }\n  }, {\n    key: \"checkNode\",\n    value: function checkNode(data, node, flags, row) {\n      var _this13 = this;\n\n      return node.children.reduce(function (result, child) {\n        return _this13.checkNode(data, child, flags, row) && result;\n      }, _get(_getPrototypeOf(TreeComponent.prototype), \"checkData\", this).call(this, data, flags, node.data, node.components) && !node.editing && !node.new);\n    }\n  }, {\n    key: \"getComponents\",\n    value: function getComponents() {\n      return this.treeRoot && (this.isDefaultValueComponent || !this.isDefaultValueComponent && !this.builderMode) ? this.treeRoot.getComponents() : _get(_getPrototypeOf(TreeComponent.prototype), \"getComponents\", this).call(this);\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len3 = arguments.length, extend = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        extend[_key3] = arguments[_key3];\n      }\n\n      return _NestedDataComponent2.default.schema.apply(_NestedDataComponent2.default, [{\n        label: 'Tree',\n        key: 'tree',\n        type: 'tree',\n        clearOnHide: true,\n        input: true,\n        tree: true,\n        components: [],\n        multiple: false\n      }].concat(extend));\n    }\n  }, {\n    key: \"builderInfo\",\n    get: function get() {\n      return {\n        title: 'Tree',\n        icon: 'indent',\n        group: 'data',\n        weight: 40,\n        schema: TreeComponent.schema()\n      };\n    }\n  }]);\n\n  return TreeComponent;\n}(_NestedDataComponent2.default);\n\nexports.default = TreeComponent;\nTreeComponent.prototype.hasChanged = _Component.default.prototype.hasChanged;","map":{"version":3,"sources":["C:/Users/Devin/AOT_Projects/jag-servebc/forms-flow-ai/forms-flow-web/node_modules/formiojs/components/tree/Tree.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","require","Object","defineProperty","exports","value","default","_lodash","_interopRequireDefault","_Component","_Components","_NestedDataComponent2","_Node","_nativePromiseOnly","__esModule","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","set","property","receiver","Reflect","base","_superPropBase","desc","call","_set","isStrict","s","Error","_get","get","hasOwnProperty","_getPrototypeOf","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","construct","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","TreeComponent","_NestedDataComponent","_super","_this","_len","args","Array","_key","concat","type","viewComponentsInstantiated","_viewComponents","createComponents","init","builderMode","components","componentOptions","options","parent","root","disabled","shouldDisabled","setRoot","viewComponents","component","parentDisabled","editComponent","editForm","destroy","removeComponents","data","node","_this2","componentComponents","map","componentInstance","checkNode","render","renderTree","treeRoot","undefined","odd","childNodes","hasChildren","collapsed","renderChildNodes","children","content","changing","renderEdit","renderView","renderTemplate","_this3","nodes","renderComponents","values","checkComponentConditions","getView","dataValue","nodeData","attach","element","loadRefs","all","attachNode","refs","resolve","componentsPromise","childrenPromise","reduce","child","hasAttribute","getAttribute","attachActions","attachComponents","attachChildren","_node$refs$content$ch","_this4","editing","addChild","editNode","removeNode","revertNode","toggleNode","cancelNode","saveNode","addEventListener","_get2","_len2","_key2","nodeEdit","_this5","childElements","childElement","index","setValue","flags","changed","updateValue","_this6","readOnly","new","hook","redraw","_this7","isRoot","persistentData","isEmpty","cancel","removeRoot","_this8","edit","_this9","remove","updateTree","_this10","revertAvailable","revert","_this11","isSaved","save","_this12","defaultValue","getValue","isNew","bind","parentPath","isDefaultValueComponent","path","checkData","row","_this13","getComponents","schema","_len3","extend","_key3","label","clearOnHide","input","tree","multiple","title","icon","group","weight","hasChanged"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nrequire(\"core-js/modules/es.reflect.construct.js\");\n\nrequire(\"core-js/modules/es.reflect.get.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"core-js/modules/es.reflect.set.js\");\n\nrequire(\"core-js/modules/es.object.keys.js\");\n\nrequire(\"core-js/modules/es.symbol.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors.js\");\n\nrequire(\"core-js/modules/es.symbol.description.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"core-js/modules/es.array.iterator.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.object.get-prototype-of.js\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _Component = _interopRequireDefault(require(\"../_classes/component/Component\"));\n\nvar _Components = _interopRequireDefault(require(\"../Components\"));\n\nvar _NestedDataComponent2 = _interopRequireDefault(require(\"../_classes/nesteddata/NestedDataComponent\"));\n\nvar _Node = _interopRequireDefault(require(\"./Node\"));\n\nvar _nativePromiseOnly = _interopRequireDefault(require(\"native-promise-only\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction set(target, property, value, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.set) { set = Reflect.set; } else { set = function set(target, property, value, receiver) { var base = _superPropBase(target, property); var desc; if (base) { desc = Object.getOwnPropertyDescriptor(base, property); if (desc.set) { desc.set.call(receiver, value); return true; } else if (!desc.writable) { return false; } } desc = Object.getOwnPropertyDescriptor(receiver, property); if (desc) { if (!desc.writable) { return false; } desc.value = value; Object.defineProperty(receiver, property, desc); } else { _defineProperty(receiver, property, value); } return true; }; } return set(target, property, value, receiver); }\n\nfunction _set(target, property, value, receiver, isStrict) { var s = set(target, property, value, receiver || target); if (!s && isStrict) { throw new Error('failed to set property'); } return value; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar TreeComponent = /*#__PURE__*/function (_NestedDataComponent) {\n  _inherits(TreeComponent, _NestedDataComponent);\n\n  var _super = _createSuper(TreeComponent);\n\n  function TreeComponent() {\n    var _this;\n\n    _classCallCheck(this, TreeComponent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.type = 'tree';\n    return _this;\n  }\n\n  _createClass(TreeComponent, [{\n    key: \"emptyValue\",\n    get: function get() {\n      return {};\n    }\n  }, {\n    key: \"viewComponents\",\n    get: function get() {\n      if (!this.viewComponentsInstantiated) {\n        this.viewComponentsInstantiated = true;\n        this._viewComponents = this.createComponents({});\n      }\n\n      return this._viewComponents;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      if (this.builderMode) {\n        return _get(_getPrototypeOf(TreeComponent.prototype), \"init\", this).call(this);\n      }\n\n      this.components = [];\n      this.componentOptions = _objectSpread(_objectSpread({}, this.options), {}, {\n        parent: this,\n        root: this.root || this\n      });\n      this.disabled = this.shouldDisabled;\n      this.setRoot();\n      this.viewComponentsInstantiated = false;\n      this._viewComponents = [];\n    }\n  }, {\n    key: \"disabled\",\n    get: function get() {\n      return _get(_getPrototypeOf(TreeComponent.prototype), \"disabled\", this);\n    },\n    set: function set(disabled) {\n      _set(_getPrototypeOf(TreeComponent.prototype), \"disabled\", disabled, this, true);\n\n      this.viewComponents.forEach(function (component) {\n        return component.parentDisabled = disabled;\n      });\n    }\n  }, {\n    key: \"isDefaultValueComponent\",\n    get: function get() {\n      return !!this.options.editComponent && !!this.options.editForm && this.component.key === 'defaultValue';\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      _get(_getPrototypeOf(TreeComponent.prototype), \"destroy\", this).call(this);\n\n      if (!this.builderMode) {\n        this.removeComponents(this._viewComponents);\n      }\n    }\n  }, {\n    key: \"createComponents\",\n    value: function createComponents(data, node) {\n      var _this2 = this;\n\n      var components = this.componentComponents.map(function (component) {\n        var componentInstance = _Components.default.create(component, _this2.componentOptions, data);\n\n        componentInstance.init();\n        componentInstance.parentDisabled = _this2.disabled;\n        return componentInstance;\n      });\n\n      if (node) {\n        this.checkNode(this.data, node);\n      }\n\n      return components;\n    }\n  }, {\n    key: \"removeComponents\",\n    value: function removeComponents(components) {\n      return components.map(function (component) {\n        return component.destroy();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.builderMode) {\n        return _get(_getPrototypeOf(TreeComponent.prototype), \"render\", this).call(this);\n      }\n\n      return _get(_getPrototypeOf(TreeComponent.prototype), \"render\", this).call(this, this.renderTree(this.treeRoot));\n    }\n  }, {\n    key: \"renderTree\",\n    value: function renderTree() {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var odd = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var childNodes = node.hasChildren && !node.collapsed ? this.renderChildNodes(node.children, !odd) : [];\n      var content = node.changing ? this.renderEdit(node) : this.renderView(node);\n      return this.renderTemplate('tree', {\n        odd: odd,\n        childNodes: childNodes,\n        content: content,\n        node: node\n      });\n    }\n  }, {\n    key: \"renderChildNodes\",\n    value: function renderChildNodes() {\n      var _this3 = this;\n\n      var nodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var odd = arguments.length > 1 ? arguments[1] : undefined;\n      return nodes.map(function (node) {\n        return _this3.renderTree(node, odd);\n      });\n    }\n  }, {\n    key: \"renderEdit\",\n    value: function renderEdit() {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.renderTemplate('treeEdit', {\n        children: this.renderComponents(node.components),\n        node: node\n      });\n    }\n  }, {\n    key: \"renderView\",\n    value: function renderView() {\n      var node = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return this.renderTemplate('treeView', {\n        values: this.viewComponents.map(function (component) {\n          component.data = node.data;\n          component.checkComponentConditions(node.data);\n          return component.getView(component.dataValue);\n        }),\n        nodeData: node.data,\n        node: node\n      });\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(element) {\n      if (this.builderMode) {\n        return _get(_getPrototypeOf(TreeComponent.prototype), \"attach\", this).call(this, element);\n      }\n\n      this.loadRefs(element, {\n        root: 'single'\n      });\n      return _nativePromiseOnly.default.all([_get(_getPrototypeOf(TreeComponent.prototype), \"attach\", this).call(this, element), this.attachNode(this.refs.root, this.treeRoot)]);\n    }\n  }, {\n    key: \"attachNode\",\n    value: function attachNode(element, node) {\n      if (!element) {\n        return _nativePromiseOnly.default.resolve();\n      }\n\n      var componentsPromise = _nativePromiseOnly.default.resolve();\n\n      var childrenPromise = _nativePromiseOnly.default.resolve();\n\n      node.refs = _lodash.default.reduce(element.children, function (refs, child) {\n        return child.hasAttribute('ref') ? _objectSpread(_objectSpread({}, refs), {}, _defineProperty({}, child.getAttribute('ref'), child)) : refs;\n      }, {});\n\n      if (node.refs.content) {\n        this.attachActions(node);\n        componentsPromise = this.attachComponents(node);\n      }\n\n      if (node.refs.childNodes) {\n        childrenPromise = this.attachChildren(node);\n      }\n\n      return _nativePromiseOnly.default.all([componentsPromise, childrenPromise]);\n    }\n  }, {\n    key: \"attachActions\",\n    value: function attachActions(node) {\n      var _node$refs$content$ch,\n          _this4 = this;\n\n      if (!node.editing) {\n        this.loadRefs.call(node, node.refs.content, {\n          addChild: 'single',\n          editNode: 'single',\n          removeNode: 'single',\n          revertNode: 'single',\n          toggleNode: 'single'\n        });\n      } //load refs correctly (if there is nested tree)\n\n\n      this.loadRefs.call(node, ((_node$refs$content$ch = node.refs.content.children[0]) === null || _node$refs$content$ch === void 0 ? void 0 : _node$refs$content$ch.children[1]) || node.refs.content, {\n        cancelNode: 'single',\n        saveNode: 'single'\n      });\n\n      if (node.refs.addChild) {\n        this.addEventListener(node.refs.addChild, 'click', function () {\n          _this4.addChild(node);\n        });\n      }\n\n      if (node.refs.cancelNode) {\n        this.addEventListener(node.refs.cancelNode, 'click', function () {\n          _this4.cancelNode(node);\n        });\n      }\n\n      if (node.refs.editNode) {\n        this.addEventListener(node.refs.editNode, 'click', function () {\n          _this4.editNode(node);\n        });\n      }\n\n      if (node.refs.removeNode) {\n        this.addEventListener(node.refs.removeNode, 'click', function () {\n          _this4.removeNode(node);\n        });\n      }\n\n      if (node.refs.revertNode) {\n        this.addEventListener(node.refs.revertNode, 'click', function () {\n          _this4.revertNode(node);\n        });\n      }\n\n      if (node.refs.saveNode) {\n        this.addEventListener(node.refs.saveNode, 'click', function () {\n          _this4.saveNode(node);\n        });\n      }\n\n      if (node.refs.toggleNode) {\n        this.addEventListener(node.refs.toggleNode, 'click', function () {\n          _this4.toggleNode(node);\n        });\n      }\n    }\n  }, {\n    key: \"attachComponents\",\n    value: function attachComponents(node) {\n      if (this.builderMode) {\n        var _get2;\n\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        return (_get2 = _get(_getPrototypeOf(TreeComponent.prototype), \"attachComponents\", this)).call.apply(_get2, [this, node].concat(args));\n      }\n\n      this.loadRefs.call(node, node.refs.content, {\n        nodeEdit: 'single'\n      });\n      return node.refs.nodeEdit ? _get(_getPrototypeOf(TreeComponent.prototype), \"attachComponents\", this).call(this, node.refs.nodeEdit, node.components) : _nativePromiseOnly.default.resolve();\n    }\n  }, {\n    key: \"attachChildren\",\n    value: function attachChildren(node) {\n      var _this5 = this;\n\n      var childElements = node.refs.childNodes.children;\n      return _nativePromiseOnly.default.all(_lodash.default.map(childElements, function (childElement, index) {\n        return _this5.attachNode(childElement, node.children[index]);\n      }));\n    }\n  }, {\n    key: \"setValue\",\n    value: function setValue(value) {\n      var flags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var changed = this.updateValue(value, flags);\n      this.setRoot();\n      return changed;\n    }\n  }, {\n    key: \"addChild\",\n    value: function addChild(parent) {\n      var _this6 = this;\n\n      if (this.options.readOnly || parent.new) {\n        return;\n      }\n\n      this.hook('tree.addChild', {\n        parent: parent,\n        component: this\n      }, function () {\n        var child = parent.addChild();\n\n        _this6.redraw();\n\n        return child;\n      });\n    }\n  }, {\n    key: \"cancelNode\",\n    value: function cancelNode(node) {\n      var _this7 = this;\n\n      if (this.options.readOnly) {\n        return;\n      }\n\n      this.hook('tree.cancelNode', {\n        node: node,\n        component: this\n      }, function () {\n        if (node.isRoot) {\n          if (node.persistentData && !_lodash.default.isEmpty(node.persistentData)) {\n            node.cancel();\n\n            _this7.redraw();\n          } else {\n            _this7.removeRoot();\n          }\n        } else {\n          node.cancel();\n\n          _this7.redraw();\n        }\n\n        return node;\n      });\n    }\n  }, {\n    key: \"editNode\",\n    value: function editNode(node) {\n      var _this8 = this;\n\n      if (this.options.readOnly || node.new) {\n        return;\n      }\n\n      this.hook('tree.editNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.edit();\n\n        _this8.redraw();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"removeNode\",\n    value: function removeNode(node) {\n      var _this9 = this;\n\n      if (this.options.readOnly || node.new) {\n        return;\n      }\n\n      this.hook('tree.removeNode', {\n        node: node,\n        component: this\n      }, function () {\n        if (node.isRoot) {\n          _this9.removeRoot();\n        } else {\n          node.remove();\n\n          _this9.updateTree();\n        }\n\n        return node;\n      });\n    }\n  }, {\n    key: \"revertNode\",\n    value: function revertNode(node) {\n      var _this10 = this;\n\n      if (this.options.readOnly || !node.revertAvailable) {\n        return;\n      }\n\n      this.hook('tree.revertNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.revert();\n\n        _this10.updateTree();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"saveNode\",\n    value: function saveNode(node) {\n      var _this11 = this;\n\n      if (this.options.readOnly) {\n        return;\n      }\n\n      this.hook('tree.saveNode', {\n        node: node,\n        component: this\n      }, function () {\n        var isSaved = node.save();\n\n        if (isSaved) {\n          _this11.updateTree();\n        }\n\n        return node;\n      });\n    }\n  }, {\n    key: \"toggleNode\",\n    value: function toggleNode(node) {\n      var _this12 = this;\n\n      this.hook('tree.toggleNode', {\n        node: node,\n        component: this\n      }, function () {\n        node.collapsed = !node.collapsed;\n\n        _this12.redraw();\n\n        return node;\n      });\n    }\n  }, {\n    key: \"removeRoot\",\n    value: function removeRoot() {\n      if (this.options.readOnly) {\n        return;\n      }\n\n      this.dataValue = this.defaultValue;\n      this.setRoot();\n      this.redraw();\n    }\n  }, {\n    key: \"setRoot\",\n    value: function setRoot() {\n      var value = this.getValue();\n      this.treeRoot = new _Node.default(null, value, {\n        isNew: this.builderMode ? true : !value.data,\n        createComponents: this.createComponents.bind(this),\n        checkNode: this.checkNode.bind(this, this.data),\n        removeComponents: this.removeComponents,\n        parentPath: this.isDefaultValueComponent ? this.path || this.component.key : null\n      });\n      this.hook('tree.setRoot', {\n        root: this.treeRoot,\n        component: this\n      });\n      this.redraw();\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue() {\n      return this.dataValue || {};\n    }\n  }, {\n    key: \"updateTree\",\n    value: function updateTree() {\n      this.updateValue(this.treeRoot.value);\n      this.redraw();\n    }\n  }, {\n    key: \"checkData\",\n    value: function checkData(data, flags, row) {\n      return this.checkNode(data, this.treeRoot, flags, row);\n    }\n  }, {\n    key: \"checkNode\",\n    value: function checkNode(data, node, flags, row) {\n      var _this13 = this;\n\n      return node.children.reduce(function (result, child) {\n        return _this13.checkNode(data, child, flags, row) && result;\n      }, _get(_getPrototypeOf(TreeComponent.prototype), \"checkData\", this).call(this, data, flags, node.data, node.components) && !node.editing && !node.new);\n    }\n  }, {\n    key: \"getComponents\",\n    value: function getComponents() {\n      return this.treeRoot && (this.isDefaultValueComponent || !this.isDefaultValueComponent && !this.builderMode) ? this.treeRoot.getComponents() : _get(_getPrototypeOf(TreeComponent.prototype), \"getComponents\", this).call(this);\n    }\n  }], [{\n    key: \"schema\",\n    value: function schema() {\n      for (var _len3 = arguments.length, extend = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        extend[_key3] = arguments[_key3];\n      }\n\n      return _NestedDataComponent2.default.schema.apply(_NestedDataComponent2.default, [{\n        label: 'Tree',\n        key: 'tree',\n        type: 'tree',\n        clearOnHide: true,\n        input: true,\n        tree: true,\n        components: [],\n        multiple: false\n      }].concat(extend));\n    }\n  }, {\n    key: \"builderInfo\",\n    get: function get() {\n      return {\n        title: 'Tree',\n        icon: 'indent',\n        group: 'data',\n        weight: 40,\n        schema: TreeComponent.schema()\n      };\n    }\n  }]);\n\n  return TreeComponent;\n}(_NestedDataComponent2.default);\n\nexports.default = TreeComponent;\nTreeComponent.prototype.hasChanged = _Component.default.prototype.hasChanged;"]},"metadata":{},"sourceType":"script"}