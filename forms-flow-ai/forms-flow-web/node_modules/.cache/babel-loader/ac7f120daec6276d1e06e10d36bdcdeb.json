{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";\nimport _slicedToArray from \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Devin\\\\AOT_Projects\\\\forms-flow-master\\\\forms-flow-ai\\\\forms-flow-web\\\\src\\\\components\\\\Application\\\\List.js\",\n    _this = this,\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport filterFactory from \"react-bootstrap-table2-filter\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider from \"react-bootstrap-table2-toolkit\";\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\nimport { setApplicationListActivePage, setCountPerpage, setApplicationListLoader } from '../../actions/applicationActions';\nimport { getAllApplications, FilterApplications, getAllApplicationStatus } from \"../../apiManager/services/applicationServices\";\nimport Loading from \"../../containers/Loading\";\nimport Nodata from \"./nodata\";\nimport { columns, getoptions, defaultSortedBy } from \"./table\";\nimport { getUserRolePermission } from \"../../helper/user\";\nimport { CLIENT, STAFF_REVIEWER } from \"../../constants/constants\";\nimport { CLIENT_EDIT_STATUS } from \"../../constants/applicationConstants\";\nimport Alert from 'react-bootstrap/Alert';\nimport overlayFactory from 'react-bootstrap-table2-overlay';\nimport { SpinnerSVG } from '../../containers/SpinnerSVG';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var ApplicationList = /*#__PURE__*/React.memo(_c = _s2(function () {\n  var _s = $RefreshSig$();\n\n  _s2();\n\n  var applications = useSelector(function (state) {\n    return state.applications.applicationsList;\n  });\n  var countPerPage = useSelector(function (state) {\n    return state.applications.countPerPage;\n  });\n  var applicationStatus = useSelector(function (state) {\n    return state.applications.applicationStatus;\n  });\n  var isApplicationListLoading = useSelector(function (state) {\n    return state.applications.isApplicationListLoading;\n  });\n  var applicationCount = useSelector(function (state) {\n    return state.applications.applicationCount;\n  });\n  var dispatch = useDispatch();\n  var userRoles = useSelector(function (state) {\n    return state.user.roles;\n  });\n  var page = useSelector(function (state) {\n    return state.applications.activePage;\n  });\n  var iserror = useSelector(function (state) {\n    return state.applications.iserror;\n  });\n  var error = useSelector(function (state) {\n    return state.applications.error;\n  });\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      filtermode = _React$useState2[0],\n      setfiltermode = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      lastModified = _React$useState4[0],\n      setLastModified = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      isLoading = _React$useState6[0],\n      setIsLoading = _React$useState6[1];\n\n  useEffect(function () {\n    setIsLoading(false);\n  }, [applications]);\n  useEffect(function () {\n    dispatch(getAllApplicationStatus());\n  }, [dispatch]);\n\n  var useNoRenderRef = function useNoRenderRef(currentValue) {\n    _s();\n\n    var ref = useRef(currentValue);\n    ref.current = currentValue;\n    return ref;\n  };\n\n  _s(useNoRenderRef, \"QMBuJFIdzLIeqBcFwhMf246mjOM=\");\n\n  var countPerPageRef = useNoRenderRef(countPerPage);\n  var currentPage = useNoRenderRef(page);\n  useEffect(function () {\n    dispatch(getAllApplications(currentPage.current, countPerPageRef.current));\n  }, [dispatch, currentPage, countPerPageRef]);\n\n  var isClientEdit = function isClientEdit(applicationStatus) {\n    if (getUserRolePermission(userRoles, CLIENT) || getUserRolePermission(userRoles, STAFF_REVIEWER)) {\n      return CLIENT_EDIT_STATUS.includes(applicationStatus);\n    } else {\n      return false;\n    }\n  };\n\n  if (isApplicationListLoading) {\n    return /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, _this);\n  }\n\n  var getNoDataIndicationContent = function getNoDataIndicationContent() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"div-no-application\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"lbl-no-application\",\n        children: \" No applications found \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"lbl-no-application-desc\",\n        children: [\" \", \"Please change the selected filters to view applications\", \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, _this);\n  };\n\n  var handlePageChange = function handlePageChange(type, newState) {\n    if (type === \"filter\") {\n      setfiltermode(true);\n    } else if (type === \"pagination\") {\n      if (countPerPage > 5) {\n        dispatch(setApplicationListLoader(true));\n      } else {\n        setIsLoading(true);\n      }\n    }\n\n    dispatch(setCountPerpage(newState.sizePerPage));\n    dispatch(FilterApplications(newState));\n    dispatch(setApplicationListActivePage(newState.page));\n  };\n\n  var listApplications = function listApplications(applications) {\n    var totalApplications = applications.map(function (application) {\n      application.isClientEdit = isClientEdit(application.applicationStatus);\n      return application;\n    });\n    return totalApplications;\n  };\n\n  return applicationCount > 0 || filtermode ? /*#__PURE__*/_jsxDEV(ToolkitProvider, {\n    bootstrap4: true,\n    keyField: \"id\",\n    data: listApplications(applications),\n    columns: columns(applicationStatus, lastModified, setLastModified),\n    search: true,\n    children: function children(props) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main-header\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"application-head\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-list\",\n              \"aria-hidden\": \"true\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"application-text\",\n              children: \"Applications\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-1 application-count\",\n              children: [\"(\", applicationCount, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 19\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 15\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(BootstrapTable, _objectSpread(_objectSpread({\n            remote: {\n              pagination: true,\n              filter: true,\n              sort: true\n            },\n            loading: isLoading,\n            filter: filterFactory(),\n            pagination: paginationFactory(getoptions(applicationCount, page, countPerPage)),\n            onTableChange: handlePageChange,\n            filterPosition: 'top'\n          }, props.baseProps), {}, {\n            noDataIndication: function noDataIndication() {\n              return !isLoading && getNoDataIndicationContent();\n            },\n            defaultSorted: defaultSortedBy,\n            overlay: overlayFactory({\n              spinner: /*#__PURE__*/_jsxDEV(SpinnerSVG, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 57\n              }, _this),\n              styles: {\n                overlay: function overlay(base) {\n                  return _objectSpread(_objectSpread({}, base), {}, {\n                    background: 'rgba(255, 255, 255)',\n                    height: \"\".concat(countPerPage > 5 ? '100% !important' : '350px !important'),\n                    top: '65px'\n                  });\n                }\n              }\n            })\n          }), void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 19\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 15\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }, _this);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 7\n  }, _this) : iserror ? /*#__PURE__*/_jsxDEV(Alert, {\n    variant: \"danger\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 19\n  }, _this) : /*#__PURE__*/_jsxDEV(Nodata, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 7\n  }, _this);\n}, \"k1Fy/GqgOj6vHSjII6e+NTvjQgc=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useSelector, useDispatch, useSelector, useSelector, useSelector, useSelector, useNoRenderRef, useNoRenderRef];\n}));\n_c2 = ApplicationList;\nexport default ApplicationList;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ApplicationList$React.memo\");\n$RefreshReg$(_c2, \"ApplicationList\");","map":{"version":3,"sources":["C:/Users/Devin/AOT_Projects/forms-flow-master/forms-flow-ai/forms-flow-web/src/components/Application/List.js"],"names":["React","useEffect","useRef","useDispatch","useSelector","BootstrapTable","filterFactory","paginationFactory","ToolkitProvider","setApplicationListActivePage","setCountPerpage","setApplicationListLoader","getAllApplications","FilterApplications","getAllApplicationStatus","Loading","Nodata","columns","getoptions","defaultSortedBy","getUserRolePermission","CLIENT","STAFF_REVIEWER","CLIENT_EDIT_STATUS","Alert","overlayFactory","SpinnerSVG","ApplicationList","memo","applications","state","applicationsList","countPerPage","applicationStatus","isApplicationListLoading","applicationCount","dispatch","userRoles","user","roles","page","activePage","iserror","error","useState","filtermode","setfiltermode","lastModified","setLastModified","isLoading","setIsLoading","useNoRenderRef","currentValue","ref","current","countPerPageRef","currentPage","isClientEdit","includes","getNoDataIndicationContent","handlePageChange","type","newState","sizePerPage","listApplications","totalApplications","map","application","props","pagination","filter","sort","baseProps","spinner","styles","overlay","base","background","height","top"],"mappings":"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","sourcesContent":["import React, {useEffect,useRef} from 'react'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport filterFactory from \"react-bootstrap-table2-filter\";\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\nimport ToolkitProvider from \"react-bootstrap-table2-toolkit\";\r\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\r\nimport { setApplicationListActivePage,setCountPerpage,setApplicationListLoader } from '../../actions/applicationActions';\r\nimport {getAllApplications,FilterApplications, getAllApplicationStatus} from \"../../apiManager/services/applicationServices\";\r\nimport Loading from \"../../containers/Loading\";\r\nimport Nodata from \"./nodata\";\r\nimport {\r\n  columns,\r\n  getoptions,\r\n  defaultSortedBy,\r\n} from \"./table\";\r\nimport {getUserRolePermission} from \"../../helper/user\";\r\nimport {CLIENT, STAFF_REVIEWER} from \"../../constants/constants\";\r\nimport {CLIENT_EDIT_STATUS} from \"../../constants/applicationConstants\";\r\nimport Alert from 'react-bootstrap/Alert'\r\nimport overlayFactory from 'react-bootstrap-table2-overlay';\r\nimport { SpinnerSVG } from '../../containers/SpinnerSVG';\r\n\r\nexport const ApplicationList = React.memo(() => {\r\n  const applications = useSelector(state=>state.applications.applicationsList);\r\n  const countPerPage = useSelector(state=>state.applications.countPerPage);\r\n  const applicationStatus = useSelector(state=>state.applications.applicationStatus);\r\n  const isApplicationListLoading = useSelector(state=>state.applications.isApplicationListLoading);\r\n  const applicationCount = useSelector(state=>state.applications.applicationCount);\r\n  const dispatch= useDispatch();\r\n  const userRoles = useSelector((state) => state.user.roles);\r\n  const page = useSelector(state=>state.applications.activePage);\r\n  const iserror = useSelector(state=>state.applications.iserror);\r\n  const error = useSelector(state=>state.applications.error);\r\n  const [filtermode,setfiltermode] = React.useState(false);\r\n\r\n  const [lastModified,setLastModified] = React.useState(null);\r\n  const [isLoading,setIsLoading] = React.useState(false);\r\n  useEffect(()=>{\r\n    setIsLoading(false)\r\n  },[applications])\r\n  useEffect(()=>{\r\n      dispatch(getAllApplicationStatus());\r\n  },[dispatch])\r\n\r\n  const useNoRenderRef = (currentValue)=>{\r\n    const ref = useRef(currentValue);\r\n    ref.current = currentValue;\r\n    return ref;\r\n  }\r\n\r\n  const countPerPageRef = useNoRenderRef(countPerPage);\r\n\r\n  const currentPage = useNoRenderRef(page);\r\n\r\n  useEffect(()=>{\r\n    dispatch(getAllApplications(currentPage.current,countPerPageRef.current));\r\n  },[dispatch,currentPage,countPerPageRef])\r\n\r\n  const isClientEdit = (applicationStatus) => {\r\n    if (getUserRolePermission(userRoles, CLIENT)||getUserRolePermission(userRoles, STAFF_REVIEWER)) {\r\n      return CLIENT_EDIT_STATUS.includes(applicationStatus)\r\n    }else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  if (isApplicationListLoading) {\r\n    return (\r\n      <Loading/>\r\n    );\r\n  }\r\n  const getNoDataIndicationContent = () => {\r\n    return (\r\n      <div className=\"div-no-application\">\r\n        <label className=\"lbl-no-application\"> No applications found </label>\r\n        <br />\r\n        <label className=\"lbl-no-application-desc\">\r\n          {\" \"}\r\n          Please change the selected filters to view applications{\" \"}\r\n        </label>\r\n        <br />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const handlePageChange = (type,newState) => {\r\n    if(type === \"filter\"){\r\n      setfiltermode(true)\r\n    }\r\n    else if(type===\"pagination\"){\r\n      if(countPerPage > 5){\r\n        dispatch(setApplicationListLoader(true))\r\n      }else{\r\n        setIsLoading(true)\r\n      }\r\n    }\r\n    dispatch(setCountPerpage(newState.sizePerPage));\r\n    dispatch(FilterApplications(newState));\r\n    dispatch(setApplicationListActivePage(newState.page));\r\n  };\r\n\r\n  const listApplications = (applications) => {\r\n    let totalApplications = applications.map(application => {\r\n      application.isClientEdit = isClientEdit(application.applicationStatus);\r\n      return application;\r\n    });\r\n    return totalApplications;\r\n  }\r\n  return (\r\n    applicationCount > 0 || filtermode ? (\r\n      <ToolkitProvider\r\n        bootstrap4\r\n        keyField=\"id\"\r\n        data={listApplications(applications)}\r\n        columns={columns(applicationStatus,lastModified,setLastModified)}\r\n        search\r\n      >\r\n        {(props) => (\r\n            <div className=\"container\">\r\n              <div className=\"main-header\">\r\n                <h3 className=\"application-head\">\r\n                <i className=\"fa fa-list\" aria-hidden=\"true\"/>\r\n              <span className=\"application-text\">Applications</span>\r\n                  <div className=\"col-md-1 application-count\">({applicationCount})</div>\r\n                </h3>\r\n              </div>\r\n              <br />\r\n              <div>\r\n                  <BootstrapTable\r\n                    remote={ { pagination: true, filter: true, sort: true } }\r\n                    loading={isLoading}\r\n                    filter={filterFactory()}\r\n                    pagination={paginationFactory(getoptions(applicationCount,page,countPerPage))}\r\n                    onTableChange={handlePageChange}\r\n                    filterPosition={'top'}\r\n                    {...props.baseProps}\r\n                    noDataIndication={() => !isLoading && getNoDataIndicationContent()}\r\n                    defaultSorted={ defaultSortedBy }\r\n                    overlay={ overlayFactory({ spinner: <SpinnerSVG/>, styles: { overlay: (base) => ({...base,background: 'rgba(255, 255, 255)',height:`${countPerPage > 5 ? '100% !important':'350px !important'}`,top:'65px'}) } }) }\r\n                  />\r\n              </div>\r\n            </div>\r\n          )}\r\n      </ToolkitProvider>\r\n    ) : iserror ? <Alert  variant={\"danger\"}>\r\n        {error}\r\n        </Alert>:\r\n  (\r\n      <Nodata />\r\n    )\r\n\r\n  )\r\n})\r\n\r\n\r\nexport default ApplicationList;\r\n\r\n"]},"metadata":{},"sourceType":"module"}